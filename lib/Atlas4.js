!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Atlas",[],e):"object"==typeof exports?exports.Atlas=e():t.Atlas=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=9)}([function(t,e,n){
/* @preserve
 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function(t){"use strict";function e(t){var e,n,i,o;for(n=1,i=arguments.length;n<i;n++)for(e in o=arguments[n])t[e]=o[e];return t}var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var o=0;function a(t){return t._leaflet_id=t._leaflet_id||++o,t._leaflet_id}function s(t,e,n){var i,o,a,s;return s=function(){i=!1,o&&(a.apply(n,o),o=!1)},a=function(){i?o=arguments:(t.apply(n,arguments),setTimeout(s,e),i=!0)}}function r(t,e,n){var i=e[1],o=e[0],a=i-o;return t===i&&n?t:((t-o)%a+a)%a+o}function l(){return!1}function h(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function c(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return c(t).split(/\s+/)}function u(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[i]=e[i];return t.options}function p(t,e,n){var i=[];for(var o in t)i.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var f=/\{ *([\w_-]+) *\}/g;function m(t,e){return t.replace(f,(function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i}))}var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function v(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function _(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function A(t){var e=+new Date,n=Math.max(0,16-(e-b));return b=e+n,window.setTimeout(t,n)}var w=window.requestAnimationFrame||_("RequestAnimationFrame")||A,x=window.cancelAnimationFrame||_("CancelAnimationFrame")||_("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function M(t,e,n){if(!n||w!==A)return w.call(window,i(t,e));t.call(e)}function T(t){t&&x.call(window,t)}var k={extend:e,create:n,bind:i,lastId:o,stamp:a,throttle:s,wrapNum:r,falseFn:l,formatNum:h,trim:c,splitWords:d,setOptions:u,getParamString:p,template:m,isArray:g,indexOf:v,emptyImageUrl:y,requestFn:w,cancelFn:x,requestAnimFrame:M,cancelAnimFrame:T};function C(){}C.extend=function(t){var i=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=i.__super__=this.prototype,a=n(o);for(var s in a.constructor=i,i.prototype=a,this)Object.prototype.hasOwnProperty.call(this,s)&&"prototype"!==s&&"__super__"!==s&&(i[s]=this[s]);return t.statics&&(e(i,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=g(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[a].concat(t.includes)),delete t.includes),a.options&&(t.options=e(n(a.options),t.options)),e(a,t),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=a._initHooks.length;t<e;t++)a._initHooks[t].call(this)}},i},C.include=function(t){return e(this.prototype,t),this},C.mergeOptions=function(t){return e(this.prototype.options,t),this},C.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var I={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var o=0,a=(t=d(t)).length;o<a;o++)this._on(t[o],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var o=0,a=(t=d(t)).length;o<a;o++)this._off(t[o],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var o={fn:e,ctx:n},a=i,s=0,r=a.length;s<r;s++)if(a[s].fn===e&&a[s].ctx===n)return;a.push(o)},_off:function(t,e,n){var i,o,a;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(o=0,a=i.length;o<a;o++){var s=i[o];if(s.ctx===n&&s.fn===e)return s.fn=l,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(o,1)}}else{for(o=0,a=i.length;o<a;o++)i[o].fn=l;delete this._events[t]}},fire:function(t,n,i){if(!this.listens(t,i))return this;var o=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var a=this._events[t];if(a){this._firingCount=this._firingCount+1||1;for(var s=0,r=a.length;s<r;s++){var l=a[s];l.fn.call(l.ctx||this,o)}this._firingCount--}}return i&&this._propagateEvent(o),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var o in t)this.once(o,t[o],e);return this}var a=i((function(){this.off(t,e,n).off(t,a,n)}),this);return this.on(t,e,n).on(t,a,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};I.addEventListener=I.on,I.removeEventListener=I.clearAllEventListeners=I.off,I.addOneTimeEventListener=I.once,I.fireEvent=I.fire,I.hasEventListeners=I.listens;var E=C.extend(I);function S(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var N=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function z(t,e,n){return t instanceof S?t:g(t)?new S(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new S(t.x,t.y):new S(t,e,n)}function P(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])}function D(t,e){return!t||t instanceof P?t:new P(t,e)}function j(t,e){if(t)for(var n=e?[t,e]:t,i=0,o=n.length;i<o;i++)this.extend(n[i])}function O(t,e){return t instanceof j?t:new j(t,e)}function B(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function Z(t,e,n){return t instanceof B?t:g(t)&&"object"!=typeof t[0]?3===t.length?new B(t[0],t[1],t[2]):2===t.length?new B(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new B(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new B(t,e,n)}S.prototype={clone:function(){return new S(this.x,this.y)},add:function(t){return this.clone()._add(z(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(z(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new S(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new S(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=N(this.x),this.y=N(this.y),this},distanceTo:function(t){var e=(t=z(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=z(t)).x===this.x&&t.y===this.y},contains:function(t){return t=z(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}},P.prototype={extend:function(t){return t=z(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new S((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new S(this.min.x,this.max.y)},getTopRight:function(){return new S(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof S?z(t):D(t))instanceof P?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=D(t);var e=this.min,n=this.max,i=t.min,o=t.max,a=o.x>=e.x&&i.x<=n.x,s=o.y>=e.y&&i.y<=n.y;return a&&s},overlaps:function(t){t=D(t);var e=this.min,n=this.max,i=t.min,o=t.max,a=o.x>e.x&&i.x<n.x,s=o.y>e.y&&i.y<n.y;return a&&s},isValid:function(){return!(!this.min||!this.max)}},j.prototype={extend:function(t){var e,n,i=this._southWest,o=this._northEast;if(t instanceof B)e=t,n=t;else{if(!(t instanceof j))return t?this.extend(Z(t)||O(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||o?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),o.lat=Math.max(n.lat,o.lat),o.lng=Math.max(n.lng,o.lng)):(this._southWest=new B(e.lat,e.lng),this._northEast=new B(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,o=Math.abs(e.lng-n.lng)*t;return new j(new B(e.lat-i,e.lng-o),new B(n.lat+i,n.lng+o))},getCenter:function(){return new B((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new B(this.getNorth(),this.getWest())},getSouthEast:function(){return new B(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof B||"lat"in t?Z(t):O(t);var e,n,i=this._southWest,o=this._northEast;return t instanceof j?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=o.lat&&e.lng>=i.lng&&n.lng<=o.lng},intersects:function(t){t=O(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),a=o.lat>=e.lat&&i.lat<=n.lat,s=o.lng>=e.lng&&i.lng<=n.lng;return a&&s},overlaps:function(t){t=O(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),o=t.getNorthEast(),a=o.lat>e.lat&&i.lat<n.lat,s=o.lng>e.lng&&i.lng<n.lng;return a&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=O(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},B.prototype={equals:function(t,e){return!!t&&(t=Z(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+h(this.lat,t)+", "+h(this.lng,t)+")"},distanceTo:function(t){return J.distance(this,Z(t))},wrap:function(){return J.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return O([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new B(this.lat,this.lng,this.alt)}};var W,U={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new P(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?r(t.lng,this.wrapLng,!0):t.lng;return new B(this.wrapLat?r(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,o=e.lng-n.lng;if(0===i&&0===o)return t;var a=t.getSouthWest(),s=t.getNorthEast();return new j(new B(a.lat-i,a.lng-o),new B(s.lat-i,s.lng-o))}},J=e({},U,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,o=e.lat*n,a=Math.sin((e.lat-t.lat)*n/2),s=Math.sin((e.lng-t.lng)*n/2),r=a*a+Math.cos(i)*Math.cos(o)*s*s,l=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r));return this.R*l}}),H={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),o=Math.sin(i*e);return new S(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new B((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(W=6378137*Math.PI,new P([-W,-W],[W,W]))};function F(t,e,n,i){if(g(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function R(t,e,n,i){return new F(t,e,n,i)}F.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new S((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var V=e({},J,{code:"EPSG:3857",projection:H,transformation:function(){var t=.5/(Math.PI*H.R);return R(t,.5,-t,.5)}()}),G=e({},V,{code:"EPSG:900913"});function Q(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Y(t,e){var n,i,o,a,s,r,l="";for(n=0,o=t.length;n<o;n++){for(i=0,a=(s=t[n]).length;i<a;i++)l+=(i?"L":"M")+(r=s[i]).x+" "+r.y;l+=e?kt?"z":"x":""}return l||"M0 0"}var K=document.documentElement.style,q="ActiveXObject"in window,X=q&&!document.addEventListener,$="msLaunchUri"in navigator&&!("documentMode"in document),tt=It("webkit"),et=It("android"),nt=It("android 2")||It("android 3"),it=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ot=et&&It("Google")&&it<537&&!("AudioNode"in window),at=!!window.opera,st=!$&&It("chrome"),rt=It("gecko")&&!tt&&!at&&!q,lt=!st&&It("safari"),ht=It("phantom"),ct="OTransition"in K,dt=0===navigator.platform.indexOf("Win"),ut=q&&"transition"in K,pt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!nt,ft="MozPerspective"in K,mt=!window.L_DISABLE_3D&&(ut||pt||ft)&&!ct&&!ht,gt="undefined"!=typeof orientation||It("mobile"),vt=gt&&tt,yt=gt&&pt,_t=!window.PointerEvent&&window.MSPointerEvent,bt=!(!window.PointerEvent&&!_t),At=!window.L_NO_TOUCH&&(bt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),wt=gt&&at,Lt=gt&&rt,xt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Mt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",l,e),window.removeEventListener("testPassiveEventSupport",l,e)}catch(t){}return t}(),Tt=!!document.createElement("canvas").getContext,kt=!(!document.createElementNS||!Q("svg").createSVGRect),Ct=!kt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function It(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Et={ie:q,ielt9:X,edge:$,webkit:tt,android:et,android23:nt,androidStock:ot,opera:at,chrome:st,gecko:rt,safari:lt,phantom:ht,opera12:ct,win:dt,ie3d:ut,webkit3d:pt,gecko3d:ft,any3d:mt,mobile:gt,mobileWebkit:vt,mobileWebkit3d:yt,msPointer:_t,pointer:bt,touch:At,mobileOpera:wt,mobileGecko:Lt,retina:xt,passiveEvents:Mt,canvas:Tt,svg:kt,vml:Ct},St=_t?"MSPointerDown":"pointerdown",Nt=_t?"MSPointerMove":"pointermove",zt=_t?"MSPointerUp":"pointerup",Pt=_t?"MSPointerCancel":"pointercancel",Dt={},jt=!1;function Ot(t,e,n,o){return"touchstart"===e?function(t,e,n){var o=i((function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Pe(t),Ut(t,e)}));t["_leaflet_touchstart"+n]=o,t.addEventListener(St,o,!1),jt||(document.addEventListener(St,Bt,!0),document.addEventListener(Nt,Zt,!0),document.addEventListener(zt,Wt,!0),document.addEventListener(Pt,Wt,!0),jt=!0)}(t,n,o):"touchmove"===e?function(t,e,n){var i=function(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Ut(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(Nt,i,!1)}(t,n,o):"touchend"===e&&function(t,e,n){var i=function(t){Ut(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(zt,i,!1),t.addEventListener(Pt,i,!1)}(t,n,o),this}function Bt(t){Dt[t.pointerId]=t}function Zt(t){Dt[t.pointerId]&&(Dt[t.pointerId]=t)}function Wt(t){delete Dt[t.pointerId]}function Ut(t,e){for(var n in t.touches=[],Dt)t.touches.push(Dt[n]);t.changedTouches=[t],e(t)}var Jt,Ht,Ft,Rt,Vt,Gt=_t?"MSPointerDown":bt?"pointerdown":"touchstart",Qt=_t?"MSPointerUp":bt?"pointerup":"touchend",Yt="_leaflet_",Kt=ue(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),qt=ue(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Xt="webkitTransition"===qt||"OTransition"===qt?qt+"End":"transitionend";function $t(t){return"string"==typeof t?document.getElementById(t):t}function te(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function ee(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function ne(t){var e=t.parentNode;e&&e.removeChild(t)}function ie(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function oe(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ae(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function se(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=ce(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function re(t,e){if(void 0!==t.classList)for(var n=d(e),i=0,o=n.length;i<o;i++)t.classList.add(n[i]);else if(!se(t,e)){var a=ce(t);he(t,(a?a+" ":"")+e)}}function le(t,e){void 0!==t.classList?t.classList.remove(e):he(t,c((" "+ce(t)+" ").replace(" "+e+" "," ")))}function he(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ce(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function de(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function ue(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function pe(t,e,n){var i=e||new S(0,0);t.style[Kt]=(ut?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function fe(t,e){t._leaflet_pos=e,mt?pe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function me(t){return t._leaflet_pos||new S(0,0)}if("onselectstart"in document)Jt=function(){xe(window,"selectstart",Pe)},Ht=function(){Te(window,"selectstart",Pe)};else{var ge=ue(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Jt=function(){if(ge){var t=document.documentElement.style;Ft=t[ge],t[ge]="none"}},Ht=function(){ge&&(document.documentElement.style[ge]=Ft,Ft=void 0)}}function ve(){xe(window,"dragstart",Pe)}function ye(){Te(window,"dragstart",Pe)}function _e(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(be(),Rt=t,Vt=t.style.outline,t.style.outline="none",xe(window,"keydown",be))}function be(){Rt&&(Rt.style.outline=Vt,Rt=void 0,Vt=void 0,Te(window,"keydown",be))}function Ae(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function we(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Le={TRANSFORM:Kt,TRANSITION:qt,TRANSITION_END:Xt,get:$t,getStyle:te,create:ee,remove:ne,empty:ie,toFront:oe,toBack:ae,hasClass:se,addClass:re,removeClass:le,setClass:he,getClass:ce,setOpacity:de,testProp:ue,setTransform:pe,setPosition:fe,getPosition:me,disableTextSelection:Jt,enableTextSelection:Ht,disableImageDrag:ve,enableImageDrag:ye,preventOutline:_e,restoreOutline:be,getSizedParentNode:Ae,getScale:we};function xe(t,e,n,i){if("object"==typeof e)for(var o in e)Ie(t,o,e[o],n);else for(var a=0,s=(e=d(e)).length;a<s;a++)Ie(t,e[a],n,i);return this}var Me="_leaflet_events";function Te(t,e,n,i){if("object"==typeof e)for(var o in e)Ee(t,o,e[o],n);else if(e)for(var a=0,s=(e=d(e)).length;a<s;a++)Ee(t,e[a],n,i);else{for(var r in t[Me])Ee(t,r,t[Me][r]);delete t[Me]}return this}function ke(){if(bt)return!($||lt)}var Ce={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ie(t,e,n,i){var o=e+a(n)+(i?"_"+a(i):"");if(t[Me]&&t[Me][o])return this;var s=function(e){return n.call(i||t,e||window.event)},r=s;bt&&0===e.indexOf("touch")?Ot(t,e,s,o):At&&"dblclick"===e&&!ke()?function(t,e,n){var i,o,a=!1;function s(t){if(bt){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(t.touches.length>1)return;var e=Date.now(),n=e-(i||e);o=t.touches?t.touches[0]:t,a=n>0&&n<=250,i=e}function r(t){if(a&&!o.cancelBubble){if(bt){if("mouse"===t.pointerType)return;var n,s,r={};for(s in o)n=o[s],r[s]=n&&n.bind?n.bind(o):n;o=r}o.type="dblclick",o.button=0,e(o),i=null}}t[Yt+Gt+n]=s,t[Yt+Qt+n]=r,t[Yt+"dblclick"+n]=e,t.addEventListener(Gt,s,!!Mt&&{passive:!1}),t.addEventListener(Qt,r,!!Mt&&{passive:!1}),t.addEventListener("dblclick",e,!1)}(t,s,o):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Ce[e]||e,s,!!Mt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,Je(t,e)&&r(e)},t.addEventListener(Ce[e],s,!1)):t.addEventListener(e,r,!1):"attachEvent"in t&&t.attachEvent("on"+e,s),t[Me]=t[Me]||{},t[Me][o]=s}function Ee(t,e,n,i){var o=e+a(n)+(i?"_"+a(i):""),s=t[Me]&&t[Me][o];if(!s)return this;bt&&0===e.indexOf("touch")?function(t,e,n){var i=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(St,i,!1):"touchmove"===e?t.removeEventListener(Nt,i,!1):"touchend"===e&&(t.removeEventListener(zt,i,!1),t.removeEventListener(Pt,i,!1))}(t,e,o):At&&"dblclick"===e&&!ke()?function(t,e){var n=t[Yt+Gt+e],i=t[Yt+Qt+e],o=t[Yt+"dblclick"+e];t.removeEventListener(Gt,n,!!Mt&&{passive:!1}),t.removeEventListener(Qt,i,!!Mt&&{passive:!1}),t.removeEventListener("dblclick",o,!1)}(t,o):"removeEventListener"in t?t.removeEventListener(Ce[e]||e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[Me][o]=null}function Se(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Ue(t),this}function Ne(t){return Ie(t,"wheel",Se),this}function ze(t){return xe(t,"mousedown touchstart dblclick",Se),Ie(t,"click",We),this}function Pe(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function De(t){return Pe(t),Se(t),this}function je(t,e){if(!e)return new S(t.clientX,t.clientY);var n=we(e),i=n.boundingClientRect;return new S((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var Oe=dt&&st?2*window.devicePixelRatio:rt?window.devicePixelRatio:1;function Be(t){return $?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Oe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ze={};function We(t){Ze[t.type]=!0}function Ue(t){var e=Ze[t.type];return Ze[t.type]=!1,e}function Je(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var He={on:xe,off:Te,stopPropagation:Se,disableScrollPropagation:Ne,disableClickPropagation:ze,preventDefault:Pe,stop:De,getMousePosition:je,getWheelDelta:Be,fakeStop:We,skipped:Ue,isExternalTarget:Je,addListener:xe,removeListener:Te},Fe=E.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=me(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),fe(this._el,n),this.fire("step")},_complete:function(){T(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Re=E.extend({options:{crs:V,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=u(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(Z(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=qt&&mt&&!wt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),xe(this._proxy,Xt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,i){return n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(Z(t),n,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=e({animate:i.animate},i.zoom),i.pan=e({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,n),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(mt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(mt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),o=this.getSize().divideBy(2),a=(t instanceof S?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/i),s=this.containerPointToLatLng(o.add(a));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():O(t);var n=z(e.paddingTopLeft||e.padding||[0,0]),i=z(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,n.add(i));if((o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};var a=i.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),o),r=this.project(t.getNorthEast(),o);return{center:this.unproject(s.add(r).divideBy(2).add(a),o),zoom:o}},fitBounds:function(t,e){if(!(t=O(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=z(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Fe,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){re(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!mt)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),o=this.project(t),a=this.getSize(),s=this._zoom;t=Z(t),e=void 0===e?s:e;var r=Math.max(a.x,a.y),l=r*this.getZoomScale(s,e),h=o.distanceTo(i)||1;function c(t){var e=(l*l-r*r+2.0164*(t?-1:1)*2.0164*h*h)/(2*(t?l:r)*2.0164*h),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function d(t){return(Math.exp(t)-Math.exp(-t))/2}function u(t){return(Math.exp(t)+Math.exp(-t))/2}var p=c(0);function f(t){return r*(u(p)*(d(e=p+1.42*t)/u(e))-d(p))/2.0164;var e}var m=Date.now(),g=(c(1)-p)/1.42,v=n.duration?1e3*n.duration:1e3*g*.8;return this._moveStart(!0,n.noMoveStart),function n(){var a=(Date.now()-m)/v,l=function(t){return 1-Math.pow(1-t,1.5)}(a)*g;a<=1?(this._flyToFrame=M(n,this),this._move(this.unproject(i.add(o.subtract(i).multiplyBy(f(l)/h)),s),this.getScaleZoom(r/function(t){return r*(u(p)/u(p+1.42*t))}(l),s),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=O(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,O(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=z((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=z(e.paddingBottomRight||e.padding||[0,0]),o=this.getCenter(),a=this.project(o),s=this.project(t),r=this.getPixelBounds(),l=r.getSize().divideBy(2),h=D([r.min.add(n),r.max.subtract(i)]);if(!h.contains(s)){this._enforcingBounds=!0;var c=a.subtract(s),d=z(s.x+c.x,s.y+c.y);(s.x<h.min.x||s.x>h.max.x)&&(d.x=a.x-c.x,c.x>0?d.x+=l.x-n.x:d.x-=l.x-i.x),(s.y<h.min.y||s.y>h.max.y)&&(d.y=a.y-c.y,c.y>0?d.y+=l.y-n.y:d.y-=l.y-i.y),this.panTo(this.unproject(d),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),a=n.divideBy(2).round(),s=o.divideBy(2).round(),r=a.subtract(s);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:o})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=i(this._handleGeolocationResponse,this),o=i(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,o,t):navigator.geolocation.getCurrentPosition(n,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new B(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),i=this._locateOptions;if(i.setView){var o=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(o,i.maxZoom):o)}var a={latlng:e,bounds:n,timestamp:t.timestamp};for(var s in t.coords)"number"==typeof t.coords[s]&&(a[s]=t.coords[s]);this.fire("locationfound",a)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ne(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(T(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ne(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=ee("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new j(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=O(t),n=z(n||[0,0]);var i=this.getZoom()||0,o=this.getMinZoom(),a=this.getMaxZoom(),s=t.getNorthWest(),r=t.getSouthEast(),l=this.getSize().subtract(n),h=D(this.project(r,i),this.project(s,i)).getSize(),c=mt?this.options.zoomSnap:1,d=l.x/h.x,u=l.y/h.y,p=e?Math.max(d,u):Math.min(d,u);return i=this.getScaleZoom(p,i),c&&(i=Math.round(i/(c/100))*(c/100),i=e?Math.ceil(i/c)*c:Math.floor(i/c)*c),Math.max(o,Math.min(a,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new S(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new P(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(Z(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(z(t),e)},layerPointToLatLng:function(t){var e=z(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(Z(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(Z(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(O(t))},distance:function(t,e){return this.options.crs.distance(Z(t),Z(e))},containerPointToLayerPoint:function(t){return z(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return z(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(z(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Z(t)))},mouseEventToContainerPoint:function(t){return je(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=$t(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");xe(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&mt,re(t,"leaflet-container"+(At?" leaflet-touch":"")+(xt?" leaflet-retina":"")+(X?" leaflet-oldie":"")+(lt?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=te(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),fe(this._mapPane,new S(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(re(t.markerPane,"leaflet-zoom-hide"),re(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){fe(this._mapPane,new S(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return T(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){fe(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?Te:xe;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),mt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){T(this._resizeRequest),this._resizeRequest=M((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],o="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,r=!1;s;){if((n=this._targets[a(s)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){r=!0;break}if(n&&n.listens(e,!0)){if(o&&!Je(s,t))break;if(i.push(n),o)break}if(s===this._container)break;s=s.parentNode}return i.length||r||o||!Je(s,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!Ue(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||_e(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,i){if("click"===t.type){var o=e({},t);o.type="preclick",this._fireDOMEvent(o,o.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,n))).length){var a=i[0];"contextmenu"===n&&a.listens(n,!0)&&Pe(t);var s={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var r=a.getLatLng&&(!a._radius||a._radius<=10);s.containerPoint=r?this.latLngToContainerPoint(a.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=r?a.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var l=0;l<i.length;l++)if(i[l].fire(n,s,!0),s.originalEvent._stopped||!1===i[l].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return me(this._mapPane)||new S(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return D([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),o=this.getSize().divideBy(2),a=new P(i.subtract(o),i.add(o)),s=this._getBoundsOffset(a,n,e);return s.round().equals([0,0])?t:this.unproject(i.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new P(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=D(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),o=i.min.subtract(t.min),a=i.max.subtract(t.max);return new S(this._rebound(o.x,-a.x),this._rebound(o.y,-a.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=mt?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){le(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=ee("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=Kt,n=this._proxy.style[e];pe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ne(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();pe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(o)||(M((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,n,o){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,re(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:o}),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&le(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),M((function(){this._moveEnd(!0)}),this))}}),Ve=C.extend({options:{position:"topright"},initialize:function(t){u(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return re(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ne(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ge=function(t){return new Ve(t)};Re.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=ee("div",e+"control-container",this._container);function i(i,o){var a=e+i+" "+e+o;t[i+o]=ee("div",a,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ne(this._controlCorners[t]);ne(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Qe=Ve.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in u(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ve.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){re(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(re(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):le(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return le(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ee("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),ze(e),Ne(e);var i=this._section=ee("section",t+"-list");n&&(this._map.on("click",this.collapse,this),et||xe(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=ee("a",t+"-toggle",e);o.href="#",o.title="Layers",At?(xe(o,"click",De),xe(o,"click",this.expand,this)):xe(o,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ee("div",t+"-base",i),this._separator=ee("div",t+"-separator",i),this._overlaysList=ee("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ie(this._baseLayersList),ie(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,o=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,o+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+a(this),i),this._layerControlInputs.push(e),e.layerId=a(t.layer),xe(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var s=document.createElement("div");return n.appendChild(s),s.appendChild(e),s.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],o=[];this._handlingClick=!0;for(var a=n.length-1;a>=0;a--)t=n[a],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||o.push(e);for(a=0;a<o.length;a++)this._map.hasLayer(o[a])&&this._map.removeLayer(o[a]);for(a=0;a<i.length;a++)this._map.hasLayer(i[a])||this._map.addLayer(i[a]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Ye=Ve.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ee("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,o){var a=ee("a",n,i);return a.innerHTML=t,a.href="#",a.title=e,a.setAttribute("role","button"),a.setAttribute("aria-label",e),ze(a),xe(a,"click",De),xe(a,"click",o,this),xe(a,"click",this._refocusOnMap,this),a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";le(this._zoomInButton,e),le(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&re(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&re(this._zoomInButton,e)}});Re.mergeOptions({zoomControl:!0}),Re.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new Ye,this.addControl(this.zoomControl))}));var Ke=Ve.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=ee("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ee("div",e,n)),t.imperial&&(this._iScale=ee("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,o=3.2808399*t;o>5280?(e=o/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(o),this._updateScale(this._iScale,i+" ft",i/o))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),qe=Ve.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){u(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ee("div","leaflet-control-attribution"),ze(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Re.mergeOptions({attributionControl:!0}),Re.addInitHook((function(){this.options.attributionControl&&(new qe).addTo(this)})),Ve.Layers=Qe,Ve.Zoom=Ye,Ve.Scale=Ke,Ve.Attribution=qe,Ge.layers=function(t,e,n){return new Qe(t,e,n)},Ge.zoom=function(t){return new Ye(t)},Ge.scale=function(t){return new Ke(t)},Ge.attribution=function(t){return new qe(t)};var Xe=C.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Xe.addTo=function(t,e){return t.addHandler(e,this),this};var $e,tn={Events:I},en=At?"touchstart mousedown":"mousedown",nn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},on={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},an=E.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){u(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(xe(this._dragStartTarget,en,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(an._dragging===this&&this.finishDrag(),Te(this._dragStartTarget,en,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!se(this._element,"leaflet-zoom-anim")&&!(an._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(an._dragging=this,this._preventOutline&&_e(this._element),ve(),Jt(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=Ae(this._element);this._startPoint=new S(e.clientX,e.clientY),this._parentScale=we(n),xe(document,on[t.type],this._onMove,this),xe(document,nn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new S(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Pe(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=me(this._element).subtract(n),re(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),re(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,T(this._animRequest),this._lastEvent=t,this._animRequest=M(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),fe(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in le(document.body,"leaflet-dragging"),this._lastTarget&&(le(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),on)Te(document,on[t],this._onMove,this),Te(document,nn[t],this._onUp,this);ye(),Ht(),this._moved&&this._moving&&(T(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,an._dragging=!1}});function sn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,function t(e,n,i,o,a){var s,r,l,h=0;for(r=o+1;r<=a-1;r++)(l=dn(e[r],e[o],e[a],!0))>h&&(s=r,h=l);h>i&&(n[s]=1,t(e,n,i,o,s),t(e,n,i,s,a))}(t,i,e,0,n-1);var o,a=[];for(o=0;o<n;o++)i[o]&&a.push(t[o]);return a}(t=function(t,e){for(var n=[t[0]],i=1,o=0,a=t.length;i<a;i++)s=t[i],r=t[o],l=void 0,h=void 0,l=r.x-s.x,h=r.y-s.y,l*l+h*h>e&&(n.push(t[i]),o=i);var s,r,l,h;return o<a-1&&n.push(t[a-1]),n}(t,n),n)}function rn(t,e,n){return Math.sqrt(dn(t,e,n,!0))}function ln(t,e,n,i,o){var a,s,r,l=i?$e:cn(t,n),h=cn(e,n);for($e=h;;){if(!(l|h))return[t,e];if(l&h)return!1;r=cn(s=hn(t,e,a=l||h,n,o),n),a===l?(t=s,l=r):(e=s,h=r)}}function hn(t,e,n,i,o){var a,s,r=e.x-t.x,l=e.y-t.y,h=i.min,c=i.max;return 8&n?(a=t.x+r*(c.y-t.y)/l,s=c.y):4&n?(a=t.x+r*(h.y-t.y)/l,s=h.y):2&n?(a=c.x,s=t.y+l*(c.x-t.x)/r):1&n&&(a=h.x,s=t.y+l*(h.x-t.x)/r),new S(a,s,o)}function cn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function dn(t,e,n,i){var o,a=e.x,s=e.y,r=n.x-a,l=n.y-s,h=r*r+l*l;return h>0&&((o=((t.x-a)*r+(t.y-s)*l)/h)>1?(a=n.x,s=n.y):o>0&&(a+=r*o,s+=l*o)),r=t.x-a,l=t.y-s,i?r*r+l*l:new S(a,s)}function un(t){return!g(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function pn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),un(t)}var fn={simplify:sn,pointToSegmentDistance:rn,closestPointOnSegment:function(t,e,n){return dn(t,e,n)},clipSegment:ln,_getEdgeIntersection:hn,_getBitCode:cn,_sqClosestPointOnSegment:dn,isFlat:un,_flat:pn};function mn(t,e,n){var i,o,a,s,r,l,h,c,d,u=[1,4,2,8];for(o=0,h=t.length;o<h;o++)t[o]._code=cn(t[o],e);for(s=0;s<4;s++){for(c=u[s],i=[],o=0,a=(h=t.length)-1;o<h;a=o++)r=t[o],l=t[a],r._code&c?l._code&c||((d=hn(l,r,c,e,n))._code=cn(d,e),i.push(d)):(l._code&c&&((d=hn(l,r,c,e,n))._code=cn(d,e),i.push(d)),i.push(r));t=i}return t}var gn={clipPolygon:mn},vn={project:function(t){return new S(t.lng,t.lat)},unproject:function(t){return new B(t.y,t.x)},bounds:new P([-180,-90],[180,90])},yn={R:6378137,R_MINOR:6356752.314245179,bounds:new P([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,o=this.R_MINOR/n,a=Math.sqrt(1-o*o),s=a*Math.sin(i),r=Math.tan(Math.PI/4-i/2)/Math.pow((1-s)/(1+s),a/2);return i=-n*Math.log(Math.max(r,1e-10)),new S(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,o=this.R_MINOR/i,a=Math.sqrt(1-o*o),s=Math.exp(-t.y/i),r=Math.PI/2-2*Math.atan(s),l=0,h=.1;l<15&&Math.abs(h)>1e-7;l++)e=a*Math.sin(r),e=Math.pow((1-e)/(1+e),a/2),r+=h=Math.PI/2-2*Math.atan(s*e)-r;return new B(r*n,t.x*n/i)}},_n={LonLat:vn,Mercator:yn,SphericalMercator:H},bn=e({},J,{code:"EPSG:3395",projection:yn,transformation:function(){var t=.5/(Math.PI*yn.R);return R(t,.5,-t,.5)}()}),An=e({},J,{code:"EPSG:4326",projection:vn,transformation:R(1/180,1,-1/180,.5)}),wn=e({},U,{projection:vn,transformation:R(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});U.Earth=J,U.EPSG3395=bn,U.EPSG3857=V,U.EPSG900913=G,U.EPSG4326=An,U.Simple=wn;var Ln=E.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Re.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&a(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?g(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var o=this._zoomBoundLayers[i].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var xn=Ln.extend({initialize:function(t,e){var n,i;if(u(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),Mn=xn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),xn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),xn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new j;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Tn=C.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){u(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var o=z(i),a=z("shadow"===e&&n.shadowAnchor||n.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),a&&(t.style.marginLeft=-a.x+"px",t.style.marginTop=-a.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return xt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),kn=Tn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return kn.imagePath||(kn.imagePath=this._detectIconPath()),(this.options.imagePath||kn.imagePath)+Tn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ee("div","leaflet-default-icon-path",document.body),e=te(t,"background-image")||te(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Cn=Xe.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new an(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),re(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&le(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,a=me(e._icon),s=n.getPixelBounds(),r=n.getPixelOrigin(),l=D(s.min._subtract(r).add(o),s.max._subtract(r).subtract(o));if(!l.contains(a)){var h=z((Math.max(l.max.x,a.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,a.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,a.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,a.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(i);n.panBy(h,{animate:!1}),this._draggable._newPos._add(h),this._draggable._startPos._add(h),fe(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=M(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(T(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=me(e._icon),o=e._map.layerPointToLatLng(i);n&&fe(n,i),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){T(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),In=Ln.extend({options:{icon:new kn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){u(this,e),this._latlng=Z(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=Z(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),re(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),a=!1;o!==this._shadow&&(this._removeShadow(),a=!0),o&&(re(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&a&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ne(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ne(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&fe(this._icon,t),this._shadow&&fe(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(re(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Cn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Cn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&de(this._icon,t),this._shadow&&de(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),En=Ln.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return u(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Sn=En.extend({options:{fill:!0,radius:10},initialize:function(t,e){u(this,e),this._latlng=Z(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=Z(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return En.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new P(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Nn=Sn.extend({initialize:function(t,n,i){if("number"==typeof n&&(n=e({},i,{radius:n})),u(this,n),this._latlng=Z(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new j(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:En.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===J.distance){var o=Math.PI/180,a=this._mRadius/J.R/o,s=n.project([e+a,t]),r=n.project([e-a,t]),l=s.add(r).divideBy(2),h=n.unproject(l).lat,c=Math.acos((Math.cos(a*o)-Math.sin(e*o)*Math.sin(h*o))/(Math.cos(e*o)*Math.cos(h*o)))/o;(isNaN(c)||0===c)&&(c=a/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-n.project([h,t-c]).x,this._radiusY=l.y-s.y}else{var d=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(d).x}this._updateBounds()}}),zn=En.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){u(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,o=null,a=dn,s=0,r=this._parts.length;s<r;s++)for(var l=this._parts[s],h=1,c=l.length;h<c;h++){var d=a(t,e=l[h-1],n=l[h],!0);d<i&&(i=d,o=a(t,e,n))}return o&&(o.distance=Math.sqrt(i)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,a,s,r=this._rings[0],l=r.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=r[t].distanceTo(r[t+1])/2;if(0===e)return this._map.layerPointToLatLng(r[0]);for(t=0,i=0;t<l-1;t++)if(o=r[t],a=r[t+1],(i+=n=o.distanceTo(a))>e)return s=(i-e)/n,this._map.layerPointToLatLng([a.x-s*(a.x-o.x),a.y-s*(a.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=Z(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new j,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return un(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=un(t),i=0,o=t.length;i<o;i++)n?(e[i]=Z(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new P;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new S(t,t);this._pxBounds=new P([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var i,o,a=t[0]instanceof B,s=t.length;if(a){for(o=[],i=0;i<s;i++)o[i]=this._map.latLngToLayerPoint(t[i]),n.extend(o[i]);e.push(o)}else for(i=0;i<s;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,o,a,s,r,l=this._parts;for(e=0,i=0,o=this._rings.length;e<o;e++)for(n=0,a=(r=this._rings[e]).length;n<a-1;n++)(s=ln(r[n],r[n+1],t,n,!0))&&(l[i]=l[i]||[],l[i].push(s[0]),s[1]===r[n+1]&&n!==a-2||(l[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=sn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,o,a,s,r,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,a=this._parts.length;n<a;n++)for(i=0,o=(s=(r=this._parts[n]).length)-1;i<s;o=i++)if((e||0!==i)&&rn(t,r[o],r[i])<=l)return!0;return!1}});zn._flat=pn;var Pn=zn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,o,a,s,r,l,h=this._rings[0],c=h.length;if(!c)return null;for(a=s=r=0,t=0,e=c-1;t<c;e=t++)n=h[t],i=h[e],o=n.y*i.x-i.y*n.x,s+=(n.x+i.x)*o,r+=(n.y+i.y)*o,a+=3*o;return l=0===a?h[0]:[s/a,r/a],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=zn.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof B&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){zn.prototype._setLatLngs.call(this,t),un(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return un(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new S(e,e);if(t=new P(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,o=0,a=this._rings.length;o<a;o++)(i=mn(this._rings[o],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,o,a,s,r,l,h=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,r=this._parts.length;o<r;o++)for(a=0,s=(l=(e=this._parts[o]).length)-1;a<l;s=a++)n=e[a],i=e[s],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(h=!h);return h||zn.prototype._containsPoint.call(this,t,!0)}}),Dn=Mn.extend({initialize:function(t,e){u(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,o=g(t)?t:t.features;if(o){for(e=0,n=o.length;e<n;e++)((i=o[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var a=this.options;if(a.filter&&!a.filter(t))return this;var s=jn(t,a);return s?(s.feature=Hn(t),s.defaultOptions=s.options,this.resetStyle(s),a.onEachFeature&&a.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function jn(t,e){var n,i,o,a,s="Feature"===t.type?t.geometry:t,r=s?s.coordinates:null,l=[],h=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Bn;if(!r&&!s)return null;switch(s.type){case"Point":return On(h,t,n=c(r),e);case"MultiPoint":for(o=0,a=r.length;o<a;o++)n=c(r[o]),l.push(On(h,t,n,e));return new Mn(l);case"LineString":case"MultiLineString":return i=Zn(r,"LineString"===s.type?0:1,c),new zn(i,e);case"Polygon":case"MultiPolygon":return i=Zn(r,"Polygon"===s.type?1:2,c),new Pn(i,e);case"GeometryCollection":for(o=0,a=s.geometries.length;o<a;o++){var d=jn({geometry:s.geometries[o],type:"Feature",properties:t.properties},e);d&&l.push(d)}return new Mn(l);default:throw new Error("Invalid GeoJSON object.")}}function On(t,e,n,i){return t?t(e,n):new In(n,i&&i.markersInheritOptions&&i)}function Bn(t){return new B(t[1],t[0],t[2])}function Zn(t,e,n){for(var i,o=[],a=0,s=t.length;a<s;a++)i=e?Zn(t[a],e-1,n):(n||Bn)(t[a]),o.push(i);return o}function Wn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[h(t.lng,e),h(t.lat,e),h(t.alt,e)]:[h(t.lng,e),h(t.lat,e)]}function Un(t,e,n,i){for(var o=[],a=0,s=t.length;a<s;a++)o.push(e?Un(t[a],e-1,n,i):Wn(t[a],i));return!e&&n&&o.push(o[0]),o}function Jn(t,n){return t.feature?e({},t.feature,{geometry:n}):Hn(n)}function Hn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Fn={toGeoJSON:function(t){return Jn(this,{type:"Point",coordinates:Wn(this.getLatLng(),t)})}};function Rn(t,e){return new Dn(t,e)}In.include(Fn),Nn.include(Fn),Sn.include(Fn),zn.include({toGeoJSON:function(t){var e=!un(this._latlngs);return Jn(this,{type:(e?"Multi":"")+"LineString",coordinates:Un(this._latlngs,e?1:0,!1,t)})}}),Pn.include({toGeoJSON:function(t){var e=!un(this._latlngs),n=e&&!un(this._latlngs[0]),i=Un(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),Jn(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),xn.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),Jn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer((function(e){if(e.toGeoJSON){var o=e.toGeoJSON(t);if(n)i.push(o.geometry);else{var a=Hn(o);"FeatureCollection"===a.type?i.push.apply(i,a.features):i.push(a)}}})),n?Jn(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Vn=Rn,Gn=Ln.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=O(e),u(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(re(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ne(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&oe(this._image),this},bringToBack:function(){return this._map&&ae(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=O(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ee("img");re(e,"leaflet-image-layer"),this._zoomAnimated&&re(e,"leaflet-zoom-animated"),this.options.className&&re(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;pe(this._image,n,e)},_reset:function(){var t=this._image,e=new P(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();fe(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){de(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Qn=Gn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ee("video");if(re(e,"leaflet-image-layer"),this._zoomAnimated&&re(e,"leaflet-zoom-animated"),this.options.className&&re(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),o=[],a=0;a<n.length;a++)o.push(n[a].src);this._url=n.length>0?o:[e.src]}else{g(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var s=0;s<this._url.length;s++){var r=ee("source");r.src=this._url[s],e.appendChild(r)}}}}),Yn=Gn.extend({_initImage:function(){var t=this._image=this._url;re(t,"leaflet-image-layer"),this._zoomAnimated&&re(t,"leaflet-zoom-animated"),this.options.className&&re(t,this.options.className),t.onselectstart=l,t.onmousemove=l}}),Kn=Ln.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){u(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&de(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&de(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(de(this._container,0),this._removeTimeout=setTimeout(i(ne,void 0,this._container),200)):ne(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=Z(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&oe(this._container),this},bringToBack:function(){return this._map&&ae(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof Ln||(n=e,e=t),e instanceof Mn)for(var i in t._layers){e=t._layers[i];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=z(this.options.offset),n=this._getAnchor();this._zoomAnimated?fe(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),qn=Kn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Kn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof En||this._source.on("preclick",Se))},onRemove:function(t){Kn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof En||this._source.off("preclick",Se))},getEvents:function(){var t=Kn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ee("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ee("div",t+"-content-wrapper",e);if(this._contentNode=ee("div",t+"-content",n),ze(e),Ne(this._contentNode),xe(e,"contextmenu",Se),this._tipContainer=ee("div",t+"-tip-container",e),this._tip=ee("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=ee("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",xe(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,o=this.options.maxHeight;o&&i>o?(e.height=o+"px",re(t,"leaflet-popup-scrolled")):le(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();fe(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(te(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,o=new S(this._containerLeft,-n-this._containerBottom);o._add(me(this._container));var a=t.layerPointToContainerPoint(o),s=z(this.options.autoPanPadding),r=z(this.options.autoPanPaddingTopLeft||s),l=z(this.options.autoPanPaddingBottomRight||s),h=t.getSize(),c=0,d=0;a.x+i+l.x>h.x&&(c=a.x+i-h.x+l.x),a.x-c-r.x<0&&(c=a.x-r.x),a.y+n+l.y>h.y&&(d=a.y+n-h.y+l.y),a.y-d-r.y<0&&(d=a.y-r.y),(c||d)&&t.fire("autopanstart").panBy([c,d])}},_onCloseButtonClick:function(t){this._close(),De(t)},_getAnchor:function(){return z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Re.mergeOptions({closePopupOnClick:!0}),Re.include({openPopup:function(t,e,n){return t instanceof qn||(t=new qn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Ln.include({bindPopup:function(t,e){return t instanceof qn?(u(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new qn(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(De(t),e instanceof En?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Xn=Kn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Kn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Kn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Kn.prototype.getEvents.call(this);return At&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ee("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,i=this._map,o=this._container,a=i.latLngToContainerPoint(i.getCenter()),s=i.layerPointToContainerPoint(t),r=this.options.direction,l=o.offsetWidth,h=o.offsetHeight,c=z(this.options.offset),d=this._getAnchor();"top"===r?(e=l/2,n=h):"bottom"===r?(e=l/2,n=0):"center"===r?(e=l/2,n=h/2):"right"===r?(e=0,n=h/2):"left"===r?(e=l,n=h/2):s.x<a.x?(r="right",e=0,n=h/2):(r="left",e=l+2*(c.x+d.x),n=h/2),t=t.subtract(z(e,n,!0)).add(c).add(d),le(o,"leaflet-tooltip-right"),le(o,"leaflet-tooltip-left"),le(o,"leaflet-tooltip-top"),le(o,"leaflet-tooltip-bottom"),re(o,"leaflet-tooltip-"+r),fe(o,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&de(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Re.include({openTooltip:function(t,e,n){return t instanceof Xn||(t=new Xn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Ln.include({bindTooltip:function(t,e){return t instanceof Xn?(u(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Xn(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),At&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(re(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(le(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var $n=Tn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ie(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=z(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Tn.Default=kn;var ti=Ln.extend({options:{tileSize:256,opacity:1,updateWhenIdle:gt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){u(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ne(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(oe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ae(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof S?t:new S(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),o=0,a=n.length;o<a;o++)e=n[o].style.zIndex,n[o]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!X){de(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var o=this._tiles[i];if(o.current&&o.loaded){var a=Math.min(1,(t-o.loaded)/200);de(o.el,a),a<1?e=!0:(o.active?n=!0:this._onOpaqueTile(o),o.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(T(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=ee("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ne(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],o=this._map;return i||((i=this._levels[t]={}).el=ee("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,o.getCenter(),o.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ne(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var o=Math.floor(t/2),a=Math.floor(e/2),s=n-1,r=new S(+o,+a);r.z=+s;var l=this._tileCoordsToKey(r),h=this._tiles[l];return h&&h.active?(h.retain=!0,!0):(h&&h.loaded&&(h.retain=!0),s>i&&this._retainParent(o,a,s,i))},_retainChildren:function(t,e,n,i){for(var o=2*t;o<2*t+2;o++)for(var a=2*e;a<2*e+2;a++){var s=new S(o,a);s.z=n+1;var r=this._tileCoordsToKey(s),l=this._tiles[r];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(o,a,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var o=Math.round(e);o=void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom?void 0:this._clampZoom(o);var a=this.options.updateWhenZooming&&o!==this._tileZoom;i&&!a||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),o=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();mt?pe(t.el,o,i):fe(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),o=e.project(t,this._tileZoom).floor(),a=e.getSize().divideBy(2*i);return new P(o.subtract(a),o.add(a))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(i),a=o.getCenter(),s=[],r=this.options.keepBuffer,l=new P(o.getBottomLeft().subtract([r,-r]),o.getTopRight().add([r,-r]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var h in this._tiles){var c=this._tiles[h].coords;c.z===this._tileZoom&&l.contains(new S(c.x,c.y))||(this._tiles[h].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var d=o.min.y;d<=o.max.y;d++)for(var u=o.min.x;u<=o.max.x;u++){var p=new S(u,d);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:s.push(p)}}if(s.sort((function(t,e){return t.distanceTo(a)-e.distanceTo(a)})),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(u=0;u<s.length;u++)this._addTile(s[u],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return O(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),o=i.add(n);return[e.unproject(i,t.z),e.unproject(o,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new j(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new S(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ne(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){re(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,X&&this.options.opacity<1&&de(t,this.options.opacity),et&&!nt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),o=this._tileCoordsToKey(t),a=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t));this._initTile(a),this.createTile.length<2&&M(i(this._tileReady,this,t,null,a)),fe(a,n),this._tiles[o]={el:a,coords:t,current:!0},e.appendChild(a),this.fire("tileloadstart",{tile:a,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var o=this._tileCoordsToKey(t);(n=this._tiles[o])&&(n.loaded=+new Date,this._map._fadeAnimated?(de(n.el,0),T(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(re(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),X||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new S(this._wrapX?r(t.x,this._wrapX):t.x,this._wrapY?r(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new P(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),ei=ti.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=u(this,e)).detectRetina&&xt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),et||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return xe(n,"load",i(this._tileOnLoad,this,e,n)),xe(n,"error",i(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var n={r:xt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=i),n["-y"]=i}return m(this._url,e(n,this.options))},_tileOnLoad:function(t,e){X?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,e.complete||(e.src=y,ne(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return ot||e.el.setAttribute("src",y),ti.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==y))return ti.prototype._tileReady.call(this,t,e,n)}});function ni(t,e){return new ei(t,e)}var ii=ei.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var i=e({},this.defaultWmsParams);for(var o in n)o in this.options||(i[o]=n[o]);var a=(n=u(this,n)).detectRetina&&xt?2:1,s=this.getTileSize();i.width=s.x*a,i.height=s.y*a,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,ei.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=D(n.project(e[0]),n.project(e[1])),o=i.min,a=i.max,s=(this._wmsVersion>=1.3&&this._crs===An?[o.y,o.x,a.y,a.x]:[o.x,o.y,a.x,a.y]).join(","),r=ei.prototype.getTileUrl.call(this,t);return r+p(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});ei.WMS=ii,ni.wms=function(t,e){return new ii(t,e)};var oi=Ln.extend({options:{padding:.1,tolerance:0},initialize:function(t){u(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&re(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=me(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),a=this._map.project(this._center,e),s=this._map.project(t,e).subtract(a),r=o.multiplyBy(-n).add(i).add(o).subtract(s);mt?pe(this._container,r,n):fe(this._container,r)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new P(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ai=oi.extend({getEvents:function(){var t=oi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){oi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");xe(t,"mousemove",this._onMouseMove,this),xe(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),xe(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){T(this._redrawRequest),delete this._ctx,ne(this._container),Te(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){oi.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=xt?2:1;fe(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",xt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){oi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,i=t.options.dashArray.split(/[, ]+/),o=[];for(n=0;n<i.length;n++){if(e=Number(i[n]),isNaN(e))return;o.push(e)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new P,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,o,a,s=t._parts,r=s.length,l=this._ctx;if(r){for(l.beginPath(),n=0;n<r;n++){for(i=0,o=s[n].length;i<o;i++)a=s[n][i],l[i?"lineTo":"moveTo"](a.x,a.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||i)/i;1!==o&&(n.save(),n.scale(1,o)),n.beginPath(),n.arc(e.x,e.y/o,i,0,2*Math.PI,!1),1!==o&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(i)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(n=e);n&&(We(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(le(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,o,a=this._drawFirst;a;a=a.next)(n=a.layer).options.interactive&&n._containsPoint(e)&&(o=n);o!==this._hoveredLayer&&(this._handleMouseOut(t),o&&(re(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredLayer=o)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(i((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function si(t){return Tt?new ai(t):null}var ri=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),li={_initContainer:function(){this._container=ee("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(oi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=ri("shape");re(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=ri("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ne(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,o=t._container;o.stroked=!!i.stroke,o.filled=!!i.fill,i.stroke?(e||(e=t._stroke=ri("stroke")),o.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=g(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(o.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=ri("fill")),o.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(o.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){oe(t._container)},_bringToBack:function(t){ae(t._container)}},hi=Ct?ri:Q,ci=oi.extend({getEvents:function(){var t=oi.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=hi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=hi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ne(this._container),Te(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){oi.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),fe(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=hi("path");t.options.className&&re(e,t.options.className),t.options.interactive&&re(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ne(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Y(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){oe(t._path)},_bringToBack:function(t){ae(t._path)}});function di(t){return kt||Ct?new ci(t):null}Ct&&ci.include(li),Re.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&si(t)||di(t)}});var ui=Pn.extend({initialize:function(t,e){Pn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=O(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});ci.create=hi,ci.pointsToPath=Y,Dn.geometryToLayer=jn,Dn.coordsToLatLng=Bn,Dn.coordsToLatLngs=Zn,Dn.latLngToCoords=Wn,Dn.latLngsToCoords=Un,Dn.getFeature=Jn,Dn.asFeature=Hn,Re.mergeOptions({boxZoom:!0});var pi=Xe.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){xe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Te(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ne(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Jt(),ve(),this._startPoint=this._map.mouseEventToContainerPoint(t),xe(document,{contextmenu:De,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ee("div","leaflet-zoom-box",this._container),re(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new P(this._point,this._startPoint),n=e.getSize();fe(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ne(this._box),le(this._container,"leaflet-crosshair")),Ht(),ye(),Te(document,{contextmenu:De,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var e=new j(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Re.addInitHook("addHandler","boxZoom",pi),Re.mergeOptions({doubleClickZoom:!0});var fi=Xe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,o=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}});Re.addInitHook("addHandler","doubleClickZoom",fi),Re.mergeOptions({dragging:!0,inertia:!nt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var mi=Xe.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new an(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}re(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){le(this._map._container,"leaflet-grab"),le(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=O(this._map.options.maxBounds);this._offsetLimit=D(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,o=(i-e+n)%t+e-n,a=(i+e+n)%t-e-n,s=Math.abs(o+n)<Math.abs(a+n)?o:a;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),a=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,r=o.multiplyBy(s/a),l=r.distanceTo([0,0]),h=Math.min(n.inertiaMaxSpeed,l),c=r.multiplyBy(h/l),d=h/(n.inertiaDeceleration*s),u=c.multiplyBy(-d/2).round();u.x||u.y?(u=e._limitOffset(u,e.options.maxBounds),M((function(){e.panBy(u,{duration:d,easeLinearity:s,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});Re.addInitHook("addHandler","dragging",mi),Re.mergeOptions({keyboard:!0,keyboardPanDelta:80});var gi=Xe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),xe(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Te(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},o=this.keyCodes;for(e=0,n=o.left.length;e<n;e++)i[o.left[e]]=[-1*t,0];for(e=0,n=o.right.length;e<n;e++)i[o.right[e]]=[t,0];for(e=0,n=o.down.length;e<n;e++)i[o.down[e]]=[0,t];for(e=0,n=o.up.length;e<n;e++)i[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},o=this.keyCodes;for(e=0,n=o.zoomIn.length;e<n;e++)i[o.zoomIn[e]]=t;for(e=0,n=o.zoomOut.length;e<n;e++)i[o.zoomOut[e]]=-t},_addHooks:function(){xe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Te(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys)i._panAnim&&i._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=z(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}De(t)}}});Re.addInitHook("addHandler","keyboard",gi),Re.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var vi=Xe.extend({addHooks:function(){xe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Te(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Be(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),o),De(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,a=n?Math.ceil(o/n)*n:o,s=t._limitZoom(e+(this._delta>0?a:-a))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});Re.addInitHook("addHandler","scrollWheelZoom",vi),Re.mergeOptions({tap:!0,tapTolerance:15});var yi=Xe.extend({addHooks:function(){xe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Te(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Pe(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new S(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&re(n,"leaflet-active"),this._holdTimeout=setTimeout(i((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),xe(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Te(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&le(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new S(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});!At||bt&&!lt||Re.addInitHook("addHandler","tap",yi),Re.mergeOptions({touchZoom:At&&!nt,bounceAtZoomLimits:!0});var _i=Xe.extend({addHooks:function(){re(this._map._container,"leaflet-touch-zoom"),xe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){le(this._map._container,"leaflet-touch-zoom"),Te(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),xe(document,"touchmove",this._onTouchMove,this),xe(document,"touchend",this._onTouchEnd,this),Pe(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]),a=n.distanceTo(o)/this._startDist;if(this._zoom=e.getScaleZoom(a,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&a<1||this._zoom>e.getMaxZoom()&&a>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===a)return}else{var s=n._add(o)._divideBy(2)._subtract(this._centerPoint);if(1===a&&0===s.x&&0===s.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),T(this._animRequest);var r=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=M(r,this,!0),Pe(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,T(this._animRequest),Te(document,"touchmove",this._onTouchMove,this),Te(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Re.addInitHook("addHandler","touchZoom",_i),Re.BoxZoom=pi,Re.DoubleClickZoom=fi,Re.Drag=mi,Re.Keyboard=gi,Re.ScrollWheelZoom=vi,Re.Tap=yi,Re.TouchZoom=_i,t.version="1.7.1",t.Control=Ve,t.control=Ge,t.Browser=Et,t.Evented=E,t.Mixin=tn,t.Util=k,t.Class=C,t.Handler=Xe,t.extend=e,t.bind=i,t.stamp=a,t.setOptions=u,t.DomEvent=He,t.DomUtil=Le,t.PosAnimation=Fe,t.Draggable=an,t.LineUtil=fn,t.PolyUtil=gn,t.Point=S,t.point=z,t.Bounds=P,t.bounds=D,t.Transformation=F,t.transformation=R,t.Projection=_n,t.LatLng=B,t.latLng=Z,t.LatLngBounds=j,t.latLngBounds=O,t.CRS=U,t.GeoJSON=Dn,t.geoJSON=Rn,t.geoJson=Vn,t.Layer=Ln,t.LayerGroup=xn,t.layerGroup=function(t,e){return new xn(t,e)},t.FeatureGroup=Mn,t.featureGroup=function(t,e){return new Mn(t,e)},t.ImageOverlay=Gn,t.imageOverlay=function(t,e,n){return new Gn(t,e,n)},t.VideoOverlay=Qn,t.videoOverlay=function(t,e,n){return new Qn(t,e,n)},t.SVGOverlay=Yn,t.svgOverlay=function(t,e,n){return new Yn(t,e,n)},t.DivOverlay=Kn,t.Popup=qn,t.popup=function(t,e){return new qn(t,e)},t.Tooltip=Xn,t.tooltip=function(t,e){return new Xn(t,e)},t.Icon=Tn,t.icon=function(t){return new Tn(t)},t.DivIcon=$n,t.divIcon=function(t){return new $n(t)},t.Marker=In,t.marker=function(t,e){return new In(t,e)},t.TileLayer=ei,t.tileLayer=ni,t.GridLayer=ti,t.gridLayer=function(t){return new ti(t)},t.SVG=ci,t.svg=di,t.Renderer=oi,t.Canvas=ai,t.canvas=si,t.Path=En,t.CircleMarker=Sn,t.circleMarker=function(t,e){return new Sn(t,e)},t.Circle=Nn,t.circle=function(t,e,n){return new Nn(t,e,n)},t.Polyline=zn,t.polyline=function(t,e){return new zn(t,e)},t.Polygon=Pn,t.polygon=function(t,e){return new Pn(t,e)},t.Rectangle=ui,t.rectangle=function(t,e){return new ui(t,e)},t.Map=Re,t.map=function(t,e){return new Re(t,e)};var bi=window.L;t.noConflict=function(){return window.L=bi,this},window.L=t}(e)},function(t,e,n){"use strict";var i,o=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},a=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),s=[];function r(t){for(var e=-1,n=0;n<s.length;n++)if(s[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},i=[],o=0;o<t.length;o++){var a=t[o],l=e.base?a[0]+e.base:a[0],h=n[l]||0,c="".concat(l," ").concat(h);n[l]=h+1;var d=r(c),u={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(s[d].references++,s[d].updater(u)):s.push({identifier:c,updater:g(u,e),references:1}),i.push(c)}return i}function h(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(t){e.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(e);else{var s=a(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var c,d=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function u(t,e,n,i){var o=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=d(e,o);else{var a=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(a,s[e]):t.appendChild(a)}}function p(t,e,n){var i=n.css,o=n.media,a=n.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var f=null,m=0;function g(t,e){var n,i,o;if(e.singleton){var a=m++;n=f||(f=h(e)),i=u.bind(null,n,a,!1),o=u.bind(null,n,a,!0)}else n=h(e),i=p.bind(null,n,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var n=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<n.length;i++){var o=r(n[i]);s[o].references--}for(var a=l(t,e),h=0;h<n.length;h++){var c=r(n[h]);0===s[c].references&&(s[c].updater(),s.splice(c,1))}n=a}}}},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var o=(s=i,r=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(l," */")),a=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[n].concat(a).concat([o]).join("\n")}var s,r,l;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(i)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(o[s]=!0)}for(var r=0;r<t.length;r++){var l=[].concat(t[r]);i&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},function(t,e){t.exports='<td class="em-kv-key"><input type="text"></td>\n<td class="em-kv-value"><textarea></textarea></td>\n<td class="em-delete-kv">\n    <div class="em-trashcan"></div>\n</td>\n'},function(t,e){t.exports='<div class="atlas4-tt-container" >\n    <h4 class="atlas4-tt-topology" >$topology</h4>\n    <h6 class="atlas4-tt-label" >$label</h6>\n</div>\n'},function(t,e){t.exports='<div class="atlas4-tt-container" >\n    <h4 class="atlas4-tt-topology">$topology</h4>\n    <h6 class="atlas4-tt-label" >$label</h6>\n</div>\n'},function(t,e){t.exports='<div>\n    <p id="atlas4-loader-message" style="color: azure; text-align: center;">Loading Map</p>\n    <svg version="1.1" id="L4" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    viewBox="0 0 100 30" enable-background="new 0 0 0 0" xml:space="preserve">\n    <circle fill="#fff" stroke="none" cx="30" cy="15" r="6">\n        <animate\n        attributeName="opacity"\n        dur="1s"\n        values="0;1;0"\n        repeatCount="indefinite"\n        begin="0.1"/>    \n    </circle>\n    <circle fill="#fff" stroke="none" cx="50" cy="15" r="6">\n        <animate\n        attributeName="opacity"\n        dur="1s"\n        values="0;1;0"\n        repeatCount="indefinite" \n        begin="0.2"/>       \n    </circle>\n    <circle fill="#fff" stroke="none" cx="70" cy="15" r="6">\n        <animate\n        attributeName="opacity"\n        dur="1s"\n        values="0;1;0"\n        repeatCount="indefinite" \n        begin="0.3"/>     \n    </circle>\n    </svg>\n</div>'},function(t,e){t.exports='<div class="atlas-editor-sidebar">\n    <div class="editor-sidebar-general-info">\n        <p>Topology</p>\n        <h1 class="editor-gi-topology">-</h1>\n        <p>Tool</p>\n        <h2 class="editor-gi-tool">-</h2>\n    </div>\n\n    <div class="sidebar-tool-info" style="display: none;">\n        <p class="sidebar-window-description">Tool Information</p>\n        <p class="sidebar-tool-info-description">\n        </p>\n    </div>\n\n    <div class="sidebar-node-properties" id="sidebar-npw-window" style="display: none;">\n\n        <p class="sidebar-window-description">Set Node Properties</p>\n\n        <label class="sidebar-form-label">Name</label>\n        <input type="text" id="npw-name">\n        \x3c!-- <label class="sidebar-form-label" id="npw-id-label">id</label>\n        <input type="text" id="npw-id"> --\x3e\n        <label class="sidebar-form-label">label</label>\n        <input type="text" id="npw-label">\n        <label class="sidebar-form-label">Size<span class="sidebar-size-label-desc"\n                id="npw-size-label">-px</span></label>\n        <input type="range" id="npw-size" min="1" max="50">\n        <label class="sidebar-form-label">Color</label>\n\n        <div class="sidebar-color-container">\n            <div class="sidebar-npw-color-wrapper" id="npw-color-wrap"></div>\n            <input type="color" id="npw-color" value="#6785d4">\n        </div>\n        \n        <div class="npw-btns-container">\n            <button class="sidebar-window-button" style="margin-top: 15px; width: 100%;" id="npw-save">Save</button>\n            <button class="sidebar-window-button" style="margin-top: 15px; width: 100%;" id="npw-cancel">Cancel</button>\n            <button class="sidebar-window-button" style="margin-top: 15px; width: 100%;" id="npw-delete">Delete</button>\n            <button class="sidebar-window-button" style="margin-top: 10px; width: 100%;" id="npw-more" activeOpen="false">More</button>\n        </div>\n        \n        <div class="sidebar-properties-json" id="sidebar-npw-properties-json" style="display: none;">\n            <label class="sidebar-form-label">JSON <span style="display: none;" id="npw-json-status">Invalid JSON</span>\n            </label>\n            <textarea spellcheck="false" id="sidebar-npw-json-textarea"\n                class="sidebar-window-textarea sidebar-properties-json-textarea"></textarea>\n        </div>\n    </div>\n\n    <div class="sidebar-json-window" id="sidebar-json-window" style="display: none;">\n        <p class="sidebar-window-description" id="sidebar-json-window-desc">GET Map JSON</p>\n        <textarea spellcheck="false" class="sidebar-window-textarea" id="sidebar-json-textarea"></textarea>\n        <button class="sidebar-window-button" id="sidebar-json-button">Copy</button>\n    </div>\n\n    <div class="sidebar-line-edit-window" id="sidebar-line-edit-window" style="display: none;">\n        <p class="sidebar-window-description">Set Line Curve Properties</p>\n\n        <div id="sidebar-edit-anchor-cont">\n            <label class="sidebar-form-label">Add/Delete Anchor</label>\n            <p id="sidebar-edit-anchor-opt-cont" class="sidebar-line-edit-opt-cont frTwo">\n                <span class="edit-anchor-type">+</span>\n                <span class="edit-anchor-type">-</span>\n            </p>\n        </div>\n\n        <div id="sidebar-curve-type-container">\n            <label class="sidebar-form-label">Curve Type</label>\n            <p id="sidebar-curve-opt-cont" class="sidebar-line-edit-opt-cont frThree">\n                <span selectedCurve="false" class="sidebar-curve-opt-type">L</span>\n                <span selectedCurve="false" class="sidebar-curve-opt-type">C</span>\n                <span selectedCurve="false" class="sidebar-curve-opt-type">Q</span>\n            </p>\n        </div>\n\n    </div>\n\n    <div class="sidebar-line-properties" id="sidebar-lpw-window" style="display: none;">\n        \x3c!-- A, B, Label, Color, Weight --\x3e\n        <p class="sidebar-window-description">Set Line Properties</p>\n        <label class="sidebar-form-label">Endpoint A</label>\n        <input type="text" id="lpw-epa" readonly>\n        <label class="sidebar-form-label">Endpoint B</label>\n        <input type="text" id="lpw-epb" readonly>\n        <label class="sidebar-form-label">Label</label>\n        <input type="text" id="lpw-label">\n        <label class="sidebar-form-label">Weight<span class="sidebar-size-label-desc"\n                id="lpw-weight-label">3</span></label>\n        <input type="range" id="lpw-weight" min="1" max="50" value="3">\n        <label class="sidebar-form-label">Color</label>\n        <div class="sidebar-color-container">\n            <div class="sidebar-npw-color-wrapper" id="lpw-color-wrap"></div>\n            <input type="color" id="lpw-color" value="#6785d4">\n        </div>\n        <button class="sidebar-window-button" style="margin-top: 12px; outline: none; width: 100%;" id="lpw-delete">Delete Line</button>\n        <div id="sidebar-lpw-metadata">\n            <label class="sidebar-form-label">Edit Metadata</label>\n            <button class="sidebar-window-button-full" id="lpw-metadata-manage">Manage Properties</button>\n        </div>\n\n        \x3c!-- <button class="sidebar-window-button" id="lpw-save">Save</button>\n        <button class="sidebar-window-button" id="lpw-cancel">Cancel</button> --\x3e\n        <label class="sidebar-form-label">JSON</label>\n        <button class="sidebar-window-button" id="lpw-more" activeOpen="false">More</button>\n\n        <div class="sidebar-properties-json" id="sidebar-lpw-properties-json" style="display: none;">\n            <label class="sidebar-form-label">JSON <span id="lpw-json-status" style="display: none;">Invalid JSON</span>\n            </label>\n            <textarea spellcheck="false" id="sidebar-lpw-json-textarea"\n                class="sidebar-window-textarea sidebar-properties-json-textarea"></textarea>\n        </div>\n\n    </div>\n\n    <div class="sidebar-topology-properties" id="sidebar-topology-window" style="display: none;">\n                \n        <p class="sidebar-window-description">Edit Topology</p>\n        \n        <label class="sidebar-form-label" style="margin-top: 12px;">Map Background</label> \n        <button class="sidebar-window-button-full" style="margin-bottom: 12px;" id="tew-change-map-tile">Add/Change Tiles</button>\n\n        <div id="sidebar-tew-metadata">\n            <label class="sidebar-form-label">Set Topology Attributes</label>    \n            <button class="sidebar-window-button-full" id="tew-metadata-manage">Manage Properties</button>\n        </div>\n\n        <label class="sidebar-form-label" style="margin-top: 12px;">Edit Topology</label> \n        <button class="sidebar-window-button-full" id="tew-delete-topology">Delete Topology</button>\n\n        <p style="margin-top: 24px;" class="sidebar-window-description">Edit Existing Tile</p>\n        <label class="sidebar-form-label">Dimensions</label>\n        <input style="display: inline-block; width: 50px;" type="text" id="tew-tile-height">\n        <span style="font-size: 12px;position: relative;top: -2px;">&nbsp;&times;&nbsp;</span>\n        <input style="display: inline-block; width: 50px;" type="text" id="tew-tile-width">\n        <span style="font-size: 12px;position: relative;top: 1px;">\n            &nbsp;\n            <input id="tew-tile-preserve-aspect-ratio" type="checkbox" name="" id="" checked>\n            &nbsp;\n        </span>\n    </div>\n\n</div>'},function(t,e){t.exports='<div id="editor-modal-header"> <span id="editor-modal-head-desc">Manage Circuit Metadata</span><span id="editor-modal-dismiss"> &times; </span></div>\n<div id="editor-modal-kv-wrapper" style="display: none;">\n    <table id="editor-modal-kv-table">\n        <thead>\n            <tr>\n                <th>Key</th>\n                <th>Value</th>\n                <th></th>\n            </tr>\n        </thead>\n        <tbody id="em-kv-tbody">\n            \n        </tbody>\n    </table>\n    <div id="editor-modal-add-kv">\n        Add New Property\n    </div>\n    <div id="editor-modal-save-kv">\n        Save Properties\n    </div>\n</div>\n<div id="editor-modal-tile-drop-area" style="display: none;">\n    <form class="my-form">\n      <p>Choose an image file or drag it here.</p>\n      <input type="file" id="atlas-modal-map-tile-input" accept="image/*">\n      <label class="button" id="atlas-modal-map-tile-upload" for="atlas-modal-map-tile-input">Select Image</label>\n      <label class="button" id="atlas-modal-map-tile-save">Save Image</label>\n    </form>\n</div>'},function(t,e,n){t.exports=n(31).default},function(t,e,n){var i=n(1),o=n(11);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);t.exports=o.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,"\n.atlas4-legends {\n    padding: 0;\n    position: absolute;\n    display: flex;\n    width: auto;\n    height: auto;\n    z-index: 400; /* Above Map, Below Controls */\n}\n\n.atlas4-legend {\n    display: flex;\n    margin: 2px;\n    z-index: 401; /* Above Map and Container, Below Controls */\n}\n\n.legend-colors {\n    display: flex;\n}\n\n.legend-color {\n    height: 10px;\n    width: 10px;\n}\n\n.legend-labels {\n    display: flex;\n}\n\n.legend-label {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: auto;\n    width: auto;\n    color: black;\n    mix-blend-mode: difference;\n}\n\n.min {\n    align-items: center;\n    justify-content: flex-start;\n}\n\n.max {\n    align-items:center;\n    justify-content: flex-end;\n}\n",""]),t.exports=e},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}L.Curve=L.Path.extend({options:{},initialize:function(t,e){L.setOptions(this,e),this._setPath(t)},getPath:function(){return this._coords},setPath:function(t){return this._setPath(t),this.redraw()},getBounds:function(){return this._bounds},_setPath:function(t){this._coords=t,this._bounds=this._computeBounds()},_computeBounds:function(){for(var t,e,n,i=new L.LatLngBounds,o=0;o<this._coords.length;o++)if("string"==typeof(n=this._coords[o])||n instanceof String)e=n;else if("H"==e)i.extend([t.lat,n[0]]),t=new L.latLng(t.lat,n[0]);else if("V"==e)i.extend([n[0],t.lng]),t=new L.latLng(n[0],t.lng);else if("C"==e){var a=new L.latLng(n[0],n[1]);n=this._coords[++o];var s=new L.latLng(n[0],n[1]);n=this._coords[++o];var r=new L.latLng(n[0],n[1]);i.extend(a),i.extend(s),i.extend(r),r.controlPoint1=a,r.controlPoint2=s,t=r}else if("S"==e){s=new L.latLng(n[0],n[1]);n=this._coords[++o];r=new L.latLng(n[0],n[1]),a=t;if(t.controlPoint2){var l=t.lat-t.controlPoint2.lat,h=t.lng-t.controlPoint2.lng;a=new L.latLng(t.lat+l,t.lng+h)}i.extend(a),i.extend(s),i.extend(r),r.controlPoint1=a,r.controlPoint2=s,t=r}else if("Q"==e){var c=new L.latLng(n[0],n[1]);n=this._coords[++o];r=new L.latLng(n[0],n[1]);i.extend(c),i.extend(r),r.controlPoint=c,t=r}else if("T"==e){r=new L.latLng(n[0],n[1]),c=t;if(t.controlPoint){l=t.lat-t.controlPoint.lat,h=t.lng-t.controlPoint.lng;c=new L.latLng(t.lat+l,t.lng+h)}i.extend(c),i.extend(r),r.controlPoint=c,t=r}else i.extend(n),t=new L.latLng(n[0],n[1]);return i},getCenter:function(){return this._bounds.getCenter()},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._usingCanvas?this._updateCurveCanvas():this._updateCurveSvg()},_project:function(){var t,e,n,i;this._points=[];for(var o=0;o<this._coords.length;o++)if("string"==typeof(t=this._coords[o])||t instanceof String)this._points.push(t),n=t;else{switch(t.length){case 2:i=this._latLngToPointFn.call(this._map,t),e=t;break;case 1:"H"==n?(i=this._latLngToPointFn.call(this._map,[e[0],t[0]]),e=[e[0],t[0]]):(i=this._latLngToPointFn.call(this._map,[t[0],e[1]]),e=[t[0],e[1]])}this._points.push(i)}},_curvePointsToPath:function(t){for(var e,n,i="",o=0;o<t.length;o++)if("string"==typeof(e=t[o])||e instanceof String)i+=n=e;else switch(n){case"H":i+=e.x+" ";break;case"V":i+=e.y+" ";break;default:i+=e.x+","+e.y+" "}return i||"M0 0"},beforeAdd:function(t){L.Path.prototype.beforeAdd.call(this,t),this._usingCanvas=this._renderer instanceof L.Canvas,this._latLngToPointFn=this._usingCanvas?t.latLngToContainerPoint:t.latLngToLayerPoint,this._usingCanvas&&(this._pathSvgElement=document.createElementNS("http://www.w3.org/2000/svg","path"))},onAdd:function(t){if(this._usingCanvas&&(this._canvasSetDashArray=!this.options.dashArray),L.Path.prototype.onAdd.call(this,t),this._usingCanvas)this._animationCanvasElement=this._insertCustomCanvasElement(),this._resizeCanvas(),t.on("resize",this._resizeCanvas,this),this.options.animate&&"object"===("undefined"==typeof TWEEN?"undefined":n(TWEEN))?(this._pathLength=this._pathSvgElement.getTotalLength(),this._normalizeCanvasAnimationOptions(),this._tweenedObject={offset:this._pathLength},this._tween=new TWEEN.Tween(this._tweenedObject).to({offset:0},this.options.animate.duration).delay(this.options.animate.delay).repeat(this.options.animate.iterations-1).onComplete((i=this,function(){i._canvasAnimating=!1})).start(),this._canvasAnimating=!0,this._animateCanvas()):this._canvasAnimating=!1;else if(this.options.animate&&this._path.animate){var e=this._svgSetDashArray();this._path.animate([{strokeDashoffset:e},{strokeDashoffset:0}],this.options.animate)}var i},onRemove:function(t){L.Path.prototype.onRemove.call(this,t),this._usingCanvas&&(this._clearCanvas(),L.DomUtil.remove(this._animationCanvasElement),t.off("resize",this._resizeCanvas,this))},_updateCurveSvg:function(){this._renderer._setPath(this,this._curvePointsToPath(this._points)),this.options.animate&&this._svgSetDashArray()},_svgSetDashArray:function(){var t=this._path,e=t.getTotalLength();return this.options.dashArray||(t.style.strokeDasharray=e+" "+e),e},_containsPoint:function(t){return this._bounds.contains(this._map.layerPointToLatLng(t))},_insertCustomCanvasElement:function(){var t=L.DomUtil.create("canvas","leaflet-zoom-animated"),e=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);t.style[e]="50% 50%";var n=this._map.getPane(this.options.pane);return n.insertBefore(t,n.firstChild),t},_normalizeCanvasAnimationOptions:function(){var t={delay:0,duration:0,iterations:1};"number"==typeof this.options.animate?t.duration=this.options.animate:(this.options.animate.duration&&(t.duration=this.options.animate.duration),this.options.animate.delay&&(t.delay=this.options.animate.delay),this.options.animate.iterations&&(t.iterations=this.options.animate.iterations)),this.options.animate=t},_updateCurveCanvas:function(){this._project();var t=this._curvePointsToPath(this._points);this._pathSvgElement.setAttribute("d",t),this.options.animate&&"object"===("undefined"==typeof TWEEN?"undefined":n(TWEEN))&&this._canvasSetDashArray&&(this._pathLength=this._pathSvgElement.getTotalLength(),this.options.dashArray=this._pathLength+"",this._renderer._updateDashArray(this)),this._path2d=new Path2D(t),this._animationCanvasElement&&this._resetCanvas()},_animationCanvasElement:null,_resizeCanvas:function(){var t=this._map.getSize();this._animationCanvasElement.width=t.x,this._animationCanvasElement.height=t.y,this._resetCanvas()},_resetCanvas:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._animationCanvasElement,t),this._redrawCanvas()},_redrawCanvas:function(){if(!this._canvasAnimating){this._clearCanvas();var t=this._animationCanvasElement.getContext("2d");this._curveFillStroke(this._path2d,t)}},_clearCanvas:function(){this._animationCanvasElement.getContext("2d").clearRect(0,0,this._animationCanvasElement.width,this._animationCanvasElement.height)},_animateCanvas:function(t){TWEEN.update(t);var e=this._animationCanvasElement.getContext("2d");e.clearRect(0,0,this._animationCanvasElement.width,this._animationCanvasElement.height),e.lineDashOffset=this._tweenedObject.offset,this._curveFillStroke(this._path2d,e),this._canvasAnimating&&(this._animationFrameId=L.Util.requestAnimFrame(this._animateCanvas,this))},_curveFillStroke:function(t,e){var n=this.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(t,n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(this.options&&this.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke(t))},trace:function(t){var e,n,i,o,a,s,r;t=t.filter((function(t){return t>=0&&t<=1}));for(var l=[],h=0;h<this._points.length;h++)if("string"==typeof(e=this._points[h])||e instanceof String)"Z"==(n=e)&&(l=l.concat(this._linearTrace(t,o,i)));else switch(n){case"M":i=e,o=e;break;case"L":case"H":case"V":l=l.concat(this._linearTrace(t,o,e)),o=e;break;case"C":a=e,s=this._points[++h],r=this._points[++h],l=l.concat(this._cubicTrace(t,o,a,s,r)),o=r;break;case"S":a=this._reflectPoint(s,o),s=e,r=this._points[++h],l=l.concat(this._cubicTrace(t,o,a,s,r)),o=r;break;case"Q":a=e,s=this._points[++h],l=l.concat(this._quadraticTrace(t,o,a,s)),o=s;break;case"T":a=this._reflectPoint(a,o),s=e,l=l.concat(this._quadraticTrace(t,o,a,s)),o=s}return l},_linearTrace:function(t,e,n){var i=this;return t.map((function(t){var o=i._singleLinearTrace(t,e.x,n.x),a=i._singleLinearTrace(t,e.y,n.y);return i._map.layerPointToLatLng([o,a])}))},_quadraticTrace:function(t,e,n,i){var o=this;return t.map((function(t){var a=o._singleQuadraticTrace(t,e.x,n.x,i.x),s=o._singleQuadraticTrace(t,e.y,n.y,i.y);return o._map.layerPointToLatLng([a,s])}))},_cubicTrace:function(t,e,n,i,o){var a=this;return t.map((function(t){var s=a._singleCubicTrace(t,e.x,n.x,i.x,o.x),r=a._singleCubicTrace(t,e.y,n.y,i.y,o.y);return a._map.layerPointToLatLng([s,r])}))},_singleLinearTrace:function(t,e,n){return e+t*(n-e)},_singleQuadraticTrace:function(t,e,n,i){var o=1-t;return Math.pow(o,2)*e+2*o*t*n+Math.pow(t,2)*i},_singleCubicTrace:function(t,e,n,i,o){var a=1-t;return Math.pow(a,3)*e+3*Math.pow(a,2)*t*n+3*a*Math.pow(t,2)*i+Math.pow(t,3)*o},_reflectPoint:function(t,e){return x=e.x+(e.x-t.x),y=e.y+(e.y-t.y),L.point(x,y)}}),L.curve=function(t,e){return new L.Curve(t,e)}},function(t,e,n){var i=n(1),o=n(14);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);t.exports=o.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".atlas-editor-toolbar {\n  width: 34px;\n  border-radius: 4px;\n  background: whitesmoke;\n  box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n}\n\n.tb-btn {\n  width: 100%;\n  height: 34px;\n  display: block;\n  text-align: center;\n  line-height: 34px;\n  color: black;\n  border: none;\n  font-size: 18px;\n  cursor: pointer;\n  background: white;\n}\n\n.atlas-editor-toolbar [activated=\"true\"] {\n  background: black;\n  color: white;\n}\n\n.atlas-editor-toolbar [activated=\"true\"]:hover {\n  background: rgb(36, 36, 36);\n  color: white;\n}\n\n.tb-btn:hover {\n  background: rgb(233, 234, 235);\n}\n\n.tb-dropdown {\n  position: relative;\n}\n\n.tb-dropdown:hover::after {\n  content: \"\";\n  position: absolute;\n  height: 100%;\n  width: 10px;\n  top: 0;\n  left: 100%;\n}\n\n.tb-dropdown-content {\n  position: absolute;\n  width: 100px;\n  background-color: #dfdfdf;\n  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n  border-radius: 4px;\n  left: calc(100% + 10px);\n  text-align: center;\n  top: 0;\n  max-height: 200px;\n  overflow-y: auto;\n  display: none;\n}\n\n.tb-dropdown-content a {\n  color: black !important;\n  padding: 8px 4px;\n  text-decoration: none;\n  display: block;\n  border-radius: 4px;\n  cursor: pointer;\n  text-align: center;\n}\n\n.tb-dropdown-content a:hover {\n  background-color: #bdbdbd;\n}\n\n.tb-dropdown:hover .tb-dropdown-content {\n  display: block;\n}\n\n.tb-tool-name {\n  margin: 0;\n  text-transform: uppercase;\n  font-size: 10px;\n  padding: 4px 0;\n  border-bottom: 1px solid #a8a8a8;\n  text-align: center;\n  letter-spacing: 1px;\n  color: black;\n}\n\n#dropdown-add-node button {\n  background: #fff url('data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIwLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJQaW4tQWRkIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDIyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPHBhdGggZD0iTTExLDI5LjUzOEM4Ljc2MywyNy4wNzEsMiwxOC45NSwyLDExYzAtNC45NjIsNC4wMzgtOSw5LTlWMEM0LjkzNSwwLDAsNC45MzUsMCwxMWMwLDEwLjI5Niw5Ljg3MywyMC4yODcsMTAuMjkzLDIwLjcwNw0KCQlDMTAuNDg4LDMxLjkwMiwxMC43NDQsMzIsMTEsMzJzMC41MTItMC4wOTgsMC43MDctMC4yOTNDMTIuMTI3LDMxLjI4NywyMiwyMS4yOTYsMjIsMTFoLTJDMjAsMTguOTM4LDEzLjIzNSwyNy4wNjgsMTEsMjkuNTM4eiIvPg0KCTxwYXRoIGQ9Ik02LDExLjAwMmMwLDIuNzU3LDIuMjQzLDUsNSw1czUtMi4yNDMsNS01cy0yLjI0My01LTUtNVM2LDguMjQ1LDYsMTEuMDAyeiBNMTQsMTEuMDAyYzAsMS42NTQtMS4zNDYsMy0zLDNzLTMtMS4zNDYtMy0zDQoJCXMxLjM0Ni0zLDMtM1MxNCw5LjM0OCwxNCwxMS4wMDJ6Ii8+DQoJPHBvbHlnb24gcG9pbnRzPSIxOSwzIDE5LDAgMTcsMCAxNywzIDE0LDMgMTQsNSAxNyw1IDE3LDggMTksOCAxOSw1IDIyLDUgMjIsMyAJIi8+DQo8L2c+DQo8L3N2Zz4NCg==');\n  background-size: 80% 80%;\n  background-position: center;\n  background-repeat: no-repeat;\n}\n\n#dropdown-add-line button {\n  background: #fff url('data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI0LjEuMywgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAzMiAzMiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzIgMzI7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+Cgk8cGF0aCBkPSJNMy41LDE5LjNjLTEuNywwLTMsMS4zLTMsM3MxLjMsMywzLDNzMy0xLjMsMy0zUzUuMiwxOS4zLDMuNSwxOS4zeiBNMy41LDIzLjNjLTAuNiwwLTEtMC40LTEtMXMwLjQtMSwxLTFzMSwwLjQsMSwxCgkJUzQsMjMuMywzLjUsMjMuM3oiLz4KCTxwb2x5Z29uIHBvaW50cz0iMjcuNSwxMiAyOC44LDEwLjcgMzAuMSwxMiAzMS41LDEwLjYgMzAuMiw5LjMgMzEuNSw4IDMwLjEsNi42IDI4LjgsNy44IDI3LjUsNi42IDI2LjEsOCAyNy40LDkuMyAyNi4xLDEwLjYgCSIvPgo8L2c+CjxnPgoJPHBvbHlnb24gcG9pbnRzPSIxNy40LDE1LjIgMTcuNCwxMi4yIDE1LjQsMTIuMiAxNS40LDE1LjIgMTIuNCwxNS4yIDEyLjQsMTcuMiAxNS40LDE3LjIgMTUuNCwyMC4yIDE3LjQsMjAuMiAxNy40LDE3LjIgMjAuNCwxNy4yIAoJCTIwLjQsMTUuMiAJIi8+CjwvZz4KPGc+Cgk8cGF0aCBkPSJNMjcuNiwxMy4zdjJoLTUuMXYyaDUuMWMxLDAsMi0wLjcsMi0ydi0ySDI3LjZ6Ii8+Cgk8cGF0aCBkPSJNMTAuNCwxNS4zSDQuNWMtMS4zLDAtMiwxLTIsMnYxaDJ2LTFoNS45VjE1LjN6Ii8+CjwvZz4KPC9zdmc+Cg==');\n  background-size: 80% 80%;\n  background-position: center;\n  background-repeat: no-repeat;\n}\n\n#dropdown-edit-node button {\n  background: #fff url('data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIwLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMb2NhdGlvbiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAzMiAzMCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzIgMzA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxwYXRoIGQ9Ik0zMCw1djIyLjc4bC04LTEuNlYyMmgtMnY0LjE4bC04LDEuNlY5aC0ydjE4Ljc4bC04LTEuNlY0LjIybDguODA0LDEuNzYxbDAuMzkzLTEuOTYxbC0xMC0yDQoJCUMwLjksMS45NTgsMC41OTgsMi4wMzYsMC4zNjYsMi4yMjdDMC4xMzQsMi40MTcsMCwyLjcsMCwzdjI0YzAsMC40NzcsMC4zMzYsMC44ODcsMC44MDQsMC45OGwxMCwyYzAuMTMsMC4wMjYsMC4yNjMsMC4wMjYsMC4zOTMsMA0KCQlMMjEsMjguMDJsOS44MDQsMS45NkMzMC44NjksMjkuOTk0LDMwLjkzNSwzMCwzMSwzMGMwLjIyOSwwLDAuNDU0LTAuMDc5LDAuNjM0LTAuMjI3QzMxLjg2NiwyOS41ODMsMzIsMjkuMywzMiwyOVY1SDMweiIvPg0KCTxwYXRoIGQ9Ik0yMSwyMGMwLjI1NiwwLDAuNTEyLTAuMDk4LDAuNzA3LTAuMjkzQzIxLjk2NCwxOS40NSwyOCwxMy4zNDEsMjgsN2MwLTMuODYtMy4xNC03LTctN3MtNywzLjE0LTcsNw0KCQljMCw2LjM0MSw2LjAzNiwxMi40NSw2LjI5MywxMi43MDdDMjAuNDg4LDE5LjkwMiwyMC43NDQsMjAsMjEsMjB6IE0yMSwyYzIuNzU3LDAsNSwyLjI0Myw1LDVjMCw0LjMxNy0zLjQ3Miw4Ljc3LTUsMTAuNTIxDQoJCUMxOS40NzIsMTUuNzcsMTYsMTEuMzE3LDE2LDdDMTYsNC4yNDMsMTguMjQzLDIsMjEsMnoiLz4NCgk8cGF0aCBkPSJNMjQsN2MwLTEuNjU0LTEuMzQ2LTMtMy0zcy0zLDEuMzQ2LTMsM3MxLjM0NiwzLDMsM1MyNCw4LjY1NCwyNCw3eiBNMjAsN2MwLTAuNTUxLDAuNDQ5LTEsMS0xczEsMC40NDksMSwxcy0wLjQ0OSwxLTEsMQ0KCQlTMjAsNy41NTEsMjAsN3oiLz4NCjwvZz4NCjwvc3ZnPg0K');\n  background-size: 80% 80%;\n  background-position: center;\n  background-repeat: no-repeat;\n}\n\n#dropdown-edit-line button {\n  background: #fff url('data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIwLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJNYXJrLUxvY2F0aW9uIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiDQoJIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDI4LjAwMSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzIgMjguMDAxOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8Zz4NCgk8cGF0aCBkPSJNMzEuMTk2LDIuMDJsLTEwLTJjLTAuMTMtMC4wMjYtMC4yNjMtMC4wMjYtMC4zOTMsMEwxMSwxLjk4MUwxLjE5NiwwLjAyYy0wLjI5NS0wLjA2MS0wLjU5OSwwLjAxNy0wLjgzLDAuMjA3DQoJCUMwLjEzNCwwLjQxNywwLDAuNzAxLDAsMS4wMDF2MjRjMCwwLjQ3NywwLjMzNiwwLjg4NywwLjgwNCwwLjk4bDEwLDJjMC4xMywwLjAyNiwwLjI2MywwLjAyNiwwLjM5MywwTDIxLDI2LjAyMWw5LjgwNCwxLjk2DQoJCWMwLjA2NSwwLjAxMywwLjEzMSwwLjAyLDAuMTk2LDAuMDJjMC4yMjksMCwwLjQ1NC0wLjA3OSwwLjYzNC0wLjIyN0MzMS44NjYsMjcuNTg0LDMyLDI3LjMwMSwzMiwyNy4wMDF2LTI0DQoJCUMzMiwyLjUyNCwzMS42NjQsMi4xMTQsMzEuMTk2LDIuMDJ6IE0zMCwyNS43ODFsLTguODA0LTEuNzYxYy0wLjEzLTAuMDI2LTAuMjYzLTAuMDI2LTAuMzkzLDBMMTEsMjUuOTgxbC05LTEuOFYyLjIyMWw4LjgwNCwxLjc2MQ0KCQljMC4xMywwLjAyNiwwLjI2MywwLjAyNiwwLjM5MywwTDIxLDIuMDIxbDksMS44VjI1Ljc4MXoiLz4NCgk8cGF0aCBkPSJNMjMsMTMuMDAxSDhjLTEuMjk5LDAtMiwxLjAzLTIsMnYxaDJ2LTFoMTVjMC45NywwLDItMC43MDEsMi0ydi0yaC0yVjEzLjAwMXoiLz4NCgk8cGF0aCBkPSJNNywxNy4wMDFjLTEuNjU0LDAtMywxLjM0Ni0zLDNzMS4zNDYsMywzLDNzMy0xLjM0NiwzLTNTOC42NTQsMTcuMDAxLDcsMTcuMDAxeiBNNywyMS4wMDFjLTAuNTUxLDAtMS0wLjQ0OS0xLTENCgkJczAuNDQ5LTEsMS0xczEsMC40NDksMSwxUzcuNTUxLDIxLjAwMSw3LDIxLjAwMXoiLz4NCgk8cG9seWdvbiBwb2ludHM9IjIyLjcwNyw5LjcwOCAyNCw4LjQxNSAyNS4yOTMsOS43MDggMjYuNzA3LDguMjk0IDI1LjQxNCw3LjAwMSAyNi43MDcsNS43MDggMjUuMjkzLDQuMjk0IDI0LDUuNTg3IDIyLjcwNyw0LjI5NCANCgkJMjEuMjkzLDUuNzA4IDIyLjU4Niw3LjAwMSAyMS4yOTMsOC4yOTQgCSIvPg0KPC9nPg0KPC9zdmc+DQo=');\n  background-size: 80% 80%;\n  background-position: center;\n  background-repeat: no-repeat;\n}\n\n#dropdown-get-json button {\n  background: #fff url('data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIwLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJXb3JsZC1hcnJvdy0yIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiDQoJIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPHBhdGggZD0iTTE2LDBDNy4xNzgsMCwwLDcuMTc4LDAsMTZzNy4xNzgsMTYsMTYsMTZ2LTJjLTUuNDk3LDAtMTAuMjUtMy4xOTItMTIuNTQtNy44MTNjMS4wMDcsMC4xMDcsMS45MTcsMC4xNjUsMi43MTgsMC4xNjUNCgkJYzIuMTE4LDAsMy41NTEtMC4zNzUsNC40Ny0xLjEzOWMxLjI1Mi0xLjA0MiwxLjMxMy0yLjUzNSwxLjM2Ny0zLjg1MmMwLjA2OC0xLjY1NSwwLjE3Ny0yLjcxLDEuNS0zLjUwNA0KCQljNC40MDUtMi42NDMsNC4wNTUtOS4wNTQsMy42NzgtMTEuNzk3YzEuNjY5LDAuMTQyLDMuMjUsMC41ODEsNC43MDEsMS4yNThjLTAuNTEzLDIuMTU4LTEuNzkxLDguMTIyLTAuNzg4LDEwLjEyOQ0KCQljMC42NDQsMS4yODcsMS44MzIsMS42NzcsMy4yMDgsMi4xMjljMC45MTcsMC4zMDEsMS45NTUsMC42NDIsMy4yMTEsMS4zMWwwLjkzOC0xLjc2N2MtMS40MDctMC43NDgtMi41ODItMS4xMzMtMy41MjUtMS40NDMNCgkJYy0xLjIyOS0wLjQwMy0xLjc4My0wLjYwNC0yLjA0Mi0xLjEyNGMtMC40NjYtMC45MzEsMC4wNC00Ljc3OSwwLjgxOS04LjIyNUMyNy40OTcsNi44MzcsMzAsMTEuMTMsMzAsMTZoMkMzMiw3LjE3OCwyNC44MjIsMCwxNiwwDQoJCXogTTEyLjQ4NSwxMi4xNDNjLTIuMzE1LDEuMzg5LTIuNDA0LDMuNTU1LTIuNDY5LDUuMTM3Yy0wLjA0OSwxLjE5Mi0wLjEwNiwxLjk0Ni0wLjY0OCwyLjM5Ng0KCQljLTAuODkxLDAuNzQxLTMuMTc0LDAuODY5LTYuNzYxLDAuMzk0QzIuMjE1LDE4Ljc4MSwyLDE3LjQxNSwyLDE2QzIsOC41NjEsNy44MzYsMi40NzcsMTUuMTY3LDIuMDQyDQoJCUMxNS40OSw0LjIxLDE1Ljk5MSwxMC4wMzksMTIuNDg1LDEyLjE0M3oiLz4NCgk8cGF0aCBkPSJNMjYsMjguNTg2VjIwaC0ydjguNTg2bC0yLjI5My0yLjI5M2wtMS40MTQsMS40MTRsNCw0QzI0LjQ4OCwzMS45MDIsMjQuNzQ0LDMyLDI1LDMyczAuNTEyLTAuMDk4LDAuNzA3LTAuMjkzbDQtNA0KCQlsLTEuNDE0LTEuNDE0TDI2LDI4LjU4NnoiLz4NCjwvZz4NCjwvc3ZnPg0K');\n  background-size: 80% 80%;\n  background-position: center;\n  background-repeat: no-repeat;\n}\n\n#dropdown-set-topology button {\n  background: #fff url('data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIwLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJXb3JsZC1hZGQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8Zz4NCgk8cGF0aCBkPSJNMy40NiwyMi4xODdjMS4wMDcsMC4xMDcsMS45MTcsMC4xNjUsMi43MTgsMC4xNjVjMi4xMTgsMCwzLjU1MS0wLjM3NSw0LjQ3LTEuMTM5YzEuMjUyLTEuMDQyLDEuMzEzLTIuNTM1LDEuMzY3LTMuODUyDQoJCWMwLjA2OC0xLjY1NSwwLjE3Ny0yLjcxLDEuNS0zLjUwNGM0LjQwNS0yLjY0Myw0LjA1NS05LjA1NCwzLjY3OC0xMS43OTdjMS42NjksMC4xNDIsMy4yNSwwLjU4MSw0LjcwMSwxLjI1OA0KCQljLTAuNTEzLDIuMTU4LTEuNzkxLDguMTIyLTAuNzg4LDEwLjEyOWMwLjY0NCwxLjI4NywxLjgzMiwxLjY3NywzLjIwOCwyLjEyOWMwLjkxNywwLjMwMSwxLjk1NSwwLjY0MiwzLjIxMSwxLjMxbDAuOTM4LTEuNzY3DQoJCWMtMS40MDctMC43NDgtMi41ODItMS4xMzMtMy41MjUtMS40NDNjLTEuMjI5LTAuNDAzLTEuNzgzLTAuNjA0LTIuMDQyLTEuMTI0Yy0wLjQ2Ni0wLjkzMSwwLjA0LTQuNzc5LDAuODE5LTguMjI1DQoJCUMyNy40OTcsNi44MzcsMzAsMTEuMTMsMzAsMTZoMmMwLTguODIyLTcuMTc4LTE2LTE2LTE2UzAsNy4xNzgsMCwxNnM3LjE3OCwxNiwxNiwxNnYtMkMxMC41MDMsMzAsNS43NSwyNi44MDgsMy40NiwyMi4xODd6DQoJCSBNMTUuMTY3LDIuMDQyYzAuMzIzLDIuMTY4LDAuODIzLDcuOTk3LTIuNjgyLDEwLjFjLTIuMzE1LDEuMzg5LTIuNDA0LDMuNTU1LTIuNDY5LDUuMTM3Yy0wLjA0OSwxLjE5Mi0wLjEwNiwxLjk0Ni0wLjY0OCwyLjM5Ng0KCQljLTAuODkxLDAuNzQyLTMuMTc0LDAuODY5LTYuNzYxLDAuMzk0QzIuMjE1LDE4Ljc4MSwyLDE3LjQxNSwyLDE2QzIsOC41NjEsNy44MzYsMi40NzcsMTUuMTY3LDIuMDQyeiIvPg0KCTxwYXRoIGQ9Ik0yNCwxOGMtMy44NiwwLTcsMy4xNC03LDdzMy4xNCw3LDcsN3M3LTMuMTQsNy03UzI3Ljg2LDE4LDI0LDE4eiBNMjQsMzBjLTIuNzU3LDAtNS0yLjI0My01LTVzMi4yNDMtNSw1LTVzNSwyLjI0Myw1LDUNCgkJUzI2Ljc1NywzMCwyNCwzMHoiLz4NCgk8cG9seWdvbiBwb2ludHM9IjI1LDIyIDIzLDIyIDIzLDI0IDIxLDI0IDIxLDI2IDIzLDI2IDIzLDI4IDI1LDI4IDI1LDI2IDI3LDI2IDI3LDI0IDI1LDI0IAkiLz4NCjwvZz4NCjwvc3ZnPg0K');\n  background-size: 80% 80%;\n  background-position: center;\n  background-repeat: no-repeat;\n}\n\n#dropdown-edit-topology button {\n  background: #fff url('data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIwLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJXb3JsZC1saXN0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPHBhdGggZD0iTTE2LDBDNy4xNzgsMCwwLDcuMTc4LDAsMTZzNy4xNzgsMTYsMTYsMTZ2LTJjLTUuNDk3LDAtMTAuMjUtMy4xOTItMTIuNTQtNy44MTNjMS4wMDcsMC4xMDcsMS45MTcsMC4xNjUsMi43MTgsMC4xNjUNCgkJYzIuMTE4LDAsMy41NTEtMC4zNzUsNC40Ny0xLjEzOWMxLjI1Mi0xLjA0MiwxLjMxMy0yLjUzNSwxLjM2Ny0zLjg1MmMwLjA2OC0xLjY1NSwwLjE3Ny0yLjcxLDEuNS0zLjUwNA0KCQljNC40MDUtMi42NDMsNC4wNTUtOS4wNTQsMy42NzgtMTEuNzk3YzEuNjY5LDAuMTQyLDMuMjUsMC41ODEsNC43MDEsMS4yNThjLTAuNTEzLDIuMTU4LTEuNzkxLDguMTIyLTAuNzg4LDEwLjEyOQ0KCQljMC42NDQsMS4yODcsMS44MzIsMS42NzcsMy4yMDgsMi4xMjljMC45MTcsMC4zMDEsMS45NTUsMC42NDIsMy4yMTEsMS4zMWwwLjkzOC0xLjc2N2MtMS40MDctMC43NDgtMi41ODItMS4xMzMtMy41MjUtMS40NDMNCgkJYy0xLjIyOS0wLjQwMy0xLjc4My0wLjYwNC0yLjA0Mi0xLjEyNGMtMC40NjYtMC45MzEsMC4wNC00Ljc3OSwwLjgxOS04LjIyNUMyNy40OTcsNi44MzcsMzAsMTEuMTMsMzAsMTZoMkMzMiw3LjE3OCwyNC44MjIsMCwxNiwwDQoJCXogTTEyLjQ4NSwxMi4xNDNjLTIuMzE1LDEuMzg5LTIuNDA0LDMuNTU1LTIuNDY5LDUuMTM3Yy0wLjA0OSwxLjE5Mi0wLjEwNiwxLjk0Ni0wLjY0OCwyLjM5Ng0KCQljLTAuODkxLDAuNzQxLTMuMTczLDAuODY5LTYuNzYxLDAuMzk0QzIuMjE1LDE4Ljc4MSwyLDE3LjQxNSwyLDE2QzIsOC41NjEsNy44MzYsMi40NzcsMTUuMTY3LDIuMDQyDQoJCUMxNS40OSw0LjIxLDE1Ljk5MSwxMC4wMzksMTIuNDg1LDEyLjE0M3oiLz4NCgk8cmVjdCB4PSIyMCIgeT0iMjAiIHdpZHRoPSIyIiBoZWlnaHQ9IjIiLz4NCgk8cmVjdCB4PSIyNCIgeT0iMjAiIHdpZHRoPSI2IiBoZWlnaHQ9IjIiLz4NCgk8cmVjdCB4PSIyMCIgeT0iMjQiIHdpZHRoPSIyIiBoZWlnaHQ9IjIiLz4NCgk8cmVjdCB4PSIyNCIgeT0iMjQiIHdpZHRoPSI2IiBoZWlnaHQ9IjIiLz4NCgk8cmVjdCB4PSIyMCIgeT0iMjgiIHdpZHRoPSIyIiBoZWlnaHQ9IjIiLz4NCgk8cmVjdCB4PSIyNCIgeT0iMjgiIHdpZHRoPSI2IiBoZWlnaHQ9IjIiLz4NCjwvZz4NCjwvc3ZnPg0K');\n  background-size: 80% 80%;\n  background-position: center;\n  background-repeat: no-repeat;\n}\n\n#dropdown-add-node button:hover, #dropdown-edit-topology button:hover, #dropdown-set-topology button:hover, #dropdown-get-json button:hover, #dropdown-edit-line button:hover, #dropdown-edit-node button:hover, #dropdown-add-line button:hover{\n  background-color: #bdbdbd;\n}\n\n#dropdown-add-node [activated=true], #dropdown-edit-topology [activated=true], #dropdown-set-topology [activated=true], #dropdown-get-json [activated=true], #dropdown-edit-line [activated=true], #dropdown-edit-node [activated=true], #dropdown-add-line [activated=true]{\n  background-color: #bdbdbd;\n}",""]),t.exports=e},function(t,e,n){var i=n(1),o=n(16);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);t.exports=o.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,':root {\n  --sidebar-width: 250px;\n}\n\n.atlas-editor-sidebar-container {\n  background: rgba(0, 0, 0, 0.3);\n  margin: 0 !important;\n  height: 100%;\n  width: var(--sidebar-width);\n}\n\n.atlas-editor-sidebar {\n  position: absolute;\n  height: 100%;\n  width: var(--sidebar-width);\n  background: rgb(255, 255, 255);\n  top: 0;\n  left: 100%;\n  transform: translate(-100%,0);\n  padding: 10px;\n  box-sizing: border-box;\n  overflow-x: auto;\n}\n\n/* Sidebar General Info Window */\n.editor-sidebar-general-info {\n  width: 100%;\n  margin-bottom: 40px;\n  /* border: 1px solid grey; */\n}\n\n.editor-sidebar-general-info p {\n  text-transform: uppercase;\n  font-size: 12px;\n  font-weight: 500;\n  letter-spacing: 1px;\n  margin: 5px 0;\n  margin-bottom: 0px;\n  color: rgb(66, 69, 71);\n}\n\n.editor-sidebar-general-info h1 {\n  color: rgb(65, 65, 70);\n  margin: 5px 0;\n  font-size: 24px;\n  text-transform: uppercase;\n  margin-bottom: 20px;\n}\n\n.editor-sidebar-general-info h2 {\n  color: rgb(65, 65, 70);\n  margin: 2px 0;\n  font-size: 16px;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n}\n/* END: Sidebar General Info Window */\n\n/* Sidebar Node Properties Window */\n.sidebar-node-properties, .sidebar-line-properties {\n  font-size: 0;\n  margin-bottom: 30px;\n}\n\n.sidebar-window-description {\n  text-transform: uppercase;\n  font-size: 10px;\n  margin: 0;\n  letter-spacing: 1px;\n  margin-bottom: 10px;\n  color: black;\n}\n\n.sidebar-form-label {\n  display: block;\n  text-transform: uppercase;\n  position: relative;\n  margin: 0;\n  font-size: 12px;\n  font-weight: 500px;\n  letter-spacing: 1px;\n  color: rgb(66, 69, 71);\n  margin-bottom: 3px;\n}\n\n.sidebar-size-label-desc {\n  position: absolute;\n  left: 100%;\n  transform: translate(-100%, 0);\n  display: inline-block;\n}\n\n.atlas-editor-sidebar [type="text"] {\n  display: block;\n  font-size: 14px;\n  line-height: 18px;\n  outline: none;\n  margin-bottom: 10px;\n  color: #545454;\n  background: white;\n  border: 1px solid rgb(136 136 154);\n  padding: 4px 8px;\n  outline: none;\n  box-sizing: border-box;\n  width: 100%;\n  height: 30px;\n  border-radius: 5px;\n}\n\n.atlas-editor-sidebar [type="range"] {\n  height: 24px;\n  width: calc(100% - 6px);\n  border: none;\n  outline: none;\n}\n\n.atlas-editor-sidebar [type="color"] {\n  display: none;\n}\n\n.sidebar-npw-color-wrapper {\n  height: 24px;\n  background: #6785d4;\n  cursor: pointer;\n  border-radius: 5px;\n}\n\n.sidebar-window-button {\n  display: inline-block;\n  width: 30%;\n  margin-top: 0px;\n  /* margin-right: 3%; */\n  height: 32px;\n  cursor: pointer;\n  border-radius: 4px;\n  font-size: 12px;\n\n  box-sizing: border-box;\n  padding: 8px;\n  border: 1px solid rgb(75, 74, 74);\n  background: white;\n  color: black;\n}\n\n.sidebar-window-button:hover {\n  background: rgb(194, 194, 194);\n}\n\n.npw-btns-container {\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  column-gap: 8px;\n}\n\n\n/* END: Sidebar Node Properties Window */\n\n/* Sidebar Tool Info Window */\n.sidebar-tool-info-description {\n  color: rgb(122, 130, 141);\n  font-style: italic;\n  font-size: 12px;\n  margin: 0;\n  margin-top: -8px;\n}\n\n.sidebar-tool-info {\n  margin-bottom: 30px;\n}\n\n/* END: Sidebar Tool Info Window */\n\n/* Sidebar JSON Window */\n.sidebar-window-textarea {\n  width: 100%;\n  white-space: nowrap;\n  font-family: monospace;\n  height: 375px;\n  resize: none;\n  box-sizing: border-box;\n}\n\n#sidebar-json-button {\n  margin-top: 8px;\n  width: 40%;\n}\n/* END: Sidebar JSON Window */\n\n/* Line Editor Window */\n\n.sidebar-line-edit-window {\n  width: 100%;\n}\n\n#sidebar-curve-type-container {\n  width: 100%;\n  /* background: yellowgreen; */\n}\n\n#sidebar-edit-anchor-cont {\n  margin-top: 15px;\n}\n\n.sidebar-line-edit-opt-cont {\n  width: 100%;\n  /* background: red; */\n  margin: 0;\n  margin-top: 5px;\n  margin-bottom: 20px;\n  height: 42px;\n  border-radius: 4px;\n  font-size: 0;\n  border: 1px solid rgb(66, 69, 71);\n}\n\n.sidebar-line-edit-opt-cont span {\n  box-sizing: border-box;\n  font-size: 21px;\n  display: inline-block;\n  text-align: center;\n  line-height: 42px;\n  height: 100%;\n  color: rgb(66, 69, 71);\n  cursor: pointer;\n  border-right: 1px solid rgb(66, 69, 71);\n}\n\n.frThree span {\n  width: 33.3333%;\n}\n\n.frTwo span {\n  width: 50%;\n  font-size: 24px;\n  line-height: 38px;\n}\n\n.frThree span:nth-of-type(3) {\n  border: none;\n}\n\n.frTwo span:nth-of-type(2) {\n  border: none;\n}\n\n.sidebar-line-edit-opt-cont span:hover {\n  background: rgb(225, 231, 235);\n}\n\n[selectedCurve="true"] {\n  background: rgba(66, 69, 71, 0.8);\n  color: white !important;\n}\n\n[selectedCurve="true"]:hover {\n  background: rgba(66, 69, 71, 0.6) !important;\n}\n\n/* END: Line Editor Window */\n\n/* END: Line Editor Window */\n\n/* JSON Properties  Window */\n.sidebar-properties-json-textarea {\n  height: 200px;\n  outline: none;\n}\n\n.sidebar-properties-json {\n  margin-top: 10px;\n}\n\n.sidebar-properties-json label span {\n  color: red;\n  font-size: 0.8em;\n  position: absolute;\n  right: 0;\n  display: inline-block;\n  top: 50%;\n  transform: translate(0, -50%);\n}\n\n/* END: JSON Properties Window */\n\n#sidebar-lpw-metadata {\n    margin-top: 10px;\n    margin-bottom: 10px;\n}\n\n.sidebar-lpw-metadata-kv-cont {\n  margin-top: 15px;\n}\n\n.txtbox-2 {\n  display: inline-block !important;\n  width: calc(50% - 15px) !important;\n  font-size: 14px !important;\n  line-height: 18px !important;\n  outline: none !important;\n  margin-bottom: 5px !important;\n  margin-right: 5px !important;\n  color: #545454 !important;\n}\n\n.sidebar-window-button-full {\n  display: inline-block;\n  margin-top: 0px;\n  height: 32px;\n  border: 1px solid rgb(75, 74, 74);\n  cursor: pointer;\n  border-radius: 4px;\n  font-size: 12px;\n  padding: 8px 16px;\n  box-sizing: border-box;\n  background: white;\n  color: black;\n}\n\n.sidebar-window-button-full:hover {\n  background: rgb(219, 219, 219);\n}\n\n.sidebar-form-label-2 {\n  display: inline-block;\n  text-transform: uppercase;\n  font-size: 12px;\n  width: 50%;\n  font-weight: 500px;\n  letter-spacing: 1px;\n  color: rgb(66, 69, 71);\n  margin-bottom: 3px;\n}\n\n/* Topology Edit Window */\n\n#sidebar-topology-window {\n  font-size: 0;\n}',""]),t.exports=e},function(t,e,n){var i=n(1),o=n(18);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);t.exports=o.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".atlas-editor-modal {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 1000;\n    width: 576px;\n    height: 400px;\n    background: white;\n    border-radius: 5px;\n    overflow: auto;\n    /* border: 1px solid #DEDEDE; */\n    box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\n}\n\n\n#editor-modal-header {\n    font-size: 28px;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n    font-weight: 400;\n    color: #3f4449;\n    /* background: rgba(129, 85, 255, 0.5); */\n    border-bottom: 1px solid #6f7983;\n    padding: 20px 10px 20px 20px;\n    position: relative;\n}\n\n#editor-modal-dismiss {\n    display: inline-block;\n    position: absolute;\n    font-size: 32px;\n    left: calc(100% - 20px);\n    top: 50%;\n    transform: translate(-100%, -50%);\n    cursor: pointer;\n}\n\n#editor-modal-dismiss:hover {\n    color: #727980;\n}\n\n#editor-modal-kv-wrapper {\n    margin-top: 20px;\n    width: 515px;\n    /* background: rgba(129, 85, 255, 0.5); */\n    position: relative;\n    left: 50%;\n    transform: translate(-50%, 0);\n    margin-bottom: 20px;\n}\n\n#editor-modal-kv-table {\n    width: 100%;\n}\n\n#editor-modal-kv-table th {\n    padding: 10px;\n    color: #3f4449;\n    text-align: left;\n    font-size: 16px;\n}\n\n.em-kv-value {\n    width: 270px;\n}\n\n.em-kv-value textarea {\n    resize: vertical;\n    min-height: 36px;\n    min-width: 270px;\n    outline: black !important;\n    color: black;\n    border-radius: 4px;\n}\n\n.em-kv-key {\n    width: 170px;\n}\n\n.em-kv-key input{\n    resize: vertical;\n    min-height: 36px;\n    max-width: 150px;\n    padding-left: 10px;\n    color: black;\n    background: white;\n    border-radius: 4px;\n    border: 1px solid rgb(75, 74, 74);\n}\n\n/* td {\n    border: 1px solid black;\n} */\n\n.em-delete-kv {\n    position: relative;\n    text-align: right;\n}\n\n.em-trashcan {\n    display: inline-block;\n    line-height: 100%;\n    box-sizing: border-box;\n    width: 24px;\n    height: 24px;\n    background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMWVtIiBoZWlnaHQ9IjFlbSIgdmlld0JveD0iMCAwIDE2IDE2IiBjbGFzcz0iYmkgYmktdHJhc2giIGZpbGw9IiMzZjQ0NDkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTUuNSA1LjVBLjUuNSAwIDAgMSA2IDZ2NmEuNS41IDAgMCAxLTEgMFY2YS41LjUgMCAwIDEgLjUtLjV6bTIuNSAwYS41LjUgMCAwIDEgLjUuNXY2YS41LjUgMCAwIDEtMSAwVjZhLjUuNSAwIDAgMSAuNS0uNXptMyAuNWEuNS41IDAgMCAwLTEgMHY2YS41LjUgMCAwIDAgMSAwVjZ6Ii8+CiAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuNSAzYTEgMSAwIDAgMS0xIDFIMTN2OWEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMlY0aC0uNWExIDEgMCAwIDEtMS0xVjJhMSAxIDAgMCAxIDEtMUg2YTEgMSAwIDAgMSAxLTFoMmExIDEgMCAwIDEgMSAxaDMuNWExIDEgMCAwIDEgMSAxdjF6TTQuMTE4IDRMNCA0LjA1OVYxM2ExIDEgMCAwIDAgMSAxaDZhMSAxIDAgMCAwIDEtMVY0LjA1OUwxMS44ODIgNEg0LjExOHpNMi41IDNWMmgxMXYxaC0xMXoiLz4KPC9zdmc+');\n    background-repeat: no-repeat;\n    background-size: cover;\n    cursor: pointer;\n}\n\n.em-trashcan:hover {\n    background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMWVtIiBoZWlnaHQ9IjFlbSIgdmlld0JveD0iMCAwIDE2IDE2IiBjbGFzcz0iYmkgYmktdHJhc2giIGZpbGw9IiM3Mjc5ODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTUuNSA1LjVBLjUuNSAwIDAgMSA2IDZ2NmEuNS41IDAgMCAxLTEgMFY2YS41LjUgMCAwIDEgLjUtLjV6bTIuNSAwYS41LjUgMCAwIDEgLjUuNXY2YS41LjUgMCAwIDEtMSAwVjZhLjUuNSAwIDAgMSAuNS0uNXptMyAuNWEuNS41IDAgMCAwLTEgMHY2YS41LjUgMCAwIDAgMSAwVjZ6Ii8+CiAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuNSAzYTEgMSAwIDAgMS0xIDFIMTN2OWEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMlY0aC0uNWExIDEgMCAwIDEtMS0xVjJhMSAxIDAgMCAxIDEtMUg2YTEgMSAwIDAgMSAxLTFoMmExIDEgMCAwIDEgMSAxaDMuNWExIDEgMCAwIDEgMSAxdjF6TTQuMTE4IDRMNCA0LjA1OVYxM2ExIDEgMCAwIDAgMSAxaDZhMSAxIDAgMCAwIDEtMVY0LjA1OUwxMS44ODIgNEg0LjExOHpNMi41IDNWMmgxMXYxaC0xMXoiLz4KPC9zdmc+');\n    background-repeat: no-repeat;\n    background-size: cover;\n}\n\n#editor-modal-add-kv, #editor-modal-save-kv {\n    user-select: none;\n    margin-top: 10px;\n    height: 36px;\n    background: #4048C9;\n    line-height: 36px;\n    padding: 5px 20px;\n    color: white;\n    display: inline-block;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 16px;\n    box-sizing: content-box;\n}\n\n#editor-modal-save-kv {\n    background: #0db14f;\n}\n\n#editor-modal-save-kv:hover {\n    background: #14cc5d;\n}\n\n#editor-modal-add-kv:hover {\n    background: #5761eb;\n}\n\n\n\n#editor-modal-tile-drop-area {\n    border: 2px dashed #ccc;\n    border-radius: 5px;\n    width: calc(100% - 40px);\n    font-family: sans-serif;\n    margin: 20px auto;\n    padding: 20px;\n    height: 280px;\n    box-sizing: border-box;\n    overflow-y: auto;\n    padding-top: 90px;\n}\n#editor-modal-tile-drop-area.highlight {\n    border-color: rgb(5, 125, 223);\n    background: rgb(202, 231, 255);\n}\n#editor-modal-tile-drop-area p {\n    margin-top: 0;\n    text-align: center;\n    font-size: 18px;\n    margin-bottom: 18px;\n}\n#editor-modal-tile-drop-area .my-form {\n    margin-bottom: 10px;\n    text-align: center;\n}\n#editor-modal-tile-drop-area .button {\n    width: 95px;\n    display: inline-block;\n    padding: 10px;\n    background: #ccc;\n    cursor: pointer;\n    border-radius: 5px;\n    border: 1px solid #ccc;\n    font-size: 16px;\n}\n#editor-modal-tile-drop-area .button:hover {\n    background: #ddd;\n}\n#atlas-modal-map-tile-input {\n    display: none;\n}\n\n#editor-modal-tile-drop-area #atlas-modal-map-tile-save.file-added {\n    background: rgb(13, 235, 124);\n    border: 1px solid rgb(13, 235, 124);\n}\n\n#editor-modal-tile-drop-area #atlas-modal-map-tile-save.file-added:hover {\n    background: rgb(9, 197, 103);\n}",""]),t.exports=e},function(t,e,n){var i=n(1),o=n(20);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);t.exports=o.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".leaflet-control-zoom-min {\n  text-indent: -999em;\n  background: #fff url(data:image/gif;base64,R0lGODlhGAAYAOZdACIiIiMjIy8vLyoqKsPDwzMzM0xMTDQ0NGlpaUtLS+Tk5J2dnXd3d7m5ueDg4GdnZykpKSYmJkpKSre3t09PT5eXl4KCgrCwsHNzc1lZWWhoaCcnJ5ubm3R0dFJSUp+fn1RUVJqamoODg8TExD09PYqKijo6OpGRkV1dXVFRUUNDQ3FxcZmZmYCAgEVFRXV1dSgoKIaGhlxcXEdHR5SUlMvLy5iYmNXV1VNTU7GxsbOzs9ra2jExMdbW1isrKywsLFtbW6qqqnh4eGpqat3d3XBwcI2NjWRkZLi4uL+/vyUlJZycnNvb297e3r6+vvf392VlZcbGxq2trWFhYWZmZszMzE5OTsDAwG1tbZWVlZaWlqGhod/f3////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAF0ALAAAAAAYABgAQAf/gF2Cg10KLFASAgISVBWEhFkAklaPlT0Rkpk2XRCZnj4oEwQknp4Dgw0BAFqPLZ0ZFJ4BDYICpSWEURNBpZ4Cgx+qvQAmgjs4AAEflV1XBckgShkJEQeeBUmPLwAezF0jKTqDGJkdXQaZLt5dTj/DCRq9MDldHgAbw5kPhdb5AAkXBpXAd0ABMyED8g1gsE6QAwwJhw3oQMQbB1UyRlSpQeDJAiClAoQg5OCZkUrPAGzpImJIpgJNBHWKIMUbF0FMGsTIdOpBphUNb5jo9cBWJgveLOQTgM6TihOCjkgq4s9AiGEUHFyoMMUfAA5dGHjFooEHDQSkMjEUREBYPiSDHEQkI1CJQL9SM5aAkHSAbsMuCxAYUGQAwQJvgQAAOw==) no-repeat scroll center center;\n  background-size: 12px 12px;\n}\n.leaflet-control-zoom-min:focus {\n  outline: 0;\n}\n\n.show-all-layers {\n  text-indent: -999em;\n  background: #fff url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAABxVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADpqD2QAAAAlnRSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRocHR4gIiMkJSYoKSorLS4vMTI0NTY4OTo7PD4/QEFCRklLTFBRVFVWV1hZXV5fYWNnaWtsbW9wcXV3eXt+f4CCg4aLjJGUlZeam56io6Wmqqutr7K0tbm6vL7AwcPFx8jKzM7P09XX2drc3uDi5Obo6evt7/Hz9ff5+/3tx//9AAADMElEQVQYGa3Bi1tTdRwG8Pd3zth2GtB0kDWDVnZB1MAuWpJ4ySyLstAoNSRlRjdEUslU5DIpmA7Y7f1749kz/X13Odu5fT5w6MVuBOpgoXAAwVHj3DGuEJDILVbciiAQfVlWZfsQgBMURuGXeZ01rhnwJb7EOktx+DBUZIPiu/BKXWRTFxQ8if5FG/MReND/lLae9MO1U2zpFNwx02xj2oQLu1fY1vIuODZcpAPFYTijJujQ9woORG/TsdtRtJXK0YXca2jjM7p0Bq2EbtC1GyZsJVbpwWoCNj4o0ZPS+2hG/UjPflBoYC3Qh7sW6ryxSV9yr6PGWfp2FlpohgH4JYSq3scMxOMeVFgFBqRgoSKxykCsJlBlphmAaRPaSfo2ihp9WfqysRd1InP0YTaMBuo8PRtDU/vz9GT7HdjoekgP/onBlnGVrv2k0MpIma6UP0Ybr/xHF9Z60VbHn3Ts1xCcGKNDX8ChgW06sLkPjnU+ZFt/v4CWzMMQjKts45KCMBxCnUSGPxsQRthK6QgEY4qZHtT4sETyUTeE5DptZXogdC2SLB2Bpi6zIj8IITxLGzMhCAN5VlxRqIrd4zNjkL5hU59D+orP3Iuhwtqi9kcHhME8G2zug9DxO7UtCxWpHLV/90DoWmSdBQvCS2vUcilUWXeolT+CYEyxxmUF4WiZ2p0onlMTFK4oCMeplY9CUJcoTChI75WoLVgQkuusWuuFYN2lVjyMOrtXqOVSEMI3WfFbCEIqR21lFxqYaQpnIJ3nji8hfUohbaKZ0xTSJoTB/PbbEMxpCqdho/8pteU4hK5OCPFlak/6YSs6T614CDYOFanNR9CCukhhXKEJNU7hgkJrQ0Vqc2E0CN+kVhhCW/ElahtJ1EluUFuKwwHzOoUR1BihcM2AMycoTBp4zpikMArHXs1Sux9DVew+texeuBCZo7b1Jire2qI2F4Er6jsK57DjHIVvFdw6WKA2EwrNUCscgAfdj6hlMtQWu+GJMcWmpgx4dZxNfAIfkuuss56EL+FZ1pjtgF9fUxhDAPbnWbU9gEB0PmDFg04ExJjkjkkDwTlWLh9DoF7eA2f+B+bLhpSCyxx7AAAAAElFTkSuQmCC) no-repeat scroll center center;\n  background-size: 12px 12px;\n}\n.show-all-layers:focus {\n  outline: 0;\n}\n\n.hide-all-layers {\n  text-indent: -999em;\n  background: #fff url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAB5lBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9+he+AAAAoXRSTlMAAQIDBAUGBwgKCwwNDg8SExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdKS0xNT1BSVFVXWFlbXF1fYWJjZGZnaGlrbG1vcHFzdHd4eXuCg4WGiImLjI6PkZKVoKKjpaaoqqutr7K0t7m8wcPFx8jKzM7P2drc3uDi5Obo6evv8fP19/n7/alepLsAAAOTSURBVFjDtdj3XxMxFADwa6HsqSIgggPZZSgCoigqguIAFCcOcKG4LYqiCIjIXhYQKKXX/Ke25Uhf7nIZcOa3Ju++n7tr7uUlivJf2sc6iz2ETlnpuVCgnbTO60XIUtGFtFbLCLK96rGJgiVbIDphGhM7htDvWOvEfE9wdC1XXqyhjt/ZGr5liegYwKPoW6SgWIwvqdYPpbkRaH92SYtV5ECDHxHNX78j0f4BGdob2/bFyClEaRNxsuJx3HeNBiJPgZhYJCyie7JiJU8ccEiKx3jiYprVov+8mIin3VGeiN7b5cQKrjgVb7W4XiwA2kZwfDlXRA+4Xuw4CC/ji0Oc+ZO7RoQLiEvpLK9dH17KF1GjKRfRZ4x2Coguk/mTPEeLFhFnEmlelY8eLSJ6S42z5blpdImAiLp0XvQv81gxcTgKelkriNWKRcTlTPC8XxC7FYmIX+Fi07ZzUVcF5KzuTPTk6f/m6BEm6GeL45SV0PaELRYyxNf0tbp8gykWmInm1UTizHZE9x7zbGPvlRc5K2oTU8w3itw1P31JRlwXqEqihlhiHiFOitVND1niESC+s4vVOIrTKyRmiO9dEhjzx5+rbKPZXVJiAhXJbhOcPwbxLmqgeK0I9cNdQ/qyoBiaFs16LjK0hM6nwMBhU1E9DLL931BXC+mlzmuRxO6sU0Rs1bpuwitPqzj0JcxEpabzRz1kEO+DC7tA6GiMUP5RD+rFZ/AWy0AqXM2G8+cT6Yx1moiqbpuYOAuuugJHLkHvhU25ThXdqcxU+Bl+pBl4/nhDhXdYPIBjamlJ8SIQZ2H5E/Vzs3NS+yBuUERuKvQ64fr1ONgVPnXAZaSaI5EKH5Hrl6+GtsdXsyVSIVE+JyWBHzGjSFiEqdBs+0WUVj6emDANksA5WkQzOTO5IrGLN27fjSstV1QugHOGcd3xT/y08Sv07eeJaYvhaPL4p2A9PLLSLi46foAbaKdMl0AbiVacWMziLiod4NK+CC0J94POp8G3WyYhFoKHm0sO9qTMh3s2tK1qhYQYNwFee5Wi1Ki0T70Sh+zjL6VvwRN2d4MfvSAZVeOb5ovKWT81WTcRQbUy4m435Txkry6oDouZfNHxXe8NGlNpvYyo3Ca9DlpMg5SY5wGnFoX0mEZ8YilSOAVPdHnnctpKNihWMNp6mLuRULss4WmVhXqGGXJVxgvUPgsLqZyQFhkvkBj458ObL+QfQVsvZMsdYccAAAAASUVORK5CYII=) no-repeat scroll center center;\n  background-size: 12px 12px;\n}\n.hide-all-layers:focus {\n  outline: 0;\n}\n\n.atlas-toggle-editor {\n  background: #fff url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDM4My45NDcgMzgzLjk0NyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzgzLjk0NyAzODMuOTQ3OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij4KPGc+Cgk8Zz4KCQk8Zz4KCQkJPHBvbHlnb24gcG9pbnRzPSIwLDMwMy45NDcgMCwzODMuOTQ3IDgwLDM4My45NDcgMzE2LjA1MywxNDcuODkzIDIzNi4wNTMsNjcuODkzICAgICIgZmlsbD0iIzAwMDAwMCIvPgoJCQk8cGF0aCBkPSJNMzc3LjcwNyw1Ni4wNTNMMzI3Ljg5Myw2LjI0Yy04LjMyLTguMzItMjEuODY3LTguMzItMzAuMTg3LDBsLTM5LjA0LDM5LjA0bDgwLDgwbDM5LjA0LTM5LjA0ICAgICBDMzg2LjAyNyw3Ny45MiwzODYuMDI3LDY0LjM3MywzNzcuNzA3LDU2LjA1M3oiIGZpbGw9IiMwMDAwMDAiLz4KCQk8L2c+Cgk8L2c+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==) no-repeat scroll center center;\n  background-size: 12px 12px;\n}\n\n.atlas-no-select{\n  -webkit-user-select: none;  /* Chrome all / Safari all */\n  -moz-user-select: none;     /* Firefox all */\n  -ms-user-select: none;      /* IE 10+ */\n}\n",""]),t.exports=e},function(t,e,n){var i=n(1),o=n(22);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);t.exports=o.locals||{}},function(t,e,n){var i=n(2),o=n(23),a=n(24),s=n(25),r=n(26);e=i(!1);var l=o(a),h=o(s),c=o(r);e.push([t.i,"/* required styles */\r\n\r\n.leaflet-pane,\r\n.leaflet-tile,\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow,\r\n.leaflet-tile-container,\r\n.leaflet-pane > svg,\r\n.leaflet-pane > canvas,\r\n.leaflet-zoom-box,\r\n.leaflet-image-layer,\r\n.leaflet-layer {\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\t}\r\n.leaflet-container {\r\n\toverflow: hidden;\r\n\t}\r\n.leaflet-tile,\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow {\r\n\t-webkit-user-select: none;\r\n\t   -moz-user-select: none;\r\n\t        user-select: none;\r\n\t  -webkit-user-drag: none;\r\n\t}\r\n/* Prevents IE11 from highlighting tiles in blue */\r\n.leaflet-tile::selection {\r\n\tbackground: transparent;\r\n}\r\n/* Safari renders non-retina tile on retina better with this, but Chrome is worse */\r\n.leaflet-safari .leaflet-tile {\r\n\timage-rendering: -webkit-optimize-contrast;\r\n\t}\r\n/* hack that prevents hw layers \"stretching\" when loading new tiles */\r\n.leaflet-safari .leaflet-tile-container {\r\n\twidth: 1600px;\r\n\theight: 1600px;\r\n\t-webkit-transform-origin: 0 0;\r\n\t}\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow {\r\n\tdisplay: block;\r\n\t}\r\n/* .leaflet-container svg: reset svg max-width decleration shipped in Joomla! (joomla.org) 3.x */\r\n/* .leaflet-container img: map is broken in FF if you have max-width: 100% on tiles */\r\n.leaflet-container .leaflet-overlay-pane svg,\r\n.leaflet-container .leaflet-marker-pane img,\r\n.leaflet-container .leaflet-shadow-pane img,\r\n.leaflet-container .leaflet-tile-pane img,\r\n.leaflet-container img.leaflet-image-layer,\r\n.leaflet-container .leaflet-tile {\r\n\tmax-width: none !important;\r\n\tmax-height: none !important;\r\n\t}\r\n\r\n.leaflet-container.leaflet-touch-zoom {\r\n\t-ms-touch-action: pan-x pan-y;\r\n\ttouch-action: pan-x pan-y;\r\n\t}\r\n.leaflet-container.leaflet-touch-drag {\r\n\t-ms-touch-action: pinch-zoom;\r\n\t/* Fallback for FF which doesn't support pinch-zoom */\r\n\ttouch-action: none;\r\n\ttouch-action: pinch-zoom;\r\n}\r\n.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom {\r\n\t-ms-touch-action: none;\r\n\ttouch-action: none;\r\n}\r\n.leaflet-container {\r\n\t-webkit-tap-highlight-color: transparent;\r\n}\r\n.leaflet-container a {\r\n\t-webkit-tap-highlight-color: rgba(51, 181, 229, 0.4);\r\n}\r\n.leaflet-tile {\r\n\tfilter: inherit;\r\n\tvisibility: hidden;\r\n\t}\r\n.leaflet-tile-loaded {\r\n\tvisibility: inherit;\r\n\t}\r\n.leaflet-zoom-box {\r\n\twidth: 0;\r\n\theight: 0;\r\n\t-moz-box-sizing: border-box;\r\n\t     box-sizing: border-box;\r\n\tz-index: 800;\r\n\t}\r\n/* workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=888319 */\r\n.leaflet-overlay-pane svg {\r\n\t-moz-user-select: none;\r\n\t}\r\n\r\n.leaflet-pane         { z-index: 400; }\r\n\r\n.leaflet-tile-pane    { z-index: 200; }\r\n.leaflet-overlay-pane { z-index: 400; }\r\n.leaflet-shadow-pane  { z-index: 500; }\r\n.leaflet-marker-pane  { z-index: 600; }\r\n.leaflet-tooltip-pane   { z-index: 650; }\r\n.leaflet-popup-pane   { z-index: 700; }\r\n\r\n.leaflet-map-pane canvas { z-index: 100; }\r\n.leaflet-map-pane svg    { z-index: 200; }\r\n\r\n.leaflet-vml-shape {\r\n\twidth: 1px;\r\n\theight: 1px;\r\n\t}\r\n.lvml {\r\n\tbehavior: url(#default#VML);\r\n\tdisplay: inline-block;\r\n\tposition: absolute;\r\n\t}\r\n\r\n\r\n/* control positioning */\r\n\r\n.leaflet-control {\r\n\tposition: relative;\r\n\tz-index: 800;\r\n\tpointer-events: visiblePainted; /* IE 9-10 doesn't have auto */\r\n\tpointer-events: auto;\r\n\t}\r\n.leaflet-top,\r\n.leaflet-bottom {\r\n\tposition: absolute;\r\n\tz-index: 1000;\r\n\tpointer-events: none;\r\n\t}\r\n.leaflet-top {\r\n\ttop: 0;\r\n\t}\r\n.leaflet-right {\r\n\tright: 0;\r\n\t}\r\n.leaflet-bottom {\r\n\tbottom: 0;\r\n\t}\r\n.leaflet-left {\r\n\tleft: 0;\r\n\t}\r\n.leaflet-control {\r\n\tfloat: left;\r\n\tclear: both;\r\n\t}\r\n.leaflet-right .leaflet-control {\r\n\tfloat: right;\r\n\t}\r\n.leaflet-top .leaflet-control {\r\n\tmargin-top: 10px;\r\n\t}\r\n.leaflet-bottom .leaflet-control {\r\n\tmargin-bottom: 10px;\r\n\t}\r\n.leaflet-left .leaflet-control {\r\n\tmargin-left: 10px;\r\n\t}\r\n.leaflet-right .leaflet-control {\r\n\tmargin-right: 10px;\r\n\t}\r\n\r\n\r\n/* zoom and fade animations */\r\n\r\n.leaflet-fade-anim .leaflet-tile {\r\n\twill-change: opacity;\r\n\t}\r\n.leaflet-fade-anim .leaflet-popup {\r\n\topacity: 0;\r\n\t-webkit-transition: opacity 0.2s linear;\r\n\t   -moz-transition: opacity 0.2s linear;\r\n\t        transition: opacity 0.2s linear;\r\n\t}\r\n.leaflet-fade-anim .leaflet-map-pane .leaflet-popup {\r\n\topacity: 1;\r\n\t}\r\n.leaflet-zoom-animated {\r\n\t-webkit-transform-origin: 0 0;\r\n\t    -ms-transform-origin: 0 0;\r\n\t        transform-origin: 0 0;\r\n\t}\r\n.leaflet-zoom-anim .leaflet-zoom-animated {\r\n\twill-change: transform;\r\n\t}\r\n.leaflet-zoom-anim .leaflet-zoom-animated {\r\n\t-webkit-transition: -webkit-transform 0.25s cubic-bezier(0,0,0.25,1);\r\n\t   -moz-transition:    -moz-transform 0.25s cubic-bezier(0,0,0.25,1);\r\n\t        transition:         transform 0.25s cubic-bezier(0,0,0.25,1);\r\n\t}\r\n.leaflet-zoom-anim .leaflet-tile,\r\n.leaflet-pan-anim .leaflet-tile {\r\n\t-webkit-transition: none;\r\n\t   -moz-transition: none;\r\n\t        transition: none;\r\n\t}\r\n\r\n.leaflet-zoom-anim .leaflet-zoom-hide {\r\n\tvisibility: hidden;\r\n\t}\r\n\r\n\r\n/* cursors */\r\n\r\n.leaflet-interactive {\r\n\tcursor: pointer;\r\n\t}\r\n.leaflet-grab {\r\n\tcursor: -webkit-grab;\r\n\tcursor:    -moz-grab;\r\n\tcursor:         grab;\r\n\t}\r\n.leaflet-crosshair,\r\n.leaflet-crosshair .leaflet-interactive {\r\n\tcursor: crosshair;\r\n\t}\r\n.leaflet-popup-pane,\r\n.leaflet-control {\r\n\tcursor: auto;\r\n\t}\r\n.leaflet-dragging .leaflet-grab,\r\n.leaflet-dragging .leaflet-grab .leaflet-interactive,\r\n.leaflet-dragging .leaflet-marker-draggable {\r\n\tcursor: move;\r\n\tcursor: -webkit-grabbing;\r\n\tcursor:    -moz-grabbing;\r\n\tcursor:         grabbing;\r\n\t}\r\n\r\n/* marker & overlays interactivity */\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow,\r\n.leaflet-image-layer,\r\n.leaflet-pane > svg path,\r\n.leaflet-tile-container {\r\n\tpointer-events: none;\r\n\t}\r\n\r\n.leaflet-marker-icon.leaflet-interactive,\r\n.leaflet-image-layer.leaflet-interactive,\r\n.leaflet-pane > svg path.leaflet-interactive,\r\nsvg.leaflet-image-layer.leaflet-interactive path {\r\n\tpointer-events: visiblePainted; /* IE 9-10 doesn't have auto */\r\n\tpointer-events: auto;\r\n\t}\r\n\r\n/* visual tweaks */\r\n\r\n.leaflet-container {\r\n\tbackground: #ddd;\r\n\toutline: 0;\r\n\t}\r\n.leaflet-container a {\r\n\tcolor: #0078A8;\r\n\t}\r\n.leaflet-container a.leaflet-active {\r\n\toutline: 2px solid orange;\r\n\t}\r\n.leaflet-zoom-box {\r\n\tborder: 2px dotted #38f;\r\n\tbackground: rgba(255,255,255,0.5);\r\n\t}\r\n\r\n\r\n/* general typography */\r\n.leaflet-container {\r\n\tfont: 12px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif;\r\n\t}\r\n\r\n\r\n/* general toolbar styles */\r\n\r\n.leaflet-bar {\r\n\tbox-shadow: 0 1px 5px rgba(0,0,0,0.65);\r\n\tborder-radius: 4px;\r\n\t}\r\n.leaflet-bar a,\r\n.leaflet-bar a:hover {\r\n\tbackground-color: #fff;\r\n\tborder-bottom: 1px solid #ccc;\r\n\twidth: 26px;\r\n\theight: 26px;\r\n\tline-height: 26px;\r\n\tdisplay: block;\r\n\ttext-align: center;\r\n\ttext-decoration: none;\r\n\tcolor: black;\r\n\t}\r\n.leaflet-bar a,\r\n.leaflet-control-layers-toggle {\r\n\tbackground-position: 50% 50%;\r\n\tbackground-repeat: no-repeat;\r\n\tdisplay: block;\r\n\t}\r\n.leaflet-bar a:hover {\r\n\tbackground-color: #f4f4f4;\r\n\t}\r\n.leaflet-bar a:first-child {\r\n\tborder-top-left-radius: 4px;\r\n\tborder-top-right-radius: 4px;\r\n\t}\r\n.leaflet-bar a:last-child {\r\n\tborder-bottom-left-radius: 4px;\r\n\tborder-bottom-right-radius: 4px;\r\n\tborder-bottom: none;\r\n\t}\r\n.leaflet-bar a.leaflet-disabled {\r\n\tcursor: default;\r\n\tbackground-color: #f4f4f4;\r\n\tcolor: #bbb;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-bar a {\r\n\twidth: 30px;\r\n\theight: 30px;\r\n\tline-height: 30px;\r\n\t}\r\n.leaflet-touch .leaflet-bar a:first-child {\r\n\tborder-top-left-radius: 2px;\r\n\tborder-top-right-radius: 2px;\r\n\t}\r\n.leaflet-touch .leaflet-bar a:last-child {\r\n\tborder-bottom-left-radius: 2px;\r\n\tborder-bottom-right-radius: 2px;\r\n\t}\r\n\r\n/* zoom control */\r\n\r\n.leaflet-control-zoom-in,\r\n.leaflet-control-zoom-out {\r\n\tfont: bold 18px 'Lucida Console', Monaco, monospace;\r\n\ttext-indent: 1px;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-control-zoom-in, .leaflet-touch .leaflet-control-zoom-out  {\r\n\tfont-size: 22px;\r\n\t}\r\n\r\n\r\n/* layers control */\r\n\r\n.leaflet-control-layers {\r\n\tbox-shadow: 0 1px 5px rgba(0,0,0,0.4);\r\n\tbackground: #fff;\r\n\tborder-radius: 5px;\r\n\t}\r\n.leaflet-control-layers-toggle {\r\n\tbackground-image: url("+l+");\r\n\twidth: 36px;\r\n\theight: 36px;\r\n\t}\r\n.leaflet-retina .leaflet-control-layers-toggle {\r\n\tbackground-image: url("+h+");\r\n\tbackground-size: 26px 26px;\r\n\t}\r\n.leaflet-touch .leaflet-control-layers-toggle {\r\n\twidth: 44px;\r\n\theight: 44px;\r\n\t}\r\n.leaflet-control-layers .leaflet-control-layers-list,\r\n.leaflet-control-layers-expanded .leaflet-control-layers-toggle {\r\n\tdisplay: none;\r\n\t}\r\n.leaflet-control-layers-expanded .leaflet-control-layers-list {\r\n\tdisplay: block;\r\n\tposition: relative;\r\n\t}\r\n.leaflet-control-layers-expanded {\r\n\tpadding: 6px 10px 6px 6px;\r\n\tcolor: #333;\r\n\tbackground: #fff;\r\n\t}\r\n.leaflet-control-layers-scrollbar {\r\n\toverflow-y: scroll;\r\n\toverflow-x: hidden;\r\n\tpadding-right: 5px;\r\n\t}\r\n.leaflet-control-layers-selector {\r\n\tmargin-top: 2px;\r\n\tposition: relative;\r\n\ttop: 1px;\r\n\t}\r\n.leaflet-control-layers label {\r\n\tdisplay: block;\r\n\t}\r\n.leaflet-control-layers-separator {\r\n\theight: 0;\r\n\tborder-top: 1px solid #ddd;\r\n\tmargin: 5px -10px 5px -6px;\r\n\t}\r\n\r\n/* Default icon URLs */\r\n.leaflet-default-icon-path {\r\n\tbackground-image: url("+c+');\r\n\t}\r\n\r\n\r\n/* attribution and scale controls */\r\n\r\n.leaflet-container .leaflet-control-attribution {\r\n\tbackground: #fff;\r\n\tbackground: rgba(255, 255, 255, 0.7);\r\n\tmargin: 0;\r\n\t}\r\n.leaflet-control-attribution,\r\n.leaflet-control-scale-line {\r\n\tpadding: 0 5px;\r\n\tcolor: #333;\r\n\t}\r\n.leaflet-control-attribution a {\r\n\ttext-decoration: none;\r\n\t}\r\n.leaflet-control-attribution a:hover {\r\n\ttext-decoration: underline;\r\n\t}\r\n.leaflet-container .leaflet-control-attribution,\r\n.leaflet-container .leaflet-control-scale {\r\n\tfont-size: 11px;\r\n\t}\r\n.leaflet-left .leaflet-control-scale {\r\n\tmargin-left: 5px;\r\n\t}\r\n.leaflet-bottom .leaflet-control-scale {\r\n\tmargin-bottom: 5px;\r\n\t}\r\n.leaflet-control-scale-line {\r\n\tborder: 2px solid #777;\r\n\tborder-top: none;\r\n\tline-height: 1.1;\r\n\tpadding: 2px 5px 1px;\r\n\tfont-size: 11px;\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\t-moz-box-sizing: border-box;\r\n\t     box-sizing: border-box;\r\n\r\n\tbackground: #fff;\r\n\tbackground: rgba(255, 255, 255, 0.5);\r\n\t}\r\n.leaflet-control-scale-line:not(:first-child) {\r\n\tborder-top: 2px solid #777;\r\n\tborder-bottom: none;\r\n\tmargin-top: -2px;\r\n\t}\r\n.leaflet-control-scale-line:not(:first-child):not(:last-child) {\r\n\tborder-bottom: 2px solid #777;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-control-attribution,\r\n.leaflet-touch .leaflet-control-layers,\r\n.leaflet-touch .leaflet-bar {\r\n\tbox-shadow: none;\r\n\t}\r\n.leaflet-touch .leaflet-control-layers,\r\n.leaflet-touch .leaflet-bar {\r\n\tborder: 2px solid rgba(0,0,0,0.2);\r\n\tbackground-clip: padding-box;\r\n\t}\r\n\r\n\r\n/* popup */\r\n\r\n.leaflet-popup {\r\n\tposition: absolute;\r\n\ttext-align: center;\r\n\tmargin-bottom: 20px;\r\n\t}\r\n.leaflet-popup-content-wrapper {\r\n\tpadding: 1px;\r\n\ttext-align: left;\r\n\tborder-radius: 12px;\r\n\t}\r\n.leaflet-popup-content {\r\n\tmargin: 13px 19px;\r\n\tline-height: 1.4;\r\n\t}\r\n.leaflet-popup-content p {\r\n\tmargin: 18px 0;\r\n\t}\r\n.leaflet-popup-tip-container {\r\n\twidth: 40px;\r\n\theight: 20px;\r\n\tposition: absolute;\r\n\tleft: 50%;\r\n\tmargin-left: -20px;\r\n\toverflow: hidden;\r\n\tpointer-events: none;\r\n\t}\r\n.leaflet-popup-tip {\r\n\twidth: 17px;\r\n\theight: 17px;\r\n\tpadding: 1px;\r\n\r\n\tmargin: -10px auto 0;\r\n\r\n\t-webkit-transform: rotate(45deg);\r\n\t   -moz-transform: rotate(45deg);\r\n\t    -ms-transform: rotate(45deg);\r\n\t        transform: rotate(45deg);\r\n\t}\r\n.leaflet-popup-content-wrapper,\r\n.leaflet-popup-tip {\r\n\tbackground: white;\r\n\tcolor: #333;\r\n\tbox-shadow: 0 3px 14px rgba(0,0,0,0.4);\r\n\t}\r\n.leaflet-container a.leaflet-popup-close-button {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tpadding: 4px 4px 0 0;\r\n\tborder: none;\r\n\ttext-align: center;\r\n\twidth: 18px;\r\n\theight: 14px;\r\n\tfont: 16px/14px Tahoma, Verdana, sans-serif;\r\n\tcolor: #c3c3c3;\r\n\ttext-decoration: none;\r\n\tfont-weight: bold;\r\n\tbackground: transparent;\r\n\t}\r\n.leaflet-container a.leaflet-popup-close-button:hover {\r\n\tcolor: #999;\r\n\t}\r\n.leaflet-popup-scrolled {\r\n\toverflow: auto;\r\n\tborder-bottom: 1px solid #ddd;\r\n\tborder-top: 1px solid #ddd;\r\n\t}\r\n\r\n.leaflet-oldie .leaflet-popup-content-wrapper {\r\n\t-ms-zoom: 1;\r\n\t}\r\n.leaflet-oldie .leaflet-popup-tip {\r\n\twidth: 24px;\r\n\tmargin: 0 auto;\r\n\r\n\t-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";\r\n\tfilter: progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678);\r\n\t}\r\n.leaflet-oldie .leaflet-popup-tip-container {\r\n\tmargin-top: -1px;\r\n\t}\r\n\r\n.leaflet-oldie .leaflet-control-zoom,\r\n.leaflet-oldie .leaflet-control-layers,\r\n.leaflet-oldie .leaflet-popup-content-wrapper,\r\n.leaflet-oldie .leaflet-popup-tip {\r\n\tborder: 1px solid #999;\r\n\t}\r\n\r\n\r\n/* div icon */\r\n\r\n.leaflet-div-icon {\r\n\tbackground: #fff;\r\n\tborder: 1px solid #666;\r\n\t}\r\n\r\n\r\n/* Tooltip */\r\n/* Base styles for the element that has a tooltip */\r\n.leaflet-tooltip {\r\n\tposition: absolute;\r\n\tpadding: 6px;\r\n\tbackground-color: #fff;\r\n\tborder: 1px solid #fff;\r\n\tborder-radius: 3px;\r\n\tcolor: #222;\r\n\twhite-space: nowrap;\r\n\t-webkit-user-select: none;\r\n\t-moz-user-select: none;\r\n\t-ms-user-select: none;\r\n\tuser-select: none;\r\n\tpointer-events: none;\r\n\tbox-shadow: 0 1px 3px rgba(0,0,0,0.4);\r\n\t}\r\n.leaflet-tooltip.leaflet-clickable {\r\n\tcursor: pointer;\r\n\tpointer-events: auto;\r\n\t}\r\n.leaflet-tooltip-top:before,\r\n.leaflet-tooltip-bottom:before,\r\n.leaflet-tooltip-left:before,\r\n.leaflet-tooltip-right:before {\r\n\tposition: absolute;\r\n\tpointer-events: none;\r\n\tborder: 6px solid transparent;\r\n\tbackground: transparent;\r\n\tcontent: "";\r\n\t}\r\n\r\n/* Directions */\r\n\r\n.leaflet-tooltip-bottom {\r\n\tmargin-top: 6px;\r\n}\r\n.leaflet-tooltip-top {\r\n\tmargin-top: -6px;\r\n}\r\n.leaflet-tooltip-bottom:before,\r\n.leaflet-tooltip-top:before {\r\n\tleft: 50%;\r\n\tmargin-left: -6px;\r\n\t}\r\n.leaflet-tooltip-top:before {\r\n\tbottom: 0;\r\n\tmargin-bottom: -12px;\r\n\tborder-top-color: #fff;\r\n\t}\r\n.leaflet-tooltip-bottom:before {\r\n\ttop: 0;\r\n\tmargin-top: -12px;\r\n\tmargin-left: -6px;\r\n\tborder-bottom-color: #fff;\r\n\t}\r\n.leaflet-tooltip-left {\r\n\tmargin-left: -6px;\r\n}\r\n.leaflet-tooltip-right {\r\n\tmargin-left: 6px;\r\n}\r\n.leaflet-tooltip-left:before,\r\n.leaflet-tooltip-right:before {\r\n\ttop: 50%;\r\n\tmargin-top: -6px;\r\n\t}\r\n.leaflet-tooltip-left:before {\r\n\tright: 0;\r\n\tmargin-right: -12px;\r\n\tborder-left-color: #fff;\r\n\t}\r\n.leaflet-tooltip-right:before {\r\n\tleft: 0;\r\n\tmargin-left: -12px;\r\n\tborder-right-color: #fff;\r\n\t}\r\n',""]),t.exports=e},function(t,e,n){"use strict";t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},function(t,e,n){t.exports=n.p+"a6137456ed160d7606981aa57c559898.png"},function(t,e,n){t.exports=n.p+"4f0283c6ce28e888000e978e537a6a56.png"},function(t,e,n){t.exports=n.p+"2273e3d8ad9264b7daa5bdbf8e6b47f8.png"},function(t,e,n){var i=n(1),o=n(28);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);t.exports=o.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".leaflet-popup-tip-container, .leaflet-popup-close-button {\n    opacity: 0;\n}\n\n.leaflet-popup-content {\n    margin: 0;\n}\n.leaflet-popup-content-wrapper,\n.leaflet-popup-tip {\n    border-radius: 0 !important;\n    box-shadow: none;\n    background: none;\n    /* background: linear-gradient(135deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.6) 50%) !important;\n    color: white !important; */\n}\n\n.atlas4-tt-container * {\n    margin: 0;\n}\n/*\n.leaflet-popup-content-wrapper {\n    padding: 0.5rem;\n} */\n/* \n.leaflet-popup-content {\n    margin: 0 !important;\n}\n\n.atlas4-tt {\n}\n\n.atlas4-tt-container {\n    margin:0 auto;\n    padding:0;\n    display:flex;\n    flex-flow:column nowrap;\n    width:auto;\n    height:100%;\n}\n\n.atlas4-tt-image {\n    display: flex;\n    align-items:center;\n    justify-content:center;\n    height: 78%;\n    max-height: 100px;\n    width: 100%;\n    padding:5px;\n    object-fit: contain;\n    left: 0;\n    bottom: 10%;\n}\n\n.atlas4-tt-topology,\n.atlas4-tt-label {\n    text-align: center !important;\n}\n\n.atlas4-tt-topology {\n    border-bottom: 1px solid white;\n}\n\n.atlas4-tt-label {\n    font-style: italic;\n}\n\n.atlas4-tt-columns {\n    margin:0; \n    padding:0 0 0.5rem 0; \n    display:flex;\n    flex-flow:row nowrap;\n    align-items:center;\n    justify-content:center;\n    width:100%;\n}\n\n.atlas4-tt-column {\n    margin:0 10px; \n    display:flex; \n    flex-flow:column nowrap; \n    align-items: center; \n    width:48%;\n}\n\n.atlas4-tt-column-header {\n}\n\n.atlas4-tt-data {\n    margin: 0 !important;\n    color: white !important;\n    font-size: 0.9rem !important;\n\n}\n\n.atlas4-tt-column-line {\n    width: 48%;\n}\n\n.atlas4-tt-column-point {\n    width: 100%;\n} */\n",""]),t.exports=e},function(t,e,n){var i=n(1),o=n(30);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var a={insert:"head",singleton:!1};i(o,a);t.exports=o.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".atlas4-loader {\n    height: 100%;\n    width: 100%;\n    background: #101117;\n    z-index: 9999;\n    position: absolute;\n}\n\n.atlas4-loader div {\n    height: 100px;\n    width: 100px;\n    display: inline-block;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n}",""]),t.exports=e},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return xt}));var i=n(0),o=n.n(i),a=n(4),s=n.n(a);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=this.defaults,this.dataTarget=this.options.dataTarget,this.point=n.endpoints[e],this.map=n.map,this.endpoint=n.endpoints,this.endpoint[e].name=e,this.image=n.image,this.topology=n.name,this.options=n.options.pointOptions||this.defaults,this.legend=n.options.legends.points,this.point.lng>20&&!n.tile&&(this.point.lng=this.point.lng-360),this.coord=[Number(this.point.lat),Number(this.point.lng)],this.id=this.point.id||this.generateID(6),this.point.id=this.id,this.target=this.point.targets,this.label=this.point.label||e,this.min=this.point.min||this.options.min,this.max=this.point.max||this.options.max,this.shape=this.point.shape||this.options.shape||"circle",this.size=this.point.size||this.options.size||6,this.stroke=this.point.stroke||this.options.stroke||void 0,this.color=this.point.color||this.options.color||void 0,this.fill=this.point.fill||this.options.fill||"#000000",this.opacity=this.point.fillOpacity||this.options.fillOpacity||1,this.staticTooltip=this.options.staticTooltip||!1,this.options={radius:this.size,shape:this.shape,color:this.color,stroke:this.stroke,fillColor:this.fill,fillOpacity:this.opacity,staticTooltip:this.staticTooltip},this.data={label:this.label},this.color=this._color(),this.layer=this._createLayer(),this.tooltip=new A(this),console.debug("Point made at ".concat(this.coord," for ").concat(this.label))}var e,n,i;return e=t,(n=[{key:"get",value:function(t){return this[t]}},{key:"set",value:function(t,e){this[t]=e,this.update(t)}},{key:"update",value:function(t){"data"===t&&(this.tooltip.set("data",this.data),this.data.label=this.label),this.options={radius:this.size,shape:this.shape,color:this.color,stroke:this.stroke,fillColor:this.fill,fillOpacity:this.opacity,opacity:this.opacity},this.layer.setStyle(this.options)}},{key:"properties",value:function(){return Object.entries(this)}},{key:"show",value:function(){this.remove(),this.layer=this._createLayer(),this.layer.addTo(this.map)}},{key:"hide",value:function(){this.layer._path.style.display="none"}},{key:"remove",value:function(){this.layer&&(this.layer.remove(),this.layer=void 0)}},{key:"toggle",value:function(){"block"==this.layer._path.style.display?this.hide():this.show()}},{key:"_createLayer",value:function(){if("circle"===this.options.shape)return o.a.circleMarker(this.coord,this.options)}},{key:"_color",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"node.now",i=n.split(".");if(n)if(i.length<2)t=this.data[n];else for(var o=this.data,a=0;a<i.length;a++){if(!o){t=void 0;break}a===i.length-1?t=o[i[a]]:o=o[i[a]]}else t=void 0;return this.legend&&(e=this.legend.color(t,this.min,this.max)),e||(e=this.defaults.color),e}},{key:"hideToolTip",value:function(){this.tooltip.hide()}},{key:"showToolTip",value:function(){this.tooltip.show()}},{key:"makeStatic",value:function(t){this.staticTooltip=t,this.tooltip.makeStatic(t)}},{key:"generateID",value:function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*i));return e}}])&&r(e.prototype,n),i&&r(e,i),t}();n(10);function h(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),document.querySelector("#".concat(i," .atlas4-legends"))||console.error("Legend(ID:".concat(e,") created, but no parent container was initialized!")),this.orientation=n.orientation.toLowerCase()||"horizontal",this.size=n.size,this.position=n.position,n=n.legends[e],this.id=e,this.type=n.type.toLowerCase()||"percent",this.units=n.units,this.min=n.min,this.max=n.max,this.colors=n.colors,this.thresholds=n.thresholds||[],this.parentContainer=i,this.legend,this.colorBar,this.labelBar,"percent"===this.type&&(this.min=0,this.max=100,this.unit="%"),"absolute"===this.type&&(this.thresholds||console.error("Absolute value legend created but no thresholds were given!"),this.thresholds.length!=this.colors.length-1&&console.error("Absolute value legend has a wrong number of thresholds! (Number of colors minus one)")),this.expand,this._makeExpand(),this.flex,this._makeFlex(),this.legend,this._makeLegendContainer(),this.colorBar,this._makeColorBar(),this._addColorBar(),this.labelBar,this._makeLabelBar(),this._addLabelBar(),document.querySelector("#".concat(this.parentContainer," .atlas4-legends")).appendChild(this.legend)}var e,n,i;return e=t,i=[{key:"createParent",value:function(t,e){var n,i={top:"",bottom:"",left:"",right:"",flex:"column nowrap",size:e.size},o=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=c(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw a}}}}(e.position.split("-"));try{for(o.s();!(n=o.n()).done;){var a=n.value;if("center"===a){var s=(100-i.size.substring(0,i.size.length-1))/2;i.left=s+"%"}else i[a]="0"}}catch(t){o.e(t)}finally{o.f()}var r=document.createElement("div");"vertical"===e.orientation.toLowerCase()?(i.flex="row nowrap",r.style.height=e.size,r.style.marginLeft="5px"):(r.style.width=e.size,r.style.marginBottom="5px"),r.style["flex-flow"]=i.flex,r.style.top=i.top,r.style.bottom=i.bottom,r.style.left=i.left,r.style.right=i.right,r.style["z-index"]="400",r.classList.add("atlas4-legends"),document.getElementById(t).append(r)}}],(n=[{key:"get",value:function(t){return this[t]}},{key:"set",value:function(t,e){var n=t.split(".");if(1===n.length)this[t]=e,this.update(t);else for(var i=this,o=0;o<n.length;o++)o===n.length-1?(i[n[o]]=e,this.update(n[o])):i=i[n[o]]}},{key:"update",value:function(t){"colors"===t?this.reload():"orientation"===t&&(this._makeFlex(),this._makeExpand(),this.reload())}},{key:"properties",value:function(){return Object.entries(this)}},{key:"show",value:function(){this.legend.style.display="flex"}},{key:"hide",value:function(){this.legend.style.display="none"}},{key:"toggle",value:function(){"flex"==this.legend.style.display?this.hide():this.show()}},{key:"reload",value:function(){this._removeLabelBar(),this._removeColorBar(),this._makeLabelBar(),this._makeColorBar(),this._addColorBar(),this._addLabelBar()}},{key:"removeParent",value:function(){this.legend.parentNode.remove()}},{key:"rerender",value:function(){var e;this.removeParent(),t.createParent(this.parentContainer,(u(e={orientation:this.orientation,size:this.size},"orientation",this.orientation),u(e,"position",this.position),e)),this._makeExpand(),this._makeFlex(),this._makeLegendContainer(),this._makeLabelBar(),this._makeColorBar(),this._addColorBar(),this._addLabelBar(),document.querySelector("#".concat(this.parentContainer," .atlas4-legends")).appendChild(this.legend)}},{key:"color",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.min,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.max;if(null!=t)if(isNaN(t)&&console.warn("Value passed for coloration is not a number: ".concat(t)),"percent"==this.type){if(!n)return;var i=100*(t/n-e);if(isNaN(i)&&console.warn("Value passed for coloration is not a number: ".concat(t)),i<=0)return this.colors[0];if(i>=100)return this.colors[this.colors.length-1];if(this.thresholds&&this.thresholds.length>0){for(var o=0;o<this.thresholds.length;o++)if(i<=this.thresholds[o])return this.colors[o];return this.colors[this.colors.length-1]}for(var a=100/this.colors.length,s=1;s<=this.colors.length;s++)if(i<=s*a)return this.colors[s-1]}else if("absolute"==this.type){var r=this.thresholds.length;if(t<=this.min)return this.colors[0];if(t>=this.max)return this.colors[this.colors.length-1];for(var l=0;l<r;l++)if(t<this.thresholds[l])return this.colors[l];return this.colors[this.colors.length-1]}}},{key:"changeColors",value:function(){document.getElementById(this.id).getElementsByClassName("legend-colors")}},{key:"_makeExpand",value:function(){this.expand="vertical"===this.orientation?"height":"width"}},{key:"_makeFlex",value:function(){var t={};"vertical"===this.orientation?(t.legend="row nowrap",t.colors="column-reverse nowrap",t.labels="column-reverse nowrap"):"horizontal"===this.orientation?(t.legend="column nowrap",t.colors="row nowrap",t.labels="row nowrap"):console.error("Legend(".concat(this.id,'): Invalid orientation "').concat(this.orientation,'" given!')),this.flex=t}},{key:"_makeLegendContainer",value:function(){var t=document.createElement("div");t.style[this.expand]="100%",t.style.height="auto",t.style["flex-flow"]=this.flex.legend,t.className="atlas4-legend",t.setAttribute("legend-id",this.id),this.legend=t}},{key:"_makeColorBar",value:function(){var t=this.colorSize(),e=document.createElement("div");e.style["flex-flow"]=this.flex.colors,e.className="legend-colors";var n=document.createElement("div");for(var i in n.style[this.expand]="".concat(t,"%"),e.appendChild(n),this.colors){var o=document.createElement("div");o.style[this.expand]="".concat(t,"%"),o.style.background="".concat(this.colors[i]),o.className="legend-color",e.appendChild(o)}var a=document.createElement("div");a.style[this.expand]="".concat(t,"%"),e.appendChild(a),this.colorBar=e}},{key:"_makeLabelBar",value:function(){var t=document.createElement("div");if(t.style["flex-flow"]=this.flex.labels,t.className="legend-labels","height"==this.expand&&(t.style["align-items"]="flex-start",t.style["padding-left"]="5px"),this.thresholds.length<1)if(void 0!==this.min&&void 0!==this.max)for(var e=0,n=["min","max"];e<n.length;e++){var i=n[e],o=document.createElement("div");o.style[this.expand]="50%","vertical"===this.orientation&&(div.style["align-items"]="min"===i?"flex-end":"flex-start"),o.className="legend-label ".concat(i),o.innerHTML=this.toSI(this[i]),t.appendChild(o)}else console.error("The legend requires thresholds or a min and max value, but neither were given!");else{var a=this.labelSize(),s=h(this.thresholds);void 0!==this.min&&void 0!==this.max&&(s.unshift(this.min),s.push(this.max));var r=document.createElement("div");for(var l in r.style[this.expand]="".concat(a/2,"%"),t.appendChild(r),s){var c=document.createElement("div");c.style[this.expand]="".concat(a,"%"),c.className="legend-label",c.innerHTML=this.toSI(s[l],void 0,!0),t.appendChild(c)}var d=document.createElement("div");d.style[this.expand]="".concat(a/2,"%"),t.appendChild(d)}this.labelBar=t}},{key:"_addColorBar",value:function(){this.legend.appendChild(this.colorBar)}},{key:"_addLabelBar",value:function(){this.legend.appendChild(this.labelBar)}},{key:"_removeColorBar",value:function(){this.legend.removeChild(this.colorBar)}},{key:"_removeLabelBar",value:function(){this.legend.removeChild(this.labelBar)}},{key:"colorSize",value:function(){return Math.round(100*(100/this.colors.length+2))/100}},{key:"labelSize",value:function(){return Math.round(100*(100/this.thresholds.length+3))/100}},{key:"toSI",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!=t){var i=this.units;if("percent"==this.type&&n)return"".concat(t,"%");if(0===t)return"0 ".concat(i);var o=e<0?0:e,a=["".concat(i),"K".concat(i),"M".concat(i),"G".concat(i),"T".concat(i),"P".concat(i),"E".concat(i),"Z".concat(i),"Y".concat(i)],s=Math.floor(Math.log(t)/Math.log(1e3));return parseFloat((t/Math.pow(1e3,s)).toFixed(o))+" "+a[s]}}}])&&p(e.prototype,n),i&&p(e,i),t}();function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var i,o,a=[],s=!0,r=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(a.push(i.value),!e||a.length!==e);s=!0);}catch(t){r=!0,o=t}finally{try{s||null==n.return||n.return()}finally{if(r)throw o}}return a}(t,e)||y(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=y(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw a}}}}function y(t,e){if(t){if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var A=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=e.map,this.data=e.data||{},this.topology=e.topology,this.image=e.image,this.sourceLayer=e.layer,this.units=e.units,this.legend=e.legend,this.staticTooltip=e.staticTooltip||!1,e instanceof j?(this.source="Line",this.html=this.defaults.line.html):e instanceof l&&(this.source="Point",this.html=this.defaults.point.html),this.clicked=!1,this.makeTooltip(),Array.isArray(this.sourceLayer)||(this.sourceLayer=[this.sourceLayer]);var n,i=v(this.sourceLayer);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.bindPopup(this.layer),o.on("click",(function(t){var e=this.getPopup();e.setLatLng(t.latlng),e.openOn(this._map),this.clicked=!0})),o.on("popupclose",(function(t){this.clicked=!1})),o.on("mouseover",(function(t){if(!this.clicked){var e=this.getPopup();e.setLatLng(t.latlng),e.openOn(this._map)}})),o.on("mouseout",(function(t){this.clicked||setTimeout((function(){t.target.closePopup()}),200)})),this.update(o,this.data)}}catch(t){i.e(t)}finally{i.f()}e.staticTooltip&&this.activateTooltip(e)}var e,n,i;return e=t,(n=[{key:"get",value:function(t){return this[t]}},{key:"set",value:function(t,e){var n=t.split(".");if(1===n.length)this[t]=e,this.update(t);else for(var i=this,o=0;o<n.length;o++)o===n.length-1?(i[n[o]]=e,this.update(n[o])):i=i[n[o]]}},{key:"update",value:function(t){"html"!==t&&"data"!==t&&"image"!==t||this.layer.setContent(this.replaceVars())}},{key:"properties",value:function(){return Object.entries(this)}},{key:"show",value:function(){var t,e=v(this.sourceLayer);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.getPopup()||(n.bindPopup(this.layer),n.on("click",(function(t){var e=this.getPopup();e.setLatLng(t.latlng),e.openOn(this._map),this.clicked=!0})),n.on("popupclose",(function(t){this.clicked=!1})),n.on("mouseover",(function(t){if(!this.clicked){var e=this.getPopup();e.setLatLng(t.latlng),e.openOn(this._map)}})),n.on("mouseout",(function(t){this.clicked||setTimeout((function(){t.target.closePopup()}),200)})))}}catch(t){e.e(t)}finally{e.f()}this.staticTooltip&&this.activateTooltip()}},{key:"hide",value:function(){var t,e=v(this.sourceLayer);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.getPopup()&&(n.removeEventListener("mouseover"),n.removeEventListener("popupclose"),n.removeEventListener("click"),n.removeEventListener("mouseout"),n.unbindPopup(this.layer),this.layer.remove())}}catch(t){e.e(t)}finally{e.f()}}},{key:"toggle",value:function(){var t,e=v(this.sourceLayer);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.getPopup()?n.unbindPopup(this.layer):n.bindPopup(this.layer)}}catch(t){e.e(t)}finally{e.f()}}},{key:"makeTooltip",value:function(){this.layer=o.a.popup({autoPan:this.defaults.autoPan,autoClose:!this.staticTooltip,closeOnClick:!this.staticTooltip,className:"atlas4-tt"}),this.layer.setContent(this.replaceVars(this.data))}},{key:"makeStatic",value:function(t){this.hide(),this.staticTooltip=!!t,this.makeTooltip(),this.show()}},{key:"readDataTargets",value:function(t,e){for(var n=[],i=0,o=Object.keys(t);i<o.length;i++){var a=o[i],s=e?"".concat(e,".").concat(a):a;"[object Object]"===Object.prototype.toString.call(t[a])?n=[].concat(g(n),g(this.readDataTargets(t[a],s))):n.push([s,t[a]])}return n}},{key:"createDataTargets",value:function(t){if(t)return this.readDataTargets(t).reduce((function(t,e){var n=m(e,2),i=n[0],o=n[1];return t[i]=o,t}),{});console.error("Could not create data targets! No data was given")}},{key:"activateTooltip",value:function(){this.hide();var t,e=v(this.sourceLayer);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.bindPopup(this.layer);var i=n.getPopup();i.setLatLng(n.getLatLng()),i.openOn(this.map),this.clicked=!0}}catch(t){e.e(t)}finally{e.f()}}},{key:"replaceVars",value:function(){var t=this.html,e=this.createDataTargets(this.data);e.image=this.image,e.topology=this.topology;var n=document.createElement("DIV");n.innerHTML=t,!e.image&&n.getElementsByClassName("atlas4-tt-image").length&&n.getElementsByClassName("atlas4-tt-image")[0].remove(),t=n.innerHTML;for(var i=0,o=Object.keys(e);i<o.length;i++){var a=o[i],s=new RegExp("\\$".concat(a.replace(/\./g,"\\.")),"g"),r=null!=e[a]?e[a]:"No data";this.legend&&!isNaN(r)&&(r=this.legend.toSI(r)),t=(t=t.replace(s,r)).replace(/img_src=/gm,"src=")}return t=t.replace(/\$(.+?)</g,"N/A<")}}])&&b(e.prototype,n),i&&b(e,i),t}(),w=n(5),x=n.n(w);n(12);function M(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var T=function(){function t(e,n,i,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lat=e[0],this.lng=e[1],this.position=n,this.line=i,this.options=a,this.type=o,this.selected=!1}var e,n,i;return e=t,(n=[{key:"draw",value:function(t){this.marker=o.a.circleMarker([this.lat,this.lng],this.options).addTo(t)}},{key:"setDragListener",value:function(t){var e=this;this.marker.on("mousedown",(function(){t.map.on("mousemove",(function(n){if(e.position!==e.line.get("path").length-1){t.map.dragging.disable(),e.lat=n.latlng.lat,e.lng=n.latlng.lng,e.refresh();var i=e.line.get("path");i[e.position]=e.latlng(),e.line.setPath(i,t.map),e.line.updateWaypoints(e.position,e.latlng()),t.updateLineProperties(e.line)}}))})),t.map.on("mouseup",(function(e){t.atlas.dispatch("update"),t.map.removeEventListener("mousemove"),t.map.dragging.enable()}))}},{key:"setSelectListener",value:function(t){var e=this;this.marker.on("dblclick",(function(){e.selected?t.deselectAnchor(e):t.selectAnchor(e)}))}},{key:"deselect",value:function(){this.marker.setStyle({fillColor:this.options.fillColor,color:this.options.color,fillOpacity:this.options.fillOpacity}),this.selected=!1}},{key:"select",value:function(){this.marker.setStyle({fillColor:"#0000FF",color:"#0000FF",fillOpacity:1}),this.selected=!0}},{key:"refresh",value:function(){this.marker.setLatLng([this.lat,this.lng])}},{key:"latlng",value:function(){return[this.lat,this.lng]}},{key:"changeCurveType",value:function(t){var e=this.position;if(t==this.type)return e;var n=this.line.get("path");switch(this.type){case"Q":switch(t){case"C":n[this.position-2]="C";var i=this.getMiddlePoint(n[this.position-3],n[this.position]);n[this.position-1]=i,n.splice(this.position-1,0,i),e+=1;break;case"L":n[this.position-2]="L",n.splice(this.position-1,1),e-=1;break;case"add":var o=this.getMiddlePoint(n[this.position-3],n[this.position]);n.splice(this.position-2,0,"L",o),this.position+=2,n[this.position-2]="L",n.splice(this.position-1,1),e+=1;break;case"del":this.position!==n.length-1&&(n.splice(this.position-2,3),e-=3)}break;case"C":switch(t){case"Q":n[this.position-3]="Q";var a=this.getMiddlePoint(n[this.position-4],n[this.position]);n.splice(this.position-1,1),n[this.position-2]=a,e-=1;break;case"L":n[this.position-3]="L",n.splice(this.position-2,2),e-=2;break;case"add":var s=this.getMiddlePoint(n[this.position-4],n[this.position]);n.splice(this.position-3,0,"L",s),this.position+=2,n[this.position-3]="L",n.splice(this.position-2,2);break;case"del":this.position!==n.length-1&&(n.splice(this.position-3,4),e-=4)}break;case"L":switch(t){case"Q":n[this.position-1]="Q";var r=this.getMiddlePoint(n[this.position-2],n[this.position]);n.splice(this.position,0,r),e+=1;break;case"C":n[this.position-1]="C";var l=this.getMiddlePoint(n[this.position-2],n[this.position]);n.splice(this.position,0,l,l),e+=2;break;case"add":var h=this.getMiddlePoint(n[this.position-2],n[this.position]);n.splice(this.position-1,0,"L",h),e+=2;break;case"del":this.position!==n.length-1&&(n.splice(this.position-1,2),e-=2)}}return this.line.setPath(n,this.line.map),e}},{key:"getMiddlePoint",value:function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}}])&&M(e.prototype,n),i&&M(e,i),t}();function k(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var C=function(){function t(e,n,i,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lat=e[0],this.lng=e[1],this.position=n,this.line=i,this.type=o,this.options=a}var e,n,i;return e=t,(n=[{key:"setOptions",value:function(t){this.options=t}},{key:"draw",value:function(t){switch(this.type){case"Q":this.wpLineA=o.a.polyline([this.latlng(),this.anchorA],{color:"blue",weight:1,opacity:.5}).addTo(t),this.wpLineB=o.a.polyline([this.latlng(),this.anchorB],{color:"blue",weight:1,opacity:.5}).addTo(t);break;case"C":this.wpLineA=o.a.polyline([this.latlng(),this.anchorA],{color:"blue",weight:1,opacity:.5}).addTo(t)}this.marker=o.a.circleMarker([this.lat,this.lng],this.options).addTo(t)}},{key:"setTargetAnchors",value:function(t,e,n,i){switch(this.type){case"Q":this.anchorA=t,this.anchorB=e,this.anchorAPos=n,this.anchorBPos=i;break;case"C":this.anchorA=t,this.anchorAPos=n}}},{key:"latlng",value:function(){return[this.lat,this.lng]}},{key:"setDragListener",value:function(t){var e=this;this.marker.on("mousedown",(function(){t.map.on("mousemove",(function(n){t.map.dragging.disable(),e.lat=n.latlng.lat,e.lng=n.latlng.lng,e.refreshMarker();var i=e.line.get("path");i[e.position]=e.latlng(),e.line.setPath(i,t.map),e.updateLines(),t.updateLineProperties(e.line)}))})),t.map.on("mouseup",(function(e){t.atlas.dispatch("update"),t.map.removeEventListener("mousemove"),t.map.dragging.enable()}))}},{key:"setCoords",value:function(t){this.lat=t[0],this.lng=t[1],this.refreshMarker()}},{key:"refreshMarker",value:function(){this.marker.setLatLng([this.lat,this.lng])}},{key:"updateLines",value:function(){switch(this.type){case"Q":this.wpLineA.setLatLngs([this.latlng(),this.anchorA]),this.wpLineB.setLatLngs([this.latlng(),this.anchorB]);break;case"C":this.wpLineA.setLatLngs([this.latlng(),this.anchorA])}}}])&&k(e.prototype,n),i&&k(e,i),t}();function I(t){return function(t){if(Array.isArray(t))return N(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||S(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=S(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw a}}}}function S(t,e){if(t){if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(t,e):void 0}}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var j=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=JSON.parse(JSON.stringify(this.defaults)),this.dataTarget=this.options.dataTarget,this.units=this.options.units,this.map=n.map,this.topology=n.name,this.image=n.image,this.legend=n.options.legends.lines,this.twins=n.options.twins,this.a=n.endpoints[e.a],this.b=n.endpoints[e.b]||this.createNeighbourEndpoint(e,this.a,n),this.a.name=e.a,this.b.name=e.b,this.id=e.id||this.generateID(6),this.min=e.min||0,this.max=e.max||NaN,this.description=e.description||"",this.color=e.color,this.label=e.label||"".concat(this.a.name," - ").concat(this.b.name),this.anchors=e.anchors||["L"],0==this.anchors.length&&(this.anchors=["L"]),this.targets=e.targets,this.anchorpoints=[],this.waypoints=[],this.metadata=e.metadata||{},this.data=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){P(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({label:this.label},this.metadata),this.path=this._createPath(),this.options.weight=e.weight||this.options.weight||"5",this.options.color=this._color(),this.layer=this._createLayer(),this.tooltip=new A(this),console.debug("Line created for ".concat(this.a.name," to ").concat(this.b.name))}var e,n,i;return e=t,(n=[{key:"get",value:function(t){return this[t]}},{key:"set",value:function(t,e){var n=t.split(".");if(1===n.length)this[t]=e,this.update(t);else for(var i=this,o=0;o<n.length;o++)o===n.length-1?(i[n[o]]=e,this.update(n[o])):i=i[n[o]]}},{key:"update",value:function(t){if(this.path=this._createPath(),"data"===t){this.data.label=this.label,this.tooltip.set(t,this.data),this.options.color=this._color();var e,n=E(this.layer);try{for(n.s();!(e=n.n()).done;){var i=e.value,o=JSON.parse(JSON.stringify(this.options));o.weight&&delete o.weight,i.setStyle(o)}}catch(t){n.e(t)}finally{n.f()}}else if("criteria"===t){this.options.color=this._color(this.criteria);var a,s=E(this.layer);try{for(s.s();!(a=s.n()).done;){var r=a.value,l=JSON.parse(JSON.stringify(this.options));l.weight&&delete l.weight,r.setStyle(l)}}catch(t){s.e(t)}finally{s.f()}}else if("style"===t){var h,c=E(this.layer);try{for(c.s();!(h=c.n()).done;)h.value.setStyle(this.options)}catch(t){c.e(t)}finally{c.f()}}else"html"===t&&this.tooltip.set("html",this.html)}},{key:"properties",value:function(){return Object.entries(this)}},{key:"show",value:function(){this.remove(),this.layer=this._createLayer();var t,e=E(this.layer);try{for(e.s();!(t=e.n()).done;)t.value.addTo(this.map)}catch(t){e.e(t)}finally{e.f()}}},{key:"hide",value:function(){var t,e=E(this.layer);try{for(e.s();!(t=e.n()).done;)t.value._path.style.display="none"}catch(t){e.e(t)}finally{e.f()}}},{key:"toggle",value:function(){var t,e=E(this.layer);try{for(e.s();!(t=e.n()).done;)"block"==t.value._path.style.display?this.hide():this.show()}catch(t){e.e(t)}finally{e.f()}}},{key:"remove",value:function(){var t,e=E(this.layer);try{for(e.s();!(t=e.n()).done;)t.value.remove()}catch(t){e.e(t)}finally{e.f()}this.layer=[]}},{key:"setPath",value:function(t,e){if(this.path=t,this.anchors=t.slice(2,t.length-1),this.layer.length>0&&2===this.layer.length)for(var n=this._splitPath(this.path,this.options.weight),i=0;i<n.length;i++)this.layer[i].setPath(n[i]);else this.layer.length>0&&this.layer[0].setPath(this.path)}},{key:"_color",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dataTarget,i=this.dataTarget.split(".");if(n)if(i.length<2)e=this.data[n];else for(var o=this.data,a=0;a<i.length;a++){if(!o){e=void 0;break}a===i.length-1?e=o[i[a]]:o=o[i[a]]}else e=void 0;return this.legend.color(e,this.min,this.max)||this.color||t.prototype.defaults.color}},{key:"_createPath",value:function(){for(var t=0,e=[this.a,this.b];t<e.length;t++){var n=e[t];n.lng&&n.lng>20&&(n.lng=n.lng-360)}return["M",[this.a.lat,this.a.lng]].concat(I(this.anchors),[[this.b.lat,this.b.lng]])}},{key:"_createLayer",value:function(){var t=[];if(this.twins){var e,n=E(this._splitPath());try{for(n.s();!(e=n.n()).done;){var i=e.value;t.push(o.a.curve(i,this.options))}}catch(t){n.e(t)}finally{n.f()}}else t.push(o.a.curve(this.path,this.options));return t}},{key:"_splitPath",value:function(){var t=this.map.latLngToContainerPoint(this.path[1]),e=this.map.latLngToContainerPoint(this.path[this.path.length-1]),n=-(e.x-t.x)/(e.y-t.y),i=parseFloat(this.options.weight)*(1/Math.sqrt(1+n*n)),o=n*i,a=[],s=[];for(var r in this.path)if(Array.isArray(path[r])){var l=this.map.latLngToContainerPoint(path[r]),h=this.map.containerPointToLatLng({x:l.x+i,y:l.y+o});a.push([h.lat,h.lng]);var c=this.map.containerPointToLatLng({x:l.x-i,y:l.y-o});s.push([c.lat,c.lng])}else a.push(this.path[r]),s.push(this.path[r]);return[a,s]}},{key:"randomColor",value:function(){for(var t="#",e=0;e<3;e++)t+=Math.round(9*Math.random());return t}},{key:"hideToolTip",value:function(){this.tooltip.hide()}},{key:"showToolTip",value:function(){this.tooltip.show()}},{key:"createNeighbourEndpoint",value:function(t,e,n){var i=this.generateID(6),o={id:i,label:"".concat(t.a,"-Second-Node"),lat:e.lat-.01,lng:e.lng-.1,singleCircuitNode:!0,node_name:"".concat(t.a,"-Second-Node")};n.endpoints[i]=o;var a=n.createPoint(i);return a.layer.setStyle({fillColor:"#EF485D",color:"#EF485D"}),a.newPoint=!1,t.b=o.name,n.endpoints[i]}},{key:"createAnchors",value:function(){for(var t={radius:4,fillColor:"red",color:"red",fillOpacity:1},e=0;e<this.path.length;e++)switch(this.path[e]){case"L":this.anchorpoints.push(new T(this.path[e+1],e+1,this,"L",t)),e++;break;case"Q":this.anchorpoints.push(new T(this.path[e+2],e+2,this,"Q",t)),e+=2;break;case"C":this.anchorpoints.push(new T(this.path[e+3],e+3,this,"C",t)),e+=3}return this.anchorpoints}},{key:"removeAnchors",value:function(){var t,e=E(this.anchorpoints);try{for(e.s();!(t=e.n()).done;)t.value.marker.remove()}catch(t){e.e(t)}finally{e.f()}this.anchorpoints=[]}},{key:"createWaypoints",value:function(){for(var t={radius:4,fillColor:"#00FF00",color:"#00FF00",fillOpacity:1},e=0;e<this.path.length;e++)switch(this.path[e]){case"L":e++;break;case"Q":var n=new C(this.path[e+1],e+1,this,"Q",t);n.setTargetAnchors(this.path[e-1],this.path[e+2],e-1,e+2),this.waypoints.push(n),e+=2;break;case"C":var i=new C(this.path[e+1],e+1,this,"C",t);i.setTargetAnchors(this.path[e-1],void 0,e-1),this.waypoints.push(i);var o=new C(this.path[e+2],e+2,this,"C",t);o.setTargetAnchors(this.path[e+3],void 0,e+3),this.waypoints.push(o),e+=3}return this.waypoints}},{key:"removeWaypoints",value:function(){var t,e=E(this.waypoints);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.marker.remove(),n.wpLineA.remove(),n.wpLineB&&n.wpLineB.remove()}}catch(t){e.e(t)}finally{e.f()}this.waypoints=[]}},{key:"resetEditPoints",value:function(t){this.removeAnchors(),this.removeWaypoints();var e,n=this.createAnchors(),i=E(this.createWaypoints());try{for(i.s();!(e=i.n()).done;){var o=e.value;o.draw(this.map),o.setDragListener(t)}}catch(t){i.e(t)}finally{i.f()}var a,s=E(n);try{for(s.s();!(a=s.n()).done;){var r=a.value;r.draw(this.map),r.setDragListener(t),r.setSelectListener(t)}}catch(t){s.e(t)}finally{s.f()}}},{key:"updateWaypoints",value:function(t,e){var n,i=E(this.waypoints);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.anchorAPos===t?(o.anchorA=e,o.updateLines()):o.anchorBPos===t&&(o.anchorB=e,o.updateLines())}}catch(t){i.e(t)}finally{i.f()}}},{key:"generateID",value:function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*i));return e}}])&&D(e.prototype,n),i&&D(e,i),t}();function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Z(t,e,n){return e&&B(t.prototype,e),n&&B(t,n),t}var W=function(){function t(e,n){O(this,t),this.config=e,this.topology=n,this.layer=void 0,this.map=n.map,this.mapListener=void 0,this.util=new U}return Z(t,[{key:"display",value:function(t){var e=this;this.config.image&&(this.config.zoom&&this.map.setZoom(this.config.zoom),this.topology.atlas.showLoader(),setTimeout((function(){e.map.panTo(e.config.center),e.topology.atlas.removeTiles(),e.layer&&e.layer.removeFrom(e.map);var n=e.map.latLngToContainerPoint(e.config.center),i=[n.x-e.config.width/2,n.y-e.config.height/2],a=[n.x+e.config.width/2,n.y+e.config.height/2];e.imageBounds=[[e.map.containerPointToLatLng(i).lat,e.map.containerPointToLatLng(i).lng],[e.map.containerPointToLatLng(a).lat,e.map.containerPointToLatLng(a).lng]],e.layer=o.a.imageOverlay(e.config.image,e.imageBounds,{interactive:!0}).addTo(e.map),e.layer._image.classList.add("atlas-no-select"),t&&e.openEditor(),e.topology.atlas.hideLoader()}),500))}},{key:"getConfig",value:function(){return{image:this.config.image,zoom:this.config.zoom,center:this.config.center,height:this.config.height,width:this.config.width}}},{key:"updateStats",value:function(){var t=this.layer._image.style.height,e=this.layer._image.style.width;this.config.center=this.layer.getBounds().getCenter(),this.config.width=Number(e.substring(0,e.length-2)),this.config.height=Number(t.substring(0,t.length-2)),this.config.zoom=this.map.getZoom()}},{key:"setDimensions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.width,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config.height,n=this.map.latLngToContainerPoint({lat:this.imageBounds[0][0],lng:this.imageBounds[0][1]});n.x=n.x+t,n.y=n.y+e;var i=this.map.containerPointToLatLng(n);this.imageBounds=[[this.imageBounds[0][0],this.imageBounds[0][1]],[i.lat,i.lng]],this.layer.setBounds(this.imageBounds),this.updateStats()}},{key:"openEditor",value:function(){var t=this;this.layer.on("mousedown",(function(){t.map.on("mousemove",(function(e){t.map.dragging.disable();var n=t.util.moved([e.latlng.lat,e.latlng.lng]);if(null!=n){var i=t.map.latLngToContainerPoint({lat:t.imageBounds[0][0]+n[0],lng:t.imageBounds[0][1]+n[1]});i.x=i.x+t.config.width,i.y=i.y+t.config.height;var o=t.map.containerPointToLatLng(i);t.imageBounds=[[t.imageBounds[0][0]+n[0],t.imageBounds[0][1]+n[1]],[o.lat,o.lng]],t.layer.setBounds(t.imageBounds),t.updateStats()}}))})),this.map.on("mouseup",(function(e){t.map.removeEventListener("mousemove"),t.map.dragging.enable(),t.util.lastCoord=void 0})),this.map.on("zoom",(function(){t.updateStats()}))}},{key:"closeEditor",value:function(){this.map.off("zoom"),this.resizeBtn.removeFrom(this.map),this.layer._tooltip&&this.layer._tooltip.removeFrom(this.map),this.layer.off("mousedown")}}]),t}(),U=function(){function t(){O(this,t),this.lastCoord=void 0}return Z(t,[{key:"moved",value:function(t){if(this.lastCoord){var e=[t[0]-this.lastCoord[0],t[1]-this.lastCoord[1]];return this.lastCoord=t,e}this.lastCoord=t}}]),t}();function J(t){return function(t){if(Array.isArray(t))return F(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||H(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){if(t){if("string"==typeof t)return F(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(t,e):void 0}}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function R(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var V=function(){function t(e,n,i){var o,a,s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),console.debug("Creating new Topology for ".concat(n.name)),this.map=e.map,this.atlas=e,this.config=n,this.name=n.name,this.image=n.image||(null==n||null===(o=n.metadata)||void 0===o?void 0:o.image)||(null==n||null===(a=n.metadata)||void 0===a?void 0:a.logo),this.legend=n.legend,this.endpoints=n.endpoints,this.adjacencies=n.adjacencies,this.metadata=n.metadata||{},this.options=i,this.options.name=this.name,n.tile&&setTimeout((function(){s.tile=new W(n.tile,s),s.tile.display()}),500),this.twins=!1,this.active=!0,this.view=this.createView(),this.points=this.createPoints(),this.lines=this.createLines(),this.stats={points:this.points.length,lines:this.lines.length},console.debug("Finished creating Topology for ".concat(n.name,"!"))}var e,n,i;return e=t,i=[{key:"isLine",value:function(t){return t instanceof j}},{key:"isPoint",value:function(t){return t instanceof l}}],(n=[{key:"createTile",value:function(t){return this.tile=new W(t,this),this.tile}},{key:"get",value:function(t){return this[t]}},{key:"set",value:function(t,e){this[t]=e,this.update(t)}},{key:"update",value:function(t){"active"==t&&(this.active?this.show():this.hide()),this.view=this.createView()}},{key:"properties",value:function(){return Object.entries(this)}},{key:"show",value:function(){if(!this.active){for(var t=0,e=[].concat(J(this.lines),J(this.points));t<e.length;t++)e[t].show(),this.active=!0;this.stats={lines:this.lines.length,points:this.points.length}}}},{key:"hide",value:function(){if(this.active){for(var t=0,e=[].concat(J(this.lines),J(this.points));t<e.length;t++)e[t].hide(),this.active=!1;this.stats={lines:0,points:0}}}},{key:"toggle",value:function(){this.active?this.hide():this.show()}},{key:"getLatLng",value:function(t){return{lat:t.lat,lng:t.lng}}},{key:"createView",value:function(){console.debug("Getting the best view for this.name...");var t=[],e=[];for(var n in this.endpoints)void 0!==n&&(t.push(this.endpoints[n].lat),e.push(this.endpoints[n].lng));var i=Math.min.apply(null,t),o=Math.min.apply(null,e),a=Math.max.apply(null,t),s=Math.max.apply(null,e),r=[];if(s>90&&o<-90)for(var l in this.endpoints){var h=parseFloat(l.lng);h>90&&(h=180-h-180),r.push(h)}return r.length==e.length&&(o=Math.min.apply(null,r),s=Math.max.apply(null,r)),[[i,o],[a,s]]}},{key:"removeFrom",value:function(t){t.eachLayer((function(e){e._tileSize||t.removeLayer(e)}))}},{key:"createLines",value:function(){console.debug("Getting adjacency lines...");var t,e=[],n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=H(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw a}}}}(this.adjacencies);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.push(new j(i,this))}}catch(t){n.e(t)}finally{n.f()}return this.lines=e,this.lines}},{key:"createLine",value:function(t,e,n){var i=new j(t,this);return this.lines.push(i),i.layer[0].addTo(this.map),i}},{key:"createPoints",value:function(){var t=this;return console.debug("Getting endpoint markers..."),this.points=Object.keys(this.endpoints).map((function(e){return new l(e,t)})),this.points}},{key:"createPoint",value:function(t){var e=new l(t,this);return e.newPoint=!0,this.points.push(e),e}},{key:"drawEndpoints",value:function(t){}},{key:"draw",value:function(t){this.drawAdjacencies(t),this.drawEndpoints(t)}}])&&R(e.prototype,n),i&&R(e,i),t}();n(13);function G(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw a}}}}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}L.Control.Toolbar=L.Control.extend({options:{position:"topleft",addNodeID:"dropdown-add-node",addNodeText:"Add Node",addLineID:"dropdown-add-line",addLineText:"Add Line",editNodeID:"dropdown-edit-node",editNodeText:"Edit Nodes",editLineID:"dropdown-edit-line",editLineText:"Edit Lines",getJSONID:"dropdown-get-json",getJSONText:"Get Map JSON",setTopologyID:"dropdown-set-topology",setTopologyText:"Set Topology",editTopologyID:"dropdown-edit-topology",editTopologyText:"Edit Topology"},onAdd:function(t){this.tbContainer=L.DomUtil.create("div","atlas-editor-toolbar");var e=this.options;return this._atlas=e.atlas,this._editor=this._atlas.editor,this.createAddNodeBtn(),this.createAddLineBtn(),this.createEditNodeBtn(),this.createEditLineBtn(),this.createGetJSONBtn(),this.createSetTopologyBtn(),this.createEditTopologyBtn(),this.tbContainer},createAddNodeBtn:function(){var t,e={dropdownID:this.options.addNodeID,btnText:"",toolName:this.options.addNodeText,dropdownList:Object.keys(this._atlas.topologies)},n=this;this.addNodeButton=this.createDropdownButton(e);var i,o=G(this.getLinkTags(this.addNodeButton));try{var a=function(){var e=i.value;e.addEventListener("click",(function(){t=e.textContent,n._editor.enableNodeAddMode(n._atlas.topologies[t]),n.enableMode(n.options.addNodeID)}))};for(o.s();!(i=o.n()).done;)a()}catch(t){o.e(t)}finally{o.f()}var s=this.addNodeButton.getElementsByTagName("button")[0];s.addEventListener("click",(function(){"true"===s.getAttribute("activated")&&(n._editor.disableNodeAddMode(n._atlas.topologies[t]),s.setAttribute("activated","false"))}))},createAddLineBtn:function(){var t,e={dropdownID:this.options.addLineID,btnText:"",toolName:this.options.addLineText,dropdownList:Object.keys(this._atlas.topologies)},n=this;this.addLineButton=this.createDropdownButton(e);var i,o=G(this.getLinkTags(this.addLineButton));try{var a=function(){var e=i.value;e.addEventListener("click",(function(){t=e.textContent,n._editor.enableLineAddMode(n._atlas.topologies[t]),n.enableMode(n.options.addLineID)}))};for(o.s();!(i=o.n()).done;)a()}catch(t){o.e(t)}finally{o.f()}var s=this.addLineButton.getElementsByTagName("button")[0];s.addEventListener("click",(function(){"true"===s.getAttribute("activated")&&(n._editor.disableLineAddMode(n._atlas.topologies[t]),s.setAttribute("activated","false"))}))},createEditNodeBtn:function(){var t,e={dropdownID:this.options.editNodeID,btnText:"",toolName:this.options.editNodeText,dropdownList:Object.keys(this._atlas.topologies)},n=this;this.editNodeButton=this.createDropdownButton(e);var i,o=G(this.getLinkTags(this.editNodeButton));try{var a=function(){var e=i.value;e.addEventListener("click",(function(){t=e.textContent,n._editor.enableNodeEditMode(n._atlas.topologies[t]),n.enableMode(n.options.editNodeID)}))};for(o.s();!(i=o.n()).done;)a()}catch(t){o.e(t)}finally{o.f()}var s=this.editNodeButton.getElementsByTagName("button")[0];s.addEventListener("click",(function(){"true"===s.getAttribute("activated")&&(n._editor.disableNodeEditMode(n._atlas.topologies[t]),s.setAttribute("activated","false"))}))},createEditLineBtn:function(){var t,e={dropdownID:this.options.editLineID,btnText:"",toolName:this.options.editLineText,dropdownList:Object.keys(this._atlas.topologies)},n=this;this.editLineButton=this.createDropdownButton(e);var i,o=G(this.getLinkTags(this.editLineButton));try{var a=function(){var e=i.value;e.addEventListener("click",(function(){t=e.textContent,n._editor.enableLineEditMode(n._atlas.topologies[t]),n.enableMode(n.options.editLineID)}))};for(o.s();!(i=o.n()).done;)a()}catch(t){o.e(t)}finally{o.f()}var s=this.editLineButton.getElementsByTagName("button")[0];s.addEventListener("click",(function(){"true"===s.getAttribute("activated")&&(n._editor.disableLineEditMode(n._atlas.topologies[t]),s.setAttribute("activated","false"))}))},createGetJSONBtn:function(){var t,e={dropdownID:this.options.getJSONID,btnText:"",toolName:this.options.getJSONText,dropdownList:Object.keys(this._atlas.topologies)},n=this;this.getJSONButton=this.createDropdownButton(e);var i,o=G(this.getLinkTags(this.getJSONButton));try{var a=function(){var e=i.value;e.addEventListener("click",(function(){t=e.textContent,n._editor.enableGetJSONMode(n._atlas.topologies[t]),n.enableMode(n.options.getJSONID)}))};for(o.s();!(i=o.n()).done;)a()}catch(t){o.e(t)}finally{o.f()}var s=this.getJSONButton.getElementsByTagName("button")[0];s.addEventListener("click",(function(){"true"===s.getAttribute("activated")&&(n._editor.disableGetJSONMode(n._atlas.topologies[t]),s.setAttribute("activated","false"))}))},createSetTopologyBtn:function(){var t={dropdownID:this.options.setTopologyID,btnText:"",toolName:this.options.setTopologyText,dropdownList:["ADD"]},e=this;this.setTopologyButton=this.createDropdownButton(t);var n,i=G(this.getLinkTags(this.setTopologyButton));try{var o=function(){var t=n.value;t.addEventListener("click",(function(){"-",e._editor.enableSetTopologyMode(t.textContent),e.enableMode(e.options.setTopologyID)}))};for(i.s();!(n=i.n()).done;)o()}catch(t){i.e(t)}finally{i.f()}var a=this.setTopologyButton.getElementsByTagName("button")[0];a.addEventListener("click",(function(){"true"===a.getAttribute("activated")&&(e._editor.disableSetTopologyMode(),a.setAttribute("activated","false"))}))},createEditTopologyBtn:function(){var t,e={dropdownID:this.options.editTopologyID,btnText:"",toolName:this.options.editTopologyText,dropdownList:Object.keys(this._atlas.topologies)},n=this;this.editTopologyButton=this.createDropdownButton(e);var i,o=G(this.getLinkTags(this.editTopologyButton));try{var a=function(){var e=i.value;e.addEventListener("click",(function(){t=e.textContent,n._editor.enableTopologyEditMode(n._atlas.topologies[t]),n.enableMode(n.options.editTopologyID)}))};for(o.s();!(i=o.n()).done;)a()}catch(t){o.e(t)}finally{o.f()}var s=this.editTopologyButton.getElementsByTagName("button")[0];s.addEventListener("click",(function(){"true"===s.getAttribute("activated")&&(n._editor.disableTopologyEditMode(n._atlas.topologies[t]),s.setAttribute("activated","false"))}))},createDropdownButton:function(t){var e=L.DomUtil.create("div","tb-dropdown",this.tbContainer);e.id=t.dropdownID;var n=L.DomUtil.create("button","tb-btn",e);n.textContent=t.btnText,n.setAttribute("activated","false");var i=L.DomUtil.create("div","tb-dropdown-content",e);L.DomUtil.create("p","tb-tool-name",i).textContent=t.toolName;for(var o=0;o<t.dropdownList.length;o++){L.DomUtil.create("a",void 0,i).textContent=t.dropdownList[o]}return e},getLinkTags:function(t){return t.getElementsByClassName("tb-dropdown-content")[0].getElementsByTagName("a")},enableMode:function(t){var e,n=G(this.tbContainer.querySelectorAll('[activated="true"]'));try{for(n.s();!(e=n.n()).done;){e.value.setAttribute("activated","false")}}catch(t){n.e(t)}finally{n.f()}document.querySelector(".atlas-editor-toolbar #".concat(t)).getElementsByTagName("button")[0].setAttribute("activated","true")},updateNewTopology:function(t){}});n(15);var Y=n(7),K=n.n(Y),q=n(3),X=n.n(q);function $(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return tt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw a}}}}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}L.Control.Sidebar=L.Control.extend({options:{position:"topright"},onAdd:function(t){var e=this;this.sbContainer=L.DomUtil.create("div","atlas-editor-sidebar-container");var n=this.options;this._atlas=n.atlas,this._editor=this._atlas.editor;var i=this._atlas.map._container;return this.resizeObserver=new ResizeObserver((function(){e.sbContainer.style.height=i.offsetHeight+"px"})),this.resizeObserver.observe(i),this.sbContainer.innerHTML=K.a,this.listeners={},this.sbContainer},sendToBack:function(){var t=this.sbContainer.parentElement,e=t.parentElement;e.insertBefore(t,e.childNodes[0])},registerElements:function(){var t=this;if(!this.controls){this.controls={};var e=this.sbContainer;this.controls.sidebar=e.children[0],this.controls.workingTopology=e.getElementsByClassName("editor-gi-topology")[0],this.controls.currentTool=e.getElementsByClassName("editor-gi-tool")[0],this.controls.toolInfo=e.getElementsByClassName("sidebar-tool-info-description")[0],this.controls.nodeName=document.getElementById("npw-name"),this.controls.nodeLabel=document.getElementById("npw-label"),this.controls.nodeSize=document.getElementById("npw-size"),this.controls.nodeSizeLabel=document.getElementById("npw-size-label"),this.controls.nodeColor=document.getElementById("npw-color"),this.controls.nodeColorWrap=document.getElementById("npw-color-wrap"),this.controls.nodeSave=document.getElementById("npw-save"),this.controls.nodeCancel=document.getElementById("npw-cancel"),this.controls.nodeDelete=document.getElementById("npw-delete"),this.controls.nodeMore=document.getElementById("npw-more"),this.controls.npwJSON=document.getElementById("sidebar-npw-properties-json"),this.controls.npwJSONText=document.getElementById("sidebar-npw-json-textarea"),this.controls.npwJSONStatus=document.getElementById("npw-json-status"),this.controls.npwWindow=document.getElementById("sidebar-npw-window"),this.controls.JSONText=document.getElementById("sidebar-json-textarea"),this.controls.JSONButton=document.getElementById("sidebar-json-button"),this.controls.JSONDescription=document.getElementById("sidebar-json-window-desc"),this.controls.lpwWindow=document.getElementById("sidebar-lpw-window"),this.controls.lineA=document.getElementById("lpw-epa"),this.controls.lineB=document.getElementById("lpw-epb"),this.controls.lineLabel=document.getElementById("lpw-label"),this.controls.lineWeight=document.getElementById("lpw-weight"),this.controls.lineWeightLabel=document.getElementById("lpw-weight-label"),this.controls.lineColor=document.getElementById("lpw-color"),this.controls.lineColorWrap=document.getElementById("lpw-color-wrap"),this.controls.lineDelete=document.getElementById("lpw-delete"),this.controls.lineMore=document.getElementById("lpw-more"),this.controls.lpwJSON=document.getElementById("sidebar-lpw-properties-json"),this.controls.lpwJSONText=document.getElementById("sidebar-lpw-json-textarea"),this.controls.lpwJSONStatus=document.getElementById("lpw-json-status"),this.controls.lpwMetadataWindow=document.getElementById("sidebar-lpw-metadata"),this.controls.lpwManageProperties=document.getElementById("lpw-metadata-manage"),this.controls.lpwSaveProperties=document.getElementById("lpw-metadata-save");var n=document.getElementById("sidebar-curve-opt-cont").children;this.controls.lineCurveL=n[0],this.controls.lineCurveC=n[1],this.controls.lineCurveQ=n[2];var i=document.getElementById("sidebar-edit-anchor-opt-cont").children;this.controls.lineCurveAdd=i[0],this.controls.lineCurveMinus=i[1],this.controls.lineEditWindow=document.getElementById("sidebar-line-edit-window"),this.controls.tewWindow=document.getElementById("sidebar-topology-window"),this.controls.tewMetadataWindow=document.getElementById("sidebar-tew-metadata"),this.controls.tewManageProperties=document.getElementById("tew-metadata-manage"),this.controls.tewDeleteTopology=document.getElementById("tew-delete-topology"),this.controls.tewDeleteTopology=document.getElementById("tew-delete-topology"),this.controls.tewChangeTile=document.getElementById("tew-change-map-tile"),this.controls.tewTileHeight=document.getElementById("tew-tile-height"),this.controls.tewTileWidth=document.getElementById("tew-tile-width"),this.controls.tewTileAspect=document.getElementById("tew-tile-preserve-aspect-ratio"),this.controls.sidebar.addEventListener("mouseover",(function(){return t._atlas.map.scrollWheelZoom.disable()})),this.controls.sidebar.addEventListener("mouseout",(function(){return t._atlas.map.scrollWheelZoom.enable()}))}},openTopologyEditWindow:function(t){this._atlas.map.dragging.disable(),this._atlas.map.scrollWheelZoom.disable();var e=this.controls,n=this;e.tewWindow.style.display="block",this.listeners.managePropertiesTEW=function(){n._editor.openTopologyKVModal(t)},this.listeners.deleteSelectedTopology=function(){t.hide()},this.listeners.changeMapTile=function(){n._editor.openTileUploadModal(t)},this.listeners.changeTileHeight=function(){var n=Number(e.tewTileHeight.value);if(n>0&&!isNaN(n)){if(e.tewTileAspect.checked){var i=t.tile.config.height,o=n*t.tile.config.width/i;t.tile.setDimensions(o,n)}else t.tile.setDimensions(void 0,n);e.tewTileWidth.value=t.tile.config.width}},this.listeners.changeTileWidth=function(){var n=Number(e.tewTileWidth.value);if(n>0&&!isNaN(n)){if(e.tewTileAspect.checked){var i=n*t.tile.config.height/t.tile.config.width;t.tile.setDimensions(n,i)}else t.tile.setDimensions(n,void 0);e.tewTileHeight.value=t.tile.config.height}},this.listeners.zoomChange=function(){t.tile&&(t.tile.updateStats(),e.tewTileHeight.value=t.tile.config.height,e.tewTileWidth.value=t.tile.config.width)},t.tile&&(e.tewTileHeight.value=t.tile.config.height,e.tewTileWidth.value=t.tile.config.width),e.tewManageProperties.addEventListener("click",this.listeners.managePropertiesTEW),e.tewDeleteTopology.addEventListener("click",this.listeners.deleteSelectedTopology),e.tewChangeTile.addEventListener("click",this.listeners.changeMapTile),e.tewTileHeight.addEventListener("input",this.listeners.changeTileHeight),e.tewTileWidth.addEventListener("input",this.listeners.changeTileWidth),this._atlas.map.on("zoomend",this.listeners.zoomChange)},changeTooltipImage:function(t,e){var n=t.points,i=t.lines;t.image=e;var o,a=$(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.image=e,s.tooltip.image=e,s.tooltip.update("image")}}catch(t){a.e(t)}finally{a.f()}var r,l=$(i);try{for(l.s();!(r=l.n()).done;){var h=r.value;h.image=e,h.tooltip.image=e,h.tooltip.update("image")}}catch(t){l.e(t)}finally{l.f()}},closeTopologyEditWindow:function(t){var e=this.controls;e.tewWindow.style.display="none",e.tewManageProperties.removeEventListener("click",this.listeners.managePropertiesTEW),e.tewDeleteTopology.removeEventListener("click",this.listeners.deleteSelectedTopology),e.tewChangeTile.removeEventListener("click",this.listeners.changeMapTile),this._atlas.map.dragging.enable(),this._atlas.map.scrollWheelZoom.enable()},selectAnchor:function(t){this.openLPW(t.line);var e=this,n=t.line,i=this.controls;switch(t.type){case"L":i.lineCurveL.setAttribute("selectedCurve","true"),this._atlas.checkForOverlaps();break;case"C":i.lineCurveC.setAttribute("selectedCurve","true");break;case"Q":i.lineCurveQ.setAttribute("selectedCurve","true")}i.lineEditWindow.style.display="block",this.listeners.changeToL=function(){var i=t.changeCurveType("L");n.resetEditPoints(e._editor),e._atlas.dispatch("update");var o,a=$(n.anchorpoints);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.position===i&&e._editor.selectAnchor(s)}}catch(t){a.e(t)}finally{a.f()}},this.listeners.changeToQ=function(){var i=t.changeCurveType("Q");n.resetEditPoints(e._editor),e._atlas.dispatch("update");var o,a=$(n.anchorpoints);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.position===i&&e._editor.selectAnchor(s)}}catch(t){a.e(t)}finally{a.f()}},this.listeners.changeToC=function(){var i=t.changeCurveType("C");n.resetEditPoints(e._editor),e._atlas.dispatch("update");var o,a=$(n.anchorpoints);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.position===i&&e._editor.selectAnchor(s)}}catch(t){a.e(t)}finally{a.f()}},this.listeners.addAnchor=function(){var i=t.changeCurveType("add");n.resetEditPoints(e._editor),e._atlas.dispatch("update");var o,a=$(n.anchorpoints);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.position===i&&e._editor.selectAnchor(s)}}catch(t){a.e(t)}finally{a.f()}},this.listeners.deleteAnchor=function(){var i=t.changeCurveType("del");n.resetEditPoints(e._editor),e._atlas.dispatch("update");var o,a=!1,s=$(n.anchorpoints);try{for(s.s();!(o=s.n()).done;){var r=o.value;r.position===i&&(e._editor.selectAnchor(r),a=!0)}}catch(t){s.e(t)}finally{s.f()}a||e._editor.selectAnchor(n.anchorpoints[n.anchorpoints.length-1])},i.lineCurveL.addEventListener("click",this.listeners.changeToL),i.lineCurveC.addEventListener("click",this.listeners.changeToC),i.lineCurveQ.addEventListener("click",this.listeners.changeToQ),i.lineCurveAdd.addEventListener("click",this.listeners.addAnchor),i.lineCurveMinus.addEventListener("click",this.listeners.deleteAnchor)},deselectLineCurves:function(){this.closeLPW();var t=this.controls;t.lineEditWindow.style.display="none",t.lineCurveL.setAttribute("selectedCurve","false"),t.lineCurveC.setAttribute("selectedCurve","false"),t.lineCurveQ.setAttribute("selectedCurve","false"),t.lineCurveL.removeEventListener("click",this.listeners.changeToL),t.lineCurveC.removeEventListener("click",this.listeners.changeToC),t.lineCurveQ.removeEventListener("click",this.listeners.changeToQ),t.lineCurveAdd.removeEventListener("click",this.listeners.addAnchor),t.lineCurveMinus.removeEventListener("click",this.listeners.deleteAnchor)},changeGeneralInfo:function(t){this.currentTopology=t.currentTopology,this.toolName=t.toolName,this.controls.workingTopology.textContent=this.currentTopology,this.controls.currentTool.textContent=this.toolName,t.toolInfo?"-"===t.toolInfo||(this.controls.toolInfo.parentElement.style.display="block",this.controls.toolInfo.innerHTML=t.toolInfo):this.controls.toolInfo.parentElement.style.display="none"},openNPWEdit:function(t){function e(t){var e={},i={};i.label=t.data.label,i.shape=t.shape,i.size=t.size,i.stroke=t.stroke,i.lat=t.coord[0],i.lng=t.coord[1],i.fill=t.fill,i.color=t.color,i.opacity=t.opacity,e[t.point.name]=i,n.npwJSONText.value=JSON.stringify(e,null,"  ")}this._atlas.map.dragging.disable(),this._atlas.map.scrollWheelZoom.disable(),this._atlas.map.removeEventListener("mouseup"),this._atlas.map.removeEventListener("dblclick"),this.listeners.changeColor=function(){n.nodeColorWrap.style.background=n.nodeColor.value,t.set("fill",n.nodeColor.value),e(t)},this.listeners.changeSize=function(){n.nodeSizeLabel.textContent=n.nodeSize.value+"px",t.set("size",parseInt(n.nodeSize.value)),e(t)},this.listeners.changeName=function(){var o=i._atlas.topologies[t.topology].endpoints;o[n.nodeName.value]?n.nodeName.style.border="thick solid #FF0000":(o[n.nodeName.value]=o[t.point.name],delete o[t.point.name],t.point.name=n.nodeName.value,n.nodeName.style.border=null,e(t))},this.listeners.changeLabel=function(){t.data.label=n.nodeLabel.value,t.set("label",n.nodeLabel.value),e(t)},this.listeners.cancelChanges=function(){t.newPoint&&(delete i._atlas.topologies[t.topology].endpoints[t.point.name],i._atlas.topologies[t.topology].points.pop(),t.layer.remove(),t.cancelled=!0),t.set("color",c),t.set("size",r),t.set("opacity",d),t.set("stroke",l),t.point.name=o,t.set("id",a),t.data.label=s,t.layer.setLatLng(h),t.point.lat=h[0],t.point.lng=h[1],t.coord=h;var e,n=$(i._atlas.topologies[t.topology].get("lines"));try{for(n.s();!(e=n.n()).done;){var u=e.value;if(u.a.id===t.id){var p=u.get("path");u.a.lat=h[0],u.a.lng=h[1],p[1]=[h[0],h[1]],u.setPath(p,i._atlas.map)}if(u.b.id===t.id){var f=u.get("path");u.b.lat=h[0],u.b.lng=h[1],f[f.length-1]=[h[0],h[1]],u.setPath(f,i._atlas.map)}}}catch(t){n.e(t)}finally{n.f()}i.listeners.closeNPWindow()},this.listeners.closeNPWindow=function(){if(!i.checkForIDCollision(t)||t.cancelled){if(n.nodeColor.removeEventListener("input",i.listeners.changeColor),n.nodeSize.removeEventListener("input",i.listeners.changeSize),n.nodeName.removeEventListener("input",i.listeners.changeName),n.nodeLabel.removeEventListener("input",i.listeners.changeLabel),n.nodeCancel.removeEventListener("click",i.listeners.cancelChanges),n.nodeMore.removeEventListener("click",i.listeners.showMoreNPW),n.nodeMore.setAttribute("activeOpen","false"),n.npwJSON.style.display="none",n.npwJSONText.textContent="",n.nodeMore.textContent="More",n.npwJSONText.removeEventListener("input",i.listeners.npwJSONChange),n.nodeDelete.removeEventListener("click",i.listeners.deleteButton),t.newPoint&&delete t.newPoint,o=t.point.name,a=t.id,s=t.data.label,r=t.size,l=t.stroke,h=t.coord,t.fill,c=t.color,d=t.opacity,n.npwWindow.style.display="none",i.loseFocus(),i._atlas.map.dragging.enable(),n.nodeSave.removeEventListener("click",i.listeners.closeNPWindow),i._atlas.map.on("mouseup",(function(t){i._atlas.map.removeEventListener("mousemove"),i._atlas.map.dragging.enable()})),i._atlas.map.scrollWheelZoom.enable(),"Add Node"===i.toolName){var e=i.currentTopology;i._editor.disableNodeAddMode(i._atlas.topologies[e]),i._editor.enableNodeAddMode(i._atlas.topologies[e])}}else alert("Node ID Already Exists! Please Provide a Different ID.")},this.listeners.npwJSONChange=function(){try{var e=JSON.parse(n.npwJSONText.value),o=Object.keys(e)[0],a=e[o];n.npwJSONStatus.style.display="none",t.set("size",parseInt(a.size)),t.set("stroke",parseInt(a.stroke)),t.set("fill",a.fill),t.set("color",a.color),t.set("opacity",parseFloat(a.opacity)),t.data.label=a.label,t.set("label",a.label),t.point.name=o,t.layer.setLatLng([a.lat,a.lng]),t.point.lat=a.lat,t.point.lng=a.lng,t.coord=[a.lat,a.lng];var s,r=$(i._atlas.topologies[t.topology].get("lines"));try{for(r.s();!(s=r.n()).done;){var l=s.value;if(l.a.id===t.id){var h=l.get("path");l.a.lat=a.lat,l.a.lng=a.lng,h[1]=[a.lat,a.lng],l.setPath(h,map)}if(l.b.id===t.id){var c=l.get("path");l.b.lat=a.lat,l.b.lng=a.lng,c[c.length-1]=[a.lat,a.lng],l.setPath(c,map)}}}catch(t){r.e(t)}finally{r.f()}n.nodeName.value=t.point.name,n.nodeLabel.value=t.data.label,n.nodeSize.value=t.size,n.nodeSizeLabel.textContent=t.size+"px",n.nodeColor.value=t.fill,n.nodeColorWrap.style.background=t.fill}catch(t){n.npwJSONStatus.style.display="inline-block"}},this.listeners.showMoreNPW=function(){"false"===this.getAttribute("activeOpen")?(n.npwJSON.style.display="block",this.textContent="Less",this.setAttribute("activeOpen","true")):(n.npwJSON.style.display="none",this.textContent="More",this.setAttribute("activeOpen","false"))},this.listeners.deleteKeyListener=function(e){if(("Delete"==e.key||"Backspace"==e.key)&&!["npw-label","npw-name","sidebar-npw-json-textarea"].includes(document.activeElement.id)){for(var n=0;n<i._atlas.topologies[t.topology].lines.length;n++){var o=i._atlas.topologies[t.topology].lines[n];if(o.a.id==t.id||o.b.id==t.id){var a,s=$(o.layer);try{for(s.s();!(a=s.n()).done;){a.value.removeFrom(i._atlas.map)}}catch(t){s.e(t)}finally{s.f()}i._atlas.topologies[t.topology].lines.splice(n,1),n--}}for(var r=0;r<i._atlas.topologies[t.topology].points.length;r++){var l=i._atlas.topologies[t.topology].points[r];if(l.id==t.id){l.layer.removeFrom(i._atlas.map),i._atlas.topologies[t.topology].points.splice(r,1);break}}i.listeners.closeNPWindow()}},this.listeners.deleteButton=function(){i.listeners.deleteKeyListener({key:"Delete"})},this.focusOnMe();var n=this.controls,i=this;n.npwWindow.style.display="block";var o=t.point.name,a=t.id,s=t.data.label,r=t.size,l=t.stroke,h=t.coord,c=(t.fill,t.color),d=t.opacity;n.nodeName.value=t.point.name,n.nodeLabel.value=t.data.label,n.nodeSize.value=t.size,n.nodeSizeLabel.textContent=t.size+"px",n.nodeColor.value=t.fill,n.nodeColorWrap.style.background=t.fill,e(t),n.nodeColorWrap.addEventListener("click",(function(){return n.nodeColor.click()})),n.nodeColor.addEventListener("input",i.listeners.changeColor),n.nodeSize.addEventListener("input",i.listeners.changeSize),n.nodeName.addEventListener("input",i.listeners.changeName),n.nodeLabel.addEventListener("input",i.listeners.changeLabel),n.npwJSONText.addEventListener("input",i.listeners.npwJSONChange),n.nodeSave.addEventListener("click",i.listeners.closeNPWindow),n.nodeCancel.addEventListener("click",i.listeners.cancelChanges),n.nodeDelete.addEventListener("click",i.listeners.deleteButton),n.nodeMore.addEventListener("click",i.listeners.showMoreNPW)},closeNPW:function(){this.listeners.cancelChanges(),this._atlas.dispatch("update")},openLPW:function(t){var e=this.controls;e.lineA.value=t.a.name,e.lineB.value=t.b.name,e.lineLabel.value=t.label,e.lineWeight.value=parseInt(t.options.weight),e.lineWeightLabel.textContent=t.options.weight,e.lineColor.value=t.options.color,e.lineColorWrap.style.background=t.options.color,this.setLPWJSON(t),e.lpwWindow.style.display="block";var n=this;function i(t){try{JSON.parse(t)}catch(t){return!1}return!0}this.listeners.manageProperties=function(){n._editor.openKVModal(t)},this.listeners.saveProperties=function(){t.metadata={};var o=e.lpwMetadataWindow.children;if(o.length>3){for(var a=o.length-3,s=0;s<a;s++){var r=o[s+1],l=r.getElementsByClassName("sidebar-lpw-metadata-key")[0].value,h=r.getElementsByClassName("sidebar-lpw-metadata-value")[0].value;i(h)&&(h=JSON.parse(h)),""!=l&&""!=h&&(t.metadata[l]=h)}alert("Properties added to adjacency: ".concat(t.label))}n.setLPWJSON(t)},this.listeners.changeLineLabel=function(){t.set("label",e.lineLabel.value),n.setLPWJSON(t),n._atlas.dispatch("update")},this.listeners.changeLineWeight=function(){t.options.weight=e.lineWeight.value,e.lineWeightLabel.textContent=e.lineWeight.value,n.setLPWJSON(t);try{t.layer[0].setStyle({weight:e.lineWeight.value})}catch(t){}n._atlas.dispatch("update")},this.listeners.changeLineColor=function(){t.options.color=e.lineColor.value,e.lineColorWrap.style.background=e.lineColor.value,t.layer[0].setStyle({color:e.lineColor.value}),n.setLPWJSON(t),n._atlas.dispatch("update")},this.listeners.lpwSliderTouched=function(){n._atlas.map.dragging.disable()},this.listeners.lpwSliderOff=function(){n._atlas.map.dragging.enable()},this.listeners.lpwShowMore=function(){"false"===this.getAttribute("activeOpen")?(e.lpwJSON.style.display="block",this.textContent="Less",this.setAttribute("activeOpen","true")):(e.lpwJSON.style.display="none",this.textContent="More",this.setAttribute("activeOpen","false"))},this.listeners.lpwJSONChange=function(){try{var n=JSON.parse(e.lpwJSONText.value);e.lpwJSONStatus.style.display="none",t.set("label",n.label);try{t.options.weight=parseInt(n.weight),t.layer[0].setStyle({weight:parseInt(n.weight)})}catch(t){}t.options.color=n.color,t.layer[0].setStyle({color:n.color}),t.min=n.min,t.max=n.max,e.lineLabel.value=n.label,e.lineWeight.value=parseInt(n.weight),e.lineWeightLabel.textContent=n.weight,e.lineColorWrap.style.background=n.color,e.lineColor.value=n.color}catch(t){e.lpwJSONStatus.style.display="inline-block"}},this.listeners.deleteLine=function(){n._editor.selectedAnchor&&n._editor.deselectAnchor(n._editor.selectedAnchor),t.removeAnchors(),t.removeWaypoints();var e,i=n._atlas.topologies[t.topology],o=$(t.layer);try{for(o.s();!(e=o.n()).done;){e.value.removeFrom(n._atlas.map)}}catch(t){o.e(t)}finally{o.f()}for(var a=0;a<i.lines.length;a++){if(i.lines[a]==t){n._atlas.topologies[t.topology].lines.splice(a,1);break}}n.closeLPW()},e.lineColorWrap.addEventListener("click",(function(){return e.lineColor.click()})),e.lineColor.addEventListener("input",this.listeners.changeLineColor),e.lineWeight.addEventListener("input",this.listeners.changeLineWeight),e.lineWeight.addEventListener("mousedown",this.listeners.lpwSliderTouched),e.lineWeight.addEventListener("mouseup",this.listeners.lpwSliderOff),e.lineLabel.addEventListener("input",this.listeners.changeLineLabel),e.lineMore.addEventListener("click",this.listeners.lpwShowMore),e.lpwJSONText.addEventListener("input",this.listeners.lpwJSONChange),e.lpwManageProperties.addEventListener("click",this.listeners.manageProperties),e.lineDelete.addEventListener("click",this.listeners.deleteLine)},closeLPW:function(){var t=this.controls;t.lpwWindow.style.display="none",t.lineColor.removeEventListener("input",this.listeners.changeLineColor),t.lineWeight.removeEventListener("input",this.listeners.changeLineWeight),t.lineWeight.removeEventListener("mousedown",this.listeners.lpwSliderTouched),t.lineWeight.removeEventListener("mouseup",this.listeners.lpwSliderOff),t.lineLabel.removeEventListener("input",this.listeners.changeLineLabel),t.lineMore.removeEventListener("click",this.listeners.lpwShowMore),t.lineDelete.removeEventListener("click",this.listeners.deleteLine),t.lpwManageProperties.removeEventListener("click",this.listeners.manageProperties),t.lineA.value="",t.lineB.value="",t.lineLabel.value="",t.lineWeight.value=1,t.lineWeightLabel.textContent="1",t.lpwJSON.style.display="none",t.lineMore.textContent="More",t.lineMore.setAttribute("activeOpen","false")},setLPWJSON:function(t){var e={};e.a=t.a.name,e.b=t.b.name,e.label=t.label,e.weight=t.options.weight,e.color=t.options.color,t.min&&(e.min=t.min),t.min&&(e.max=t.max),e.targets=t.targets,e.anchors=t.anchors,e.metadata=t.metadata,this.controls.lpwJSONText.value=JSON.stringify(e,null,"  ")},showMapJSON:function(t){this.focusOnMe(),this._atlas.map.scrollWheelZoom.disable();var e={};e.name=t.name,e.legend=t.legend,t.image&&(e.image=t.image),e.metadata=t.metadata;var n,i={},o=$(t.points);try{for(o.s();!(n=o.n()).done;){var a=n.value,s={};s.id=a.id,s.label=a.data.label,s.shape=a.shape,s.size=a.size,s.lat=a.coord[0],s.lng=a.coord[1],s.fill=a.fill,s.stroke=a.stroke,s.color=a.color,s.opacity=a.opacity,i[a.point.name]=s}}catch(t){o.e(t)}finally{o.f()}e.endpoints=i;var r,l=[],h=$(t.lines);try{for(h.s();!(r=h.n()).done;){var c=r.value,d={};d.a=c.a.name,d.b=c.b.name,d.anchors=c.anchors,d.targets=c.targets,l.push(d)}}catch(t){h.e(t)}finally{h.f()}e.adjacencies=l,this.controls.JSONText.parentElement.style.display="block",this.controls.JSONText.textContent=JSON.stringify(e,null,"  "),this.controls.JSONButton.textContent="Copy";var u=this;this.listeners.copyMapJSON=function(){var t=this;u.controls.JSONText.select(),document.execCommand("copy"),window.getSelection().removeAllRanges(),this.innerText="Copied!",setTimeout((function(){t.innerText="Copy"}),1e3)},this.controls.JSONButton.addEventListener("click",this.listeners.copyMapJSON)},hideMapJSON:function(){this.controls.JSONText.parentElement.style.display="none",this.controls.JSONText.textContent="",this.controls.JSONButton.textContent="",this.loseFocus(),this._atlas.map.scrollWheelZoom.enable(),this.controls.JSONButton.removeEventListener("click",this.listeners.copyMapJSON)},showAddJSONWindow:function(){this.focusOnMe(),this._atlas.map.scrollWheelZoom.disable(),this.controls.JSONText.parentElement.style.display="block",this.controls.JSONText.textContent="",this.controls.JSONButton.textContent="Add";var t=this;this.listeners.addTopology=function(){var e=t.controls.JSONText.value,n=JSON.parse(e);t._editor.addTopology(n),t._editor.disableSetTopologyMode()},this.controls.JSONButton.addEventListener("click",this.listeners.addTopology)},closeAddJSONWindow:function(){this.controls.JSONText.value="",this.controls.JSONText.parentElement.style.display="none",this.controls.JSONButton.textContent="",this.loseFocus(),this._atlas.map.scrollWheelZoom.enable(),this.controls.JSONButton.removeEventListener("click",this.listeners.addTopology)},focusOnMe:function(){var t=this,e=this._atlas.map._container;this.resizeObserver=new ResizeObserver((function(){t.sbContainer.style.width=e.offsetWidth+"px"})),this.resizeObserver.observe(e)},loseFocus:function(){var t=this,e=this._atlas.map._container;this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver((function(){t.sbContainer.style.height=e.offsetHeight+"px"})),this.resizeObserver.observe(e),this.sbContainer.style.width="var(--sidebar-width)"},checkForIDCollision:function(t){return this._atlas.topologies[t.topology].points.filter((function(e){if(t.id==e.id)return!0})).length>1}});n(17);var et=n(8),nt=n.n(et);function it(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ot(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw a}}}}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function at(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var st=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.editor=e,this.modal=L.DomUtil.create("div","atlas-editor-modal"),this.modal.innerHTML=nt.a,n.appendChild(this.modal),this.modal.style.display="none",this.controls={},this.listeners={},this.registerElements(),this.setFileUploadWindow()}var e,n,i;return e=t,(n=[{key:"registerElements",value:function(){var t=this,e=this.controls;e.modalHeaderDescription=document.getElementById("editor-modal-head-desc"),e.closeModal=document.getElementById("editor-modal-dismiss"),e.KVModalContainer=document.getElementById("editor-modal-kv-wrapper"),e.addPropertyMetadata=document.getElementById("editor-modal-add-kv"),e.savePropertyMetadata=document.getElementById("editor-modal-save-kv"),e.KVTableBody=document.getElementById("em-kv-tbody"),e.tileUploadWindow=document.getElementById("editor-modal-tile-drop-area"),e.tileFileInput=document.getElementById("atlas-modal-map-tile-input"),e.tileFileLabel=document.getElementById("atlas-modal-map-tile-upload"),e.tileSave=document.getElementById("atlas-modal-map-tile-save"),this.modal.addEventListener("mouseover",(function(){t.editor.map.scrollWheelZoom.disable(),t.editor.map.dragging.disable()})),this.modal.addEventListener("mouseout",(function(){t.editor.map.scrollWheelZoom.enable(),t.editor.map.dragging.enable()}))}},{key:"show",value:function(){this.modal.style.display="block"}},{key:"hide",value:function(){this.modal.style.display="none"}},{key:"configureCircuitKVTable",value:function(t){var e=this,n=this.listeners,i=this.controls;i.modalHeaderDescription.textContent="Manage Circuit Metadata",i.KVModalContainer.style.display="block";for(var o=0,a=Array.from(i.KVTableBody.getElementsByTagName("tr"));o<a.length;o++){var s=a[o];s&&s.remove()}if(t.metadata)for(var r in t.metadata){var l=document.createElement("tr");l.innerHTML=X.a,i.KVTableBody.appendChild(l);var h="";h="string"==typeof t.metadata[r]?t.metadata[r]:JSON.stringify(t.metadata[r],null,"  "),l.querySelector("[type=text]").value=r,l.querySelector("textarea").value=h;var c,d=it(i.KVTableBody.getElementsByClassName("em-trashcan"));try{for(d.s();!(c=d.n()).done;)c.value.onclick=function(){this.parentElement.parentElement.remove()}}catch(t){d.e(t)}finally{d.f()}}n.addNewProperty=function(){var t=document.createElement("tr");t.innerHTML=X.a,i.KVTableBody.appendChild(t);var e,n=it(i.KVTableBody.getElementsByClassName("em-trashcan"));try{for(n.s();!(e=n.n()).done;)e.value.onclick=function(){this.parentElement.parentElement.remove()}}catch(t){n.e(t)}finally{n.f()}},n.closeModalWindow=function(){i.addPropertyMetadata.removeEventListener("click",n.addNewProperty),i.savePropertyMetadata.removeEventListener("click",n.saveNewProperties),i.closeModal.removeEventListener("click",n.closeModalWindow),i.KVModalContainer.style.display="none",e.editor.closeKVModal(),e.hide()},n.saveNewProperties=function(){t.metadata={};for(var n=0,o=Array.from(i.KVTableBody.getElementsByTagName("tr"));n<o.length;n++){var a=o[n],s=a.querySelector("[type=text]").value,r=a.querySelector("textarea").value;e.isJsonString(r)&&(r=JSON.parse(r)),""!=s&&""!=r&&(t.metadata[s]=r)}i.savePropertyMetadata.textContent="Saved!",e.editor.atlas.dispatch("update"),e.editor.sidebar.setLPWJSON(t),setTimeout((function(){return i.savePropertyMetadata.textContent="Save Properties"}),1e3)},i.addPropertyMetadata.addEventListener("click",n.addNewProperty),i.savePropertyMetadata.addEventListener("click",n.saveNewProperties),i.closeModal.addEventListener("click",n.closeModalWindow)}},{key:"configureTopologyKVTable",value:function(t){var e=this,n=this.listeners,i=this.controls;i.modalHeaderDescription.textContent="Manage Topology Metadata",i.KVModalContainer.style.display="block";for(var o=0,a=Array.from(i.KVTableBody.getElementsByTagName("tr"));o<a.length;o++){var s=a[o];s&&s.remove()}if(t.image){var r=document.createElement("tr");r.innerHTML=X.a,i.KVTableBody.appendChild(r),r.querySelector("[type=text]").value="image",r.querySelector("textarea").value=t.image;var l,h=it(i.KVTableBody.getElementsByClassName("em-trashcan"));try{for(h.s();!(l=h.n()).done;)l.value.onclick=function(){this.parentElement.parentElement.remove()}}catch(t){h.e(t)}finally{h.f()}}if(t.metadata)for(var c in t.metadata)if("logo"!==c){var d=document.createElement("tr");d.innerHTML=X.a,i.KVTableBody.appendChild(d);var u="";u="string"==typeof t.metadata[c]?t.metadata[c]:JSON.stringify(t.metadata[c],null,"  "),d.querySelector("[type=text]").value=c,d.querySelector("textarea").value=u;var p,f=it(i.KVTableBody.getElementsByClassName("em-trashcan"));try{for(f.s();!(p=f.n()).done;)p.value.onclick=function(){this.parentElement.parentElement.remove()}}catch(t){f.e(t)}finally{f.f()}}n.addNewProperty=function(){var t=document.createElement("tr");t.innerHTML=X.a,i.KVTableBody.appendChild(t);var e,n=it(i.KVTableBody.getElementsByClassName("em-trashcan"));try{for(n.s();!(e=n.n()).done;)e.value.onclick=function(){this.parentElement.parentElement.remove()}}catch(t){n.e(t)}finally{n.f()}},n.closeModalWindow=function(){i.addPropertyMetadata.removeEventListener("click",n.addNewProperty),i.savePropertyMetadata.removeEventListener("click",n.saveNewProperties),i.closeModal.removeEventListener("click",n.closeModalWindow),e.editor.closeKVModal(),i.KVModalContainer.style.display="none",e.hide()},n.saveNewProperties=function(){t.metadata={};for(var n=0,o=Array.from(i.KVTableBody.getElementsByTagName("tr"));n<o.length;n++){var a=o[n],s=a.querySelector("[type=text]").value,r=a.querySelector("textarea").value;e.isJsonString(r)&&(r=JSON.parse(r)),"image"!==s||""==r?""!=s&&""!=r&&(t.metadata[s]=r):e.changeTooltipImage(t,r)}i.savePropertyMetadata.textContent="Saved!",setTimeout((function(){return i.savePropertyMetadata.textContent="Save Properties"}),1e3)},i.addPropertyMetadata.addEventListener("click",n.addNewProperty),i.savePropertyMetadata.addEventListener("click",n.saveNewProperties),i.closeModal.addEventListener("click",n.closeModalWindow)}},{key:"isJsonString",value:function(t){try{JSON.parse(t)}catch(t){return!1}return!0}},{key:"changeTooltipImage",value:function(t,e){var n=t.points,i=t.lines;t.image=e;var o,a=it(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.image=e,s.tooltip.image=e,s.tooltip.update("image")}}catch(t){a.e(t)}finally{a.f()}var r,l=it(i);try{for(l.s();!(r=l.n()).done;){var h=r.value;h.image=e,h.tooltip.image=e,h.tooltip.update("image")}}catch(t){l.e(t)}finally{l.f()}}},{key:"setFileUploadWindow",value:function(){var t=this.controls;function e(t){t.preventDefault(),t.stopPropagation()}function n(e){t.tileUploadWindow.classList.add("highlight")}function i(e){t.tileUploadWindow.classList.remove("highlight")}["dragenter","dragover","dragleave","drop"].forEach((function(n){t.tileUploadWindow.addEventListener(n,e,!1)})),["dragenter","dragover"].forEach((function(e){t.tileUploadWindow.addEventListener(e,n,!1)})),["dragleave","drop"].forEach((function(e){t.tileUploadWindow.addEventListener(e,i,!1)}))}},{key:"configureMapTileWindow",value:function(t){var e,n=this,i=this.controls,o=this.listeners;i.tileUploadWindow.style.display="block",o.handleDrop=function(t){var e=t.dataTransfer.files[0];o.handleFile(e)},o.handleFile=function(t){var n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){if(t.name.length>20){var o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o="";return o+=t.substring(0,e),o+=".".repeat(i),o+=t.substring(t.length-n,t.length)}(t.name,7,7,3);document.querySelector("#editor-modal-tile-drop-area p").textContent="File Uploaded: "+o}else document.querySelector("#editor-modal-tile-drop-area p").textContent="File Uploaded: "+t.name;i.tileSave.classList.add("file-added"),e=n.result}},o.inputHandleFile=function(){o.handleFile(this.files[0])},o.closeModalWindow=function(){i.tileSave.classList.remove("file-added"),i.tileSave.textContent="Save File",document.querySelector("#editor-modal-tile-drop-area p").textContent="Choose an image file or drag it here.",i.tileUploadWindow.removeEventListener("drop",o.handleDrop),i.tileFileInput.removeEventListener("change",o.inputHandleFile),i.closeModal.removeEventListener("click",o.closeModalWindow),i.tileSave.removeEventListener("click",o.loadTile),i.tileUploadWindow.style.display="none",n.hide()},o.loadTile=function(){if(e){var o=new Image;o.onload=function(){var a,s,r=n.editor.map._size,l=o.width/o.height;r.x>=r.y?s=(a=r.y)*l:a=(s=r.x)/l;var h=n.editor.map.containerPointToLatLng([r.x/2,r.y/2]);n.editor.addMapTile({image:e,center:[h.lat,h.lng],width:s,height:a,zoom:n.editor.map.getZoom()},t),i.tileSave.textContent="Saved!",setTimeout((function(){i.tileSave.classList.remove("file-added"),i.tileSave.textContent="Save File",document.querySelector("#editor-modal-tile-drop-area p").textContent="Choose an image file or drag it here."}),1e3)},o.src=e}},i.tileUploadWindow.addEventListener("drop",o.handleDrop),i.tileFileInput.addEventListener("change",o.inputHandleFile),i.closeModal.addEventListener("click",o.closeModalWindow),i.tileSave.addEventListener("click",o.loadTile)}}])&&at(e.prototype,n),i&&at(e,i),t}();function rt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return lt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw a}}}}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ht(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ct=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.atlas=e,this.map=e.map,this.sidebar=new o.a.Control.Sidebar({atlas:this.atlas}),this.toolbar=new o.a.Control.Toolbar({atlas:this.atlas}),this.modal=new st(this,this.map._container),this.nodeAddMode=!1,this.lineAddMode=!1,this.nodeEditMode=!1,this.lineEditMode=!1,this.getJSONMode=!1,this.setTopologyMode=!1,this.topologyEditMode=!1,this.selectedAnchor=void 0}var e,n,i;return e=t,(n=[{key:"disableAllModes",value:function(){var t=this.atlas.topologies;switch(this.sidebar.toolName){case"Add Line":this.disableLineAddMode(t[this.sidebar.currentTopology]);break;case"Edit Node":this.disableNodeEditMode(t[this.sidebar.currentTopology]);break;case"Add Node":this.disableNodeAddMode(t[this.sidebar.currentTopology]);break;case"Edit Line":this.disableLineEditMode(t[this.sidebar.currentTopology]);break;case"Get Map JSON":this.disableGetJSONMode(t[this.sidebar.currentTopology]);break;case"Set Topology":this.disableSetTopologyMode();break;case"Edit Topology":this.disableTopologyEditMode(t[this.sidebar.currentTopology])}this.lineAddMode=!1,this.nodeEditMode=!1,this.nodeAddMode=!1,this.getJSONMode=!1,this.lineEditMode=!1,this.setTopologyMode=!1,this.topologyEditMode=!1}},{key:"showSidebar",value:function(){this.sidebar.sbContainer?this.sidebar.sbContainer.style.display="block":this.sidebar.addTo(this.map),this.sidebar.registerElements()}},{key:"hideSidebar",value:function(){this.sidebar.sbContainer.style.display="none"}},{key:"showToolbar",value:function(){this.toolbar.addTo(this.map)}},{key:"hideToolbar",value:function(){this.map.removeControl(this.toolbar)}},{key:"enableNodeAddMode",value:function(t){var e=this;this.disableAllModes(),this.nodeAddMode=!0,this.removeTooltips(t),this.sidebar.changeGeneralInfo({currentTopology:t.name,toolName:"Add Node",toolInfo:"Double Click anywhere on the map to add a new node"}),this.map._container.style.cursor="crosshair",this.map.on("dblclick",(function(n){var i=e.createUniqueName(6),o={id:e.createUniqueName(6),label:"NP",shape:"circle",lat:n.latlng.lat,lng:n.latlng.lng,name:i};t.endpoints[i]=o;var a=t.createPoint(i);a.layer.addTo(e.map),e.sidebar.openNPWEdit(a)}))}},{key:"disableNodeAddMode",value:function(t){this.nodeAddMode=!1,this.showTooltips(t),this.sidebar.changeGeneralInfo({currentTopology:"-",toolName:"-"}),this.sidebar.listeners.closeNPWindow&&this.sidebar.closeNPW(),this.map._container.style.cursor="default",this.map.removeEventListener("dblclick")}},{key:"enableLineAddMode",value:function(t){this.disableAllModes(),this.lineAddMode=!0,this.removeTooltips(t),this.sidebar.changeGeneralInfo({currentTopology:t.name,toolName:"Add Line",toolInfo:"Click on any two nodes to draw a line between them"});var e,n,i,o=t.get("points"),a=this,s=rt(o);try{for(s.s();!(i=s.n()).done;)r(i.value)}catch(t){s.e(t)}finally{s.f()}function r(i){l(i),function(t,i){t.layer.on("mousedown",(function(){if(e){n=t;var o={a:e.point.name,b:n.point.name,anchors:["L"],targets:[]},s=i.get("endpoints")[e.name],r=i.get("endpoints")[n.name];i.createLine(o,s,r).hideToolTip(),e.set("fill",e.fill),e.layer.bringToFront(),n.layer.bringToFront(),l(e),a.atlas.dispatch("update"),e=void 0,n=void 0}else e=t,this.removeEventListener("mouseover"),this.removeEventListener("mouseout"),this.setStyle({color:"#47FF0A",fillColor:"#47FF0A"})}))}(i,t)}function l(t){var e=t.layer.options.fillColor,n=t.layer.options.color;t.layer.on("mouseover",(function(){this.setStyle({color:"#FE63FB",fillColor:"#FE63FB"})})),t.layer.on("mouseout",(function(){this.setStyle({color:n,fillColor:e})}))}}},{key:"disableLineAddMode",value:function(t){this.lineAddMode=!1,this.showTooltips(t),this.sidebar.changeGeneralInfo({currentTopology:"-",toolName:"-"});var e,n=rt(t.get("points"));try{for(n.s();!(e=n.n()).done;){var i=e.value;i.layer.removeEventListener("mouseover"),i.layer.removeEventListener("mouseout"),i.layer.removeEventListener("mousedown")}}catch(t){n.e(t)}finally{n.f()}}},{key:"enableNodeEditMode",value:function(t){this.disableAllModes(),this.nodeEditMode=!0,this.removeTooltips(t);var e=this.sidebar;e.changeGeneralInfo({currentTopology:t.name,toolName:"Edit Node",toolInfo:"Drag node to re-position it <br> Double click to edit properties"});var n,i=t.get("points"),o=this.map,a=this,s=rt(i);try{var r=function(){var i=n.value;i.layer&&(i.layer.on("mousedown",(function(){var e=this;o.on("mousemove",(function(n){o.dragging.disable(),e.setLatLng([n.latlng.lat,n.latlng.lng]),i.point.lat=n.latlng.lat,i.point.lng=n.latlng.lng,i.coord=[n.latlng.lat,n.latlng.lng];var s,r=rt(t.get("lines"));try{for(r.s();!(s=r.n()).done;){var l=s.value;if(l.a.id===i.id){var h=l.get("path");l.a.lat=n.latlng.lat,l.a.lng=n.latlng.lng,h[1]=[n.latlng.lat,n.latlng.lng],l.setPath(h,o)}if(l.b.id===i.id){var c=l.get("path");l.b.lat=n.latlng.lat,l.b.lng=n.latlng.lng,c[c.length-1]=[n.latlng.lat,n.latlng.lng],l.setPath(c,o)}}}catch(t){r.e(t)}finally{r.f()}a.atlas.checkForOverlaps()}))})),i.layer.on("dblclick",(function(){e.openNPWEdit(i)})),o.on("mouseup",(function(t){o.removeEventListener("mousemove"),o.dragging.enable()})))};for(s.s();!(n=s.n()).done;)r()}catch(t){s.e(t)}finally{s.f()}}},{key:"disableNodeEditMode",value:function(t){this.nodeEditMode=!1,this.showTooltips(t),this.sidebar.changeGeneralInfo({currentTopology:"-",toolName:"-"}),this.sidebar.listeners.closeNPWindow&&this.sidebar.closeNPW();var e,n=rt(t.get("points"));try{for(n.s();!(e=n.n()).done;)e.value.layer.removeEventListener("mousedown")}catch(t){n.e(t)}finally{n.f()}}},{key:"enableTopologyEditMode",value:function(t){this.disableAllModes(),this.topologyEditMode=!0;var e=this.sidebar,n="Edit/Add ".concat(t.name," metadata");e.changeGeneralInfo({currentTopology:t.name,toolName:"Edit Topology",toolInfo:n}),e.openTopologyEditWindow(t)}},{key:"disableTopologyEditMode",value:function(t){this.topologyEditMode=!1;var e=this.sidebar;e.changeGeneralInfo({currentTopology:"-",toolName:"-"}),e.closeTopologyEditWindow(t)}},{key:"updateTooltipImage",value:function(t,e){this.sidebar.changeTooltipImage(t,e)}},{key:"enableLineEditMode",value:function(t){this.disableAllModes(),this.lineEditMode=!0,this.removeTooltips(t);var e=this.sidebar,n="Click any line in ".concat(t.name,' to show anchors.<br class="sidebar-br">Double Click on any red anchor to edit line segment.');e.changeGeneralInfo({currentTopology:t.name,toolName:"Edit Line",toolInfo:n});var i,o=t.get("lines"),a=this.map,s=this,r=rt(o);try{for(r.s();!(i=r.n()).done;)l(i.value)}catch(t){r.e(t)}finally{r.f()}function l(t){!function(t){t.hideToolTip();var e,n=rt(t.layer);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.on("mouseover",(function(){this.setStyle({color:"#FE63FB"})})),i.on("mouseout",(function(){this.setStyle({color:t.options.color})}))}}catch(t){n.e(t)}finally{n.f()}}(t),function(t){t.activated=!1;var e,n=rt(t.layer);try{for(n.s();!(e=n.n()).done;)e.value.on("mousedown",(function(){var e,n=rt(o);try{for(n.s();!(e=n.n()).done;){var i=e.value;i!=t&&i.activated&&(i.activated=!1,s.selectedAnchor&&s.deselectAnchor(s.selectedAnchor),i.removeAnchors(),i.removeWaypoints())}}catch(t){n.e(t)}finally{n.f()}if(t.activated=!t.activated,t.activated){s.selectedLine=t;var r,l=t.createAnchors(),h=rt(t.createWaypoints());try{for(h.s();!(r=h.n()).done;){var c=r.value;c.draw(a),c.setDragListener(s)}}catch(t){h.e(t)}finally{h.f()}var d,u=rt(l);try{for(u.s();!(d=u.n()).done;){var p=d.value;p.draw(a),p.setDragListener(s),p.setSelectListener(s)}}catch(t){u.e(t)}finally{u.f()}var f=a.doubleClickZoom;a.doubleClickZoom.disable();var m=document.createEvent("MouseEvents");m.initEvent("dblclick",!0,!0),l[l.length-1].marker._path.dispatchEvent(m),f&&a.doubleClickZoom.enable()}else s.selectedAnchor&&s.deselectAnchor(s.selectedAnchor),t.removeAnchors(),t.removeWaypoints()}))}catch(t){n.e(t)}finally{n.f()}}(t)}}},{key:"updateLineProperties",value:function(t){this.selectedAnchor&&this.selectedAnchor.line===t&&this.sidebar.setLPWJSON(t)}},{key:"selectAnchor",value:function(t){this.selectedAnchor&&this.deselectAnchor(this.selectedAnchor),t.select(),this.selectedAnchor=t,this.sidebar.selectAnchor(t)}},{key:"deselectAnchor",value:function(t){t.deselect(),this.sidebar.deselectLineCurves(),this.selectedAnchor=void 0}},{key:"disableLineEditMode",value:function(t){var e,n=rt(t.get("lines"));try{for(n.s();!(e=n.n()).done;){var i=e.value;delete i.activated;var o,a=rt(i.layer);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.removeEventListener("mouseover"),s.removeEventListener("mousedown")}}catch(t){a.e(t)}finally{a.f()}i.removeAnchors(),i.removeWaypoints(),i.showToolTip()}}catch(t){n.e(t)}finally{n.f()}this.selectedAnchor&&this.deselectAnchor(this.selectedAnchor)}},{key:"enableGetJSONMode",value:function(t){this.disableAllModes(),this.getJSONMode=!0,this.removeTooltips(t);var e=this.sidebar,n="JSON Data For ".concat(t.name);e.changeGeneralInfo({currentTopology:t.name,toolName:"Get Map JSON",toolInfo:n}),e.showMapJSON(t)}},{key:"disableGetJSONMode",value:function(t){this.getJSONMode=!1,this.showTooltips(t),this.sidebar.changeGeneralInfo({currentTopology:"-",toolName:"-"}),this.sidebar.hideMapJSON()}},{key:"enableSetTopologyMode",value:function(t){this.disableAllModes(),this.setTopologyMode=!0;var e=this.sidebar;"ADD"===t?(e.changeGeneralInfo({currentTopology:"-",toolName:"Set Topology",toolInfo:"Paste Map JSON Below To Add a New Topology"}),e.showAddJSONWindow()):e.changeGeneralInfo({currentTopology:"-",toolName:"Set Topology",toolInfo:"Select Topology To Delete From Map"})}},{key:"addTopology",value:function(t){if(this.atlas&&null!=this.atlas.map){for(var e=[],n=0,i=Object.keys(this.atlas.get("topologies"));n<i.length;n++)for(var o=i[n],a=this.atlas.get("topologies")[o].get("endpoints"),s=0,r=Object.keys(a);s<r.length;s++){var l=r[s],h=[a[l].lat,a[l].lng];e.push(h)}for(var c=0,d=Object.keys(t.endpoints);c<d.length;c++){var u=d[c],p=[t.endpoints[u].lat,t.endpoints[u].lng];e.push(p)}this.atlas.map.fitBounds(e)}this.atlas.addTopology(t,{twins:!1}),this.atlas.drawTopology(this.atlas.get("topologies")[t.name]),this.hideToolbar(),this.showToolbar()}},{key:"disableSetTopologyMode",value:function(){this.setTopologyMode=!1,this.sidebar.changeGeneralInfo({currentTopology:"-",toolName:"-"}),this.sidebar.closeAddJSONWindow()}},{key:"removeTooltips",value:function(t){var e,n=t.get("points"),i=t.get("lines"),o=rt(n);try{for(o.s();!(e=o.n()).done;)e.value.hideToolTip()}catch(t){o.e(t)}finally{o.f()}var a,s=rt(i);try{for(s.s();!(a=s.n()).done;)a.value.hideToolTip()}catch(t){s.e(t)}finally{s.f()}}},{key:"showTooltips",value:function(t){var e,n=t.get("points"),i=t.get("lines"),o=rt(n);try{for(o.s();!(e=o.n()).done;)e.value.showToolTip()}catch(t){o.e(t)}finally{o.f()}var a,s=rt(i);try{for(s.s();!(a=s.n()).done;)a.value.showToolTip()}catch(t){s.e(t)}finally{s.f()}}},{key:"createUniqueName",value:function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*i));return e}},{key:"keepScrollAndDragDisabled",value:function(){this.map.dragging.disable(),this.map.scrollWheelZoom.disable()}},{key:"openKVModal",value:function(t){this.modal.show(),this.modal.configureCircuitKVTable(t)}},{key:"closeKVModal",value:function(){}},{key:"openTopologyKVModal",value:function(t){this.modal.show(),this.modal.configureTopologyKVTable(t)}},{key:"openTileUploadModal",value:function(t){this.modal.show(),this.modal.configureMapTileWindow(t)}},{key:"addMapTile",value:function(t,e){e.tile?(e.tile.config=t,e.tile.display(!0)):(e.createTile(t).display(!0),this.disableTopologyEditMode(e),this.enableTopologyEditMode(e))}}])&&ht(e.prototype,n),i&&ht(e,i),t}();function dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ut(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(n),!0).forEach((function(e){pt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ft(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw a}}}}function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function gt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var vt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.features=e,this.options=n,this.layer=[],this.createLayers()}var e,n,i;return e=t,(n=[{key:"createLayers",value:function(){var t,e=ft(this.features);try{for(e.s();!(t=e.n()).done;){var n=t.value;switch(n.type){case"earthquake":var i=this.createEarthquakeLayer(n);i&&this.layer.push(i);break;case"quarry blast":var o=this.createQuarryBlastLayer(n);o&&this.layer.push(o)}}}catch(t){e.e(t)}finally{e.f()}}},{key:"createQuarryBlastLayer",value:function(t){if(this.options["quarry blast"]){var e=Math.ceil(t.mag);return o.a.circleMarker([t.lat,t.lng],ut(ut({},this.options["quarry blast"].style),{},{radius:2*e})).bindPopup("".concat(t.title))}}},{key:"createEarthquakeLayer",value:function(t){if(this.options.earthquake){var e=Math.ceil(t.mag);return o.a.circleMarker([t.lat,t.lng],ut(ut({},this.options.earthquake.style),{},{radius:2*e})).bindPopup("".concat(t.title))}}},{key:"drawOverlayTopology",value:function(t){var e,n=ft(this.layer);try{for(n.s();!(e=n.n()).done;)e.value.addTo(t)}catch(t){n.e(t)}finally{n.f()}}},{key:"hideOverlayTopology",value:function(t){var e,n=ft(this.layer);try{for(n.s();!(e=n.n()).done;)e.value.removeFrom(t)}catch(t){n.e(t)}finally{n.f()}}}])&&gt(e.prototype,n),i&&gt(e,i),t}();n(19);L.Control.Atlas=L.Control.Zoom.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out",zoomMinText:"Zoom min",zoomMinTitle:"Zoom min",showAllText:"Show all layers",showAllTitle:"Show all layers",hideAllText:"Hide all layers",hideAllTitle:"Hide all layers",toggleEditorText:"",toggleEditorTitle:"Toggle Atlas Editor"},onAdd:function(t){var e="leaflet-control-zoom",n=L.DomUtil.create("div",e+" leaflet-bar"),i=this.options;return this._atlas=this.options.atlas,this._map=t,this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut,this),this._map.options.atlas4.zoomMin&&(this._zoomMinButton=this._createButton(i.zoomMinText,i.zoomMinTitle,e+"-min",n,this._zoomMin,this)),this._map.options.atlas4.allLayers&&(this._showAllButton=this._createButton(i.showAllText,i.showAllTitle,"show-all-layers",n,this._showAll,this),this._hideAllButton=this._createButton(i.hideAllText,i.hideAllTitle,"hide-all-layers",n,this._hideAll,this)),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),this._editorButton=this._createButton(i.toggleEditorText,i.toggleEditorTitle,"atlas-toggle-editor",n,this._toggleEditor,this),this.editorFlag=!1,n},_toggleEditor:function(){this.editorFlag?(this._atlas.editor.hideToolbar(),this._atlas.editor.hideSidebar()):(this._atlas.editor.showToolbar(),this._atlas.editor.showSidebar(),this._atlas.editor.sidebar.sendToBack()),this.editorFlag=!this.editorFlag},_zoomMin:function(){if(this.options.minBounds)return this._map.fitBounds(this.options.minBounds);this._map.setZoom(this._map.getMinZoom())},_showAll:function(){for(var t in this._atlas.topologies)this._atlas.topologies[t].active||this._atlas.topologies[t].toggle();this._atlas.setView([30,-110],2),this._atlas.updateStats(),this._atlas.set("layersOn",!0)},_hideAll:function(){for(var t in this._atlas.topologies)this._atlas.topologies[t].active&&this._atlas.topologies[t].toggle();this._atlas.updateStats(),this._atlas.set("layersOn",!1)},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";L.DomUtil.removeClass(this._zoomInButton,e),L.DomUtil.removeClass(this._zoomOutButton,e),t.options.atlas4.zoomMin&&L.DomUtil.removeClass(this._zoomMinButton,e),t._zoom===t.getMinZoom()&&L.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&L.DomUtil.addClass(this._zoomInButton,e),t._zoom===t.getMinZoom()&&t.options.atlas4.zoomMin&&L.DomUtil.addClass(this._zoomMinButton,e)}});var yt=n(6),_t=n.n(yt);n(21),n(27),n(29);function bt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return At(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return At(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw a}}}}function At(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function wt(t){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var xt=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.debug=n.map.debug,this.options={},this.options.map=n.map,this.options.leaflet=n.leaflet,this.options.tiles=n.tiles,this.options.overlayTiles=n.overlayTiles||[],this.options.point=n.point,this.options.line=n.line,this.options.legend=n.legend,this.options.topology=n.topology,this.options.tooltip=n.tooltip,this.options.controls=n.map.controls||{},this.options.overlayTopology=n.overlayTopology||{},this.options.minimap=n.map.minimap||!1,this.options.minimapConfig={map:n.map.minimapNetwork,data:n.map.minimapData},this.createLineDefaults(),this.createPointDefaults(),this.createTooltipDefaults(),f.prototype.defaults=n.legend,this.container=e,this.topologies={},this.legends={},this.overlayTopologies={},this.stats={topologies:0,lines:0,points:0},window.L_DISABLE_3D=!0,this.options.controls.zoomMin=void 0===this.options.controls.zoomMin||this.options.controls.zoomMin,this.options.controls.allLayers=void 0!==this.options.controls.allLayers&&this.options.controls.allLayers,this.options.controls.editor=void 0===this.options.controls.editor||this.options.controls.editor,this.options.leaflet.atlas4=this.options.controls,this.map=o.a.map(e,this.options.leaflet),this.tiles={},this.options.tiles&&this.createTiles(),this.overlayTiles={},this.options.overlayTiles&&this.createOverlayTiles(),this.setView({view:[0,0],zoom:1}),this.layersOn=!0,(this.options.controls.zoomMin||this.options.controls.allLayers)&&(this.map.removeControl(this.map.zoomControl),this.map.addControl(new o.a.Control.Atlas({minBounds:this.map.getBounds(),atlas:this}))),f.createParent(this.container,this.options.legend);for(var a=0,s=Object.keys(this.options.legend.legends);a<s.length;a++){var r=s[a];this.legends[r]=new f(r,this.options.legend,this.container),this.legends[r].hide()}//!! DEVELOPMENT FUNCTIONALITIES !!//
this.map.addEventListener("click",this.onMapClick,{passive:!0}),this.map.addEventListener("zoomend",this.redraw.bind(this),{passive:!0}),this.editor=new ct(this),console.debug('Initialized Atlas map in "#'.concat(e,'"')),this.options.minimap&&(this.showLoader(),this.drawMiniMap()),this.map.on("zoomend",(function(){i.checkForOverlaps()})),this.events={}}var e,n,i;return e=t,(n=[{key:"get",value:function(t){return this[t]}},{key:"set",value:function(t,e){var n=t.split(".");if(1===n.length)this[t]=e,this.update(t);else for(var i=this,o=0;o<n.length;o++)o===n.length-1?(i[n[o]]=e,this.update(n[o])):i=i[n[o]]}},{key:"update",value:function(t){"tiles"!==t&&"options.tiles"!==t||(this.removeTiles(),this.addTiles())}},{key:"properties",value:function(){return Object.entries(this)}},{key:"lineDataModel",value:function(t){(!t instanceof Object||t instanceof Array)&&console.error("The input Line data model is not an object. Type is ".concat(wt(t))),j.prototype.dataModel=t}},{key:"pointDataModel",value:function(t){(!t instanceof Object||t instanceof Array)&&console.error("The input Point data model is not an object. Type is ".concat(wt(t))),l.prototype.dataModel=t}},{key:"setView",value:function(t){this.map.setView(t.view,t.zoom)}},{key:"setFocus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];void 0===t&&console.error("Setting focus on an undefined topology"),e&&this._showOnly(t),"string"==typeof t&&this.topologies[t]&&(t=this.topologies[t]),!1===t.active&&t.show(),t.view&&this.map.fitBounds(t.view)}},{key:"createTileUrl",value:function(t){var e=t.url;return t.token&&(e+="?access_token=".concat(t.token)),e}},{key:"createTiles",value:function(){var t,e=bt(this.options.tiles);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.tiles[n.name]=o.a.tileLayer(this.createTileUrl(n),n),n.default&&this.tiles[n.name].addTo(this.map)}}catch(t){e.e(t)}finally{e.f()}}},{key:"showTile",value:function(t){for(var e in this.tiles)e!==t?this.hideTile(e):this.tiles[e].addTo(this.map);this.redrawOverlayTiles()}},{key:"hideTile",value:function(t){this.tiles[t]&&this.tiles[t].removeFrom(this.map)}},{key:"removeTiles",value:function(){for(var t in this.tiles)this.tiles[t].removeFrom(this.map)}},{key:"createOverlayTiles",value:function(){var t,e=bt(this.options.overlayTiles);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.overlayTiles[n.name]=o.a.tileLayer(this.createTileUrl(n),n)}}catch(t){e.e(t)}finally{e.f()}}},{key:"showOverlayTile",value:function(t){this.overlayTiles[t]&&this.overlayTiles[t].addTo(this.map)}},{key:"hideOverlayTile",value:function(t){this.overlayTiles[t]&&this.overlayTiles[t].removeFrom(this.map)}},{key:"redrawOverlayTiles",value:function(){for(var t in this.overlayTiles)this.map.hasLayer(this.overlayTiles[t])&&(this.overlayTiles[t].removeFrom(this.map),this.overlayTiles[t].addTo(this.map))}},{key:"addOverlayTopology",value:function(t){var e=new vt(t.config,this.options.overlayTopology);this.overlayTopologies[t.name]=e}},{key:"drawOverlayTopology",value:function(t){this.overlayTopologies[t]&&this.overlayTopologies[t].drawOverlayTopology(this.map)}},{key:"removeOverlayTopology",value:function(t){this.overlayTopologies[t]&&this.overlayTopologies[t].hideOverlayTopology(this.map)}},{key:"updateStats",value:function(){this.stats={topologies:0,lines:0,points:0};for(var t=0,e=Object.keys(this.topologies);t<e.length;t++){var n=e[t],i=this.topologies[n];this.stats.topologies+=i.active?1:0,this.stats.lines+=i.stats.lines,this.stats.points+=i.stats.points}}},{key:"addTopology",value:function(t,e){return"string"==typeof t&&(t=JSON.parse(t)),console.debug("Setting the Topology for ".concat(t.name,' in "#').concat(this.container,'"')),(e=e||this.options.topology).legends=this.legends,this.topologies[t.name]=new V(this,t,e),this.drawTopology(this.topologies[t.name]),this.dispatch("topology-added"),this.topologies[t.name]}},{key:"drawTopology",value:function(t){console.debug("Drawing topology for ".concat(t.name,' in "#').concat(this.container,'"'));var e,n=bt(t.lines);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.layer[0].addTo(this.map),2===i.layer.length&&i.layer[1].addTo(this.map)}}catch(t){n.e(t)}finally{n.f()}var o,a=bt(t.points);try{for(a.s();!(o=a.n()).done;)o.value.layer.addTo(this.map)}catch(t){a.e(t)}finally{a.f()}this.updateStats(),this.checkForOverlaps()}},{key:"hideTopology",value:function(t){this.topologies[t].hide(),this.updateStats()}},{key:"showTopology",value:function(t){this.topologies[t].show(),this.updateStats()}},{key:"_showOnly",value:function(t){var e;e="string"!=typeof t?t.name:t;for(var n=0,i=Object.keys(this.topologies);n<i.length;n++){var o=i[n];o==e?this.topologies[o].active||this.topologies[o].show():this.topologies[o].hide()}this.fitToView(),this.updateStats()}},{key:"showAll",value:function(){for(var t=0,e=Object.keys(this.topologies);t<e.length;t++){var n=e[t];this.topologies[n].active||this.topologies[n].show()}this.fitToView(),this.updateStats()}},{key:"fitToView",value:function(){var t=[];for(var e in this.topologies){var n=this.topologies[e];if(n.active){var i,o=bt(n.points);try{for(o.s();!(i=o.n()).done;){var a=i.value;t.push(a.layer.getLatLng())}}catch(t){o.e(t)}finally{o.f()}}}t&&t.length>0&&this.map.fitBounds(t)}},{key:"removeTopology",value:function(t){var e=this;if(this.topologies[t]){var n,i=this.topologies[t],o=bt(i.points);try{for(o.s();!(n=o.n()).done;)n.value.layer.removeFrom(this.map)}catch(t){o.e(t)}finally{o.f()}var a,s=bt(i.lines);try{for(s.s();!(a=s.n()).done;)a.value.layer.forEach((function(t){t.removeFrom(e.map)}))}catch(t){s.e(t)}finally{s.f()}return delete this.topologies[t],!0}return!1}},{key:"removeAllTopologies",value:function(){var t=this;Object.keys(this.topologies).forEach((function(e){return t.removeTopology(e)}))}},{key:"updateTopology",value:function(t){if(V.isPoint(t)){var e=t.get("layer");this.map.hasLayer(e)||e.addTo(this.map)}else V.isLine(t)&&this.map.hasLayer(t.line)}},{key:"checkForOverlaps",value:function(){if(this.options.controls.editor){var t=this.map.getZoom();if(!(Object.keys(this.topologies).length<1))for(var e in this.topologies){var n,i=this.topologies[e],o=bt(i.lines);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.options.color==this.options.map.overlapCircuitColor){a.options.color=this.options.line.color;var s,r=bt(a.layer);try{for(r.s();!(s=r.n()).done;)s.value.setStyle({color:this.options.line.color})}catch(t){r.e(t)}finally{r.f()}}}}catch(t){o.e(t)}finally{o.f()}var l,h={1:3.5306537,1.5:2.0216982,2:1.7653677,2.5:1.2801464,3:.8826941,3.5:.6495934,4:.4394531,4.5:.2962163,5:.2215501,5.5:.172205,6:.1178134,6.5:.0629858,7:.0553852,7.5:.0408117,8:.0276925,8.5:.0175293,9:.0137329,9.5:.0116625,10:.0068664,10.5:.0049127,11:.0034615,11.5:.0025313,12:.0017307,12.5:.0012784,13:8583e-7,13.5:6193e-7,14:4291e-7,14.5:3137e-7,15:1738e-7,15.5:1613e-7,16:1287e-7,16.5:703e-7,17:54e-6,17.5:403e-7,18:27e-6,18.5:211e-7,19:138e-7,19.5:96e-7,20:67e-7},c=bt(i.lines);try{for(c.s();!(l=c.n()).done;){var d=l.value;if(!(d.path.length>4)){var u,p=bt(i.lines);try{for(p.s();!(u=p.n()).done;){var f=u.value;if(!(f.path.length>4)){var m,g=!0,v=bt(d.layer);try{for(v.s();!(m=v.n()).done;){var y=m.value;this.map.hasLayer(y)||(g=!1)}}catch(t){v.e(t)}finally{v.f()}var _,b=bt(f.layer);try{for(b.s();!(_=b.n()).done;){var A=_.value;this.map.hasLayer(A)||(g=!1)}}catch(t){b.e(t)}finally{b.f()}if(0!=f.layer.length&&0!=d.layer.length||(g=!1),d!=f&&g){var w=I(d.a,f.a),L=I(d.b,f.b),x=I(d.a,f.b),M=I(d.b,f.a),T=h[t];if(!T)return;if((w<T&&L<T||x<T&&M<T)&&d.options.color==this.options.line.color){d.options.color=this.options.map.overlapCircuitColor;var k,C=bt(d.layer);try{for(C.s();!(k=C.n()).done;)k.value.setStyle({color:this.options.map.overlapCircuitColor})}catch(t){C.e(t)}finally{C.f()}}}}}}catch(t){p.e(t)}finally{p.f()}}}}catch(t){c.e(t)}finally{c.f()}}}function I(t,e){return Math.sqrt(Math.pow(t.lat-e.lat,2)+Math.pow(t.lng-e.lng,2))}}},{key:"resize",value:function(){this.map.invalidateSize()}},{key:"onMapClick",value:function(t){console.debug([t.latlng.lat,t.latlng.lng])}},{key:"redraw",value:function(){console.debug("Redraw of the map triggered")}},{key:"customLineTooltip",value:function(t){var e,n=bt(this.topologies);try{for(n.s();!(e=n.n()).done;){var i,o=bt(e.value.lines);try{for(o.s();!(i=o.n()).done;)i.value.set("html",t)}catch(t){o.e(t)}finally{o.f()}}}catch(t){n.e(t)}finally{n.f()}}},{key:"customPointTooltip",value:function(t){var e,n=bt(this.topologies);try{for(n.s();!(e=n.n()).done;){var i,o=bt(e.value.points);try{for(o.s();!(i=o.n()).done;)i.value.set("html",t)}catch(t){o.e(t)}finally{o.f()}}}catch(t){n.e(t)}finally{n.f()}}},{key:"customTooltip",value:function(t,e){var n=["html","css","vars"];for(var i in"point"!=t&&"line"!=t&&console.error('Unrecognized tooltip type "'.concat(t,'" given to customTooltip(). Valid types are "point" and "line"')),e)-1==n.indexOf(i)&&console.error('Unrecognized key "'.concat(i,'" given in custom tooltip options. Valid keys are "css", "html", and "vars"'));for(var o=0,a=Object.values(this.topologies);o<a.length;o++){var s,r=a[o],l=bt(n);try{for(l.s();!(s=l.n()).done;){var h=s.value;if(e[h]){var c,d=bt(r.lines);try{for(d.s();!(c=d.n()).done;)c.value.set(h,e[h])}catch(t){d.e(t)}finally{d.f()}var u,p=bt(r.points);try{for(p.s();!(u=p.n()).done;)u.value.set(h,e[h])}catch(t){p.e(t)}finally{p.f()}}}}catch(t){l.e(t)}finally{l.f()}}}},{key:"createTooltipDefaults",value:function(){var t=this.options.tooltip,e={point:{html:s.a,css:void 0,vars:void 0},line:{html:x.a,css:void 0,vars:void 0}};if(t)for(var n=0,i=["point","line"];n<i.length;n++){var o=i[n];t[o]&&(t[o].html&&(e[o].html=t[o].html),t[o].css&&(e[o].css=t[o].css),t[o].vars&&(e[o].vars=t[o].vars))}t.autoPan&&(e.autoPan=t.autoPan),A.prototype.defaults=e}},{key:"createLineDefaults",value:function(){var t=this.options.line,e={weight:1,opacity:1,smoothFactor:1,color:"#555555",dataTarget:"input.now",units:"bits"};if(t)for(var n in t)e[n]=t[n];j.prototype.defaults=e}},{key:"createPointDefaults",value:function(){var t=this.options.point,e={size:4,shape:"circle",color:"black",stroke:1,fill:"white",fillOpacity:1,staticTooltip:!1};if(t)for(var n in t)e[n]=t[n];l.prototype.defaults=e}},{key:"drawMiniMap",value:function(){var t=this;console.log("Drawing map...."),fetch(this.options.minimapConfig.map).then((function(t){return t.json()})).then((function(e){var n,i=bt(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.addTopology(o),t.fitToView(),o.tile||t.hideLoader(),t.colorCircuits(t.get("topologies")[o.name])}}catch(t){i.e(t)}finally{i.f()}})).catch((function(e){console.log(e),t.showError()}))}},{key:"colorCircuits",value:function(t){this.requestCircuitData(t)}},{key:"requestCircuitData",value:function(t,e){var n=this,i={name:t.name,start:"now-20m",end:"now"},o=new FormData;for(var a in i)o.append(a,i[a]);var s=this.setCircuitData.bind(this),r=this.options.minimapConfig.data;fetch(r,{method:"post",body:o}).then((function(t){return t.json()})).then((function(e){s(t,e.results)})).catch((function(t){console.log(t),n.showError()}))}},{key:"setCircuitData",value:function(t,e){if(e&&!(e.length<1)&&t){var n,i={},o=bt(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;i[a.node]||(i[a.node]={}),i[a.node][a.intf]=a,a.alternate_intf&&a.intf!=a.alternate_intf&&(i[a.node][a.alternate_intf]=a)}}catch(t){o.e(t)}finally{o.f()}var s,r=bt(t.lines);try{for(r.s();!(s=r.n()).done;){var l=s.value,h=-1,c=void 0,d=void 0,u=0,p=0,f=-1,m=void 0,g=void 0,v=0;if(l.metadata&&l.metadata.targets){var y,_=!1,b=bt(l.metadata.targets);try{for(b.s();!(y=b.n()).done;){var A=y.value;if(i[A.node_name]&&i[A.node_name][A.interface_name]&&!_&&null!=i[A.node_name][A.interface_name].output&&null!=i[A.node_name][A.interface_name].input){var w,L=i[A.node_name][A.interface_name].input.reverse(),x=i[A.node_name][A.interface_name].output.reverse(),M=bt(L);try{for(M.s();!(w=M.n()).done;){var T=w.value;null!=T[1]&&(-1==h?(h=T[1],c=T[1],d=T[1],u+=T[1],p++):(T[1]<c&&(c=T[1]),T[1]>d&&(d=T[1]),u+=T[1],p++))}}catch(t){M.e(t)}finally{M.f()}var k,C=bt(x);try{for(C.s();!(k=C.n()).done;){var I=k.value;null!=I[1]&&(-1==f?(f=I[1],m=I[1],g=I[1],v+=I[1]):(I[1]<m&&(m=I[1]),I[1]>g&&(g=I[1]),v+=I[1]))}}catch(t){C.e(t)}finally{C.f()}_=!0}}}catch(t){b.e(t)}finally{b.f()}if(null!=!h&&null!=!f&&-1!=h&&-1!=f){var E={now:h,min:c,max:d,avg:u/p},S={now:f,min:m,max:g,avg:v/p},N=void 0;N=E.now>S.now?{label:l.data.label,input:E,output:S}:{label:l.data.label,input:S,output:E},l.set("data",N)}}}}catch(t){r.e(t)}finally{r.f()}}}},{key:"showLoader",value:function(){var t=document.getElementById(this.container),e=document.querySelector("#".concat(this.container," .atlas4-loader"));e&&e.remove();var n=document.createElement("DIV");n.classList.add("atlas4-loader"),n.innerHTML=_t.a,t.appendChild(n)}},{key:"hideLoader",value:function(){var t=document.querySelector("#".concat(this.container," .atlas4-loader"));t&&t.remove()}},{key:"showError",value:function(){var t=document.getElementById(this.container),e=document.querySelector("#".concat(this.container," .atlas4-loader"));e&&e.remove();var n=document.createElement("DIV");n.classList.add("atlas4-loader"),n.innerHTML=_t.a,n.getElementsByTagName("svg")[0].remove(),n.getElementsByTagName("p")[0].innerHTML="Error Loading Map.<br>Please Refresh Page To Try Again.",n.getElementsByTagName("div")[0].style.width="200px",t.appendChild(n)}},{key:"changeLegendProperty",value:function(t,e,n){this.legends[t]&&(this.legends[t][e]=n,this.legends[t].rerender(),this.updateTopologyData())}},{key:"changeLegendValues",value:function(t,e,n){if(e.length-n.length==1){var i=e[0],o=e[e.length-1],a=e.slice(1,e.length-1);this.legends[t].min=Number(i),this.legends[t].max=Number(o),this.legends[t].thresholds=a,this.legends[t].colors=n,this.legends[t].rerender(),this.updateTopologyData()}}},{key:"changeTooltipContent",value:function(t,e){var n=this.topologies;for(var i in n)n[i][t].forEach((function(t){return t.tooltip.html=e}));this.updateTopologyData()}},{key:"updateTopologyData",value:function(){var t=this.topologies;for(var e in t)t[e].lines.forEach((function(t){return t.update("data")})),t[e].points.forEach((function(t){return t.update("data")}))}},{key:"getJSON",value:function(){var t=[];for(var e in this.topologies){var n=this.topologies[e],i={};i.name=n.name,i.legend=n.legend,n.image&&(i.image=n.image),i.metadata=n.metadata;var o,a={},s=bt(n.points);try{for(s.s();!(o=s.n()).done;){var r=o.value,l={};l.id=r.id,l.label=r.data.label,l.shape=r.shape,l.size=r.size,l.lat=r.coord[0],l.lng=r.coord[1],l.fill=r.fill,l.stroke=r.stroke,l.color=r.color,l.opacity=r.opacity,a[r.point.name]=l}}catch(t){s.e(t)}finally{s.f()}i.endpoints=a;var h,c=[],d=bt(n.lines);try{for(d.s();!(h=d.n()).done;){var u=h.value,p={};p.a=u.a.name,p.b=u.b.name,p.anchors=u.anchors,p.metadata=u.metadata,c.push(p)}}catch(t){d.e(t)}finally{d.f()}i.adjacencies=c,t.push(i)}return t}},{key:"on",value:function(t,e){this.events[t]?this.events[t].push(e):this.events[t]=[e]}},{key:"dispatch",value:function(t){if(this.events[t]){var e,n=bt(this.events[t]);try{for(n.s();!(e=n.n()).done;)(0,e.value)()}catch(t){n.e(t)}finally{n.f()}}}}])&&Lt(e.prototype,n),i&&Lt(e,i),t}()}])}));
//# sourceMappingURL=Atlas4.js.map